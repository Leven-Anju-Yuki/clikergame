/*! For license information please see byted_image_core-d11ed54d.8df7b64f.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).xss={})}(this,(function(e){"use strict";var t=function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},t.apply(this,arguments)};function r(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}var n=/[^a-zA-Z0-9\\_:.-]/gim,a=/</g,i=/>/g,o=/&#([a-zA-Z0-9]*);?/gim,s=/&quot;/g,c=/&colon;?/gim,l=/&newline;?/gim,u=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,d=/u\s*r\s*l\s*\(.*/gi,p=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,_=/"/g,f=function(e){return e.replace(a,"&lt;").replace(i,"&gt;")},h={indexOf:function(e,t){var r,n;for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var n,a;for(n=0,a=e.length;n<a;n++)t.call(r,e[n],n,e)},some:function(e,t,r){var n,a;for(n=0,a=e.length;n<a;n++)if(t.call(r,e[n],n,e))return!0;return!1},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},isArray:function(e){return e instanceof Array},includes:function(e,t){if("string"==typeof e)return-1!==e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1},uniq:function(e){for(var t={},r=[],n=0;n<e.length;n++)t[e[n]]||(r.push(e[n]),t[e[n]]=!0);return r},from:function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r]);return t},keys:function(e){var t=[];for(var r in e)t.push(r);return t}};function g(e){return null==e}function m(e){var t,r=h.spaceIndex(e);return t=-1===r?e.slice(1,-1):e.slice(1,r+1),"/"===(t=h.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}function v(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"="===r?t:-1}return-1}function y(e,t){for(;t>0;t--){var r=e[t];if(" "!==r)return"="===r?t:-1}return-1}function w(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}function b(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"'"===r||'"'===r?t:-1}return-1}function S(e){var t,r,n,a,i,o,s,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",u=0;for(e=function(e){e=e.replace(/rn/g,"n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}(e);u<e.length;)a=(t=e.charCodeAt(u++))>>2,i=(3&t)<<4|(r=e.charCodeAt(u++))>>4,o=(15&r)<<2|(n=e.charCodeAt(u++))>>6,s=63&n,isNaN(r)?o=s=64:isNaN(n)&&(s=64),l=l+c.charAt(a)+c.charAt(i)+c.charAt(o)+c.charAt(s);return l}function E(e){var t,r,n,a,i,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",l=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");l<e.length;)t=s.indexOf(e.charAt(l++))<<2|(a=s.indexOf(e.charAt(l++)))>>4,r=(15&a)<<4|(i=s.indexOf(e.charAt(l++)))>>2,n=(3&i)<<6|(o=s.indexOf(e.charAt(l++))),c+=String.fromCharCode(t),64!==i&&(c+=String.fromCharCode(r)),64!==o&&(c+=String.fromCharCode(n));return c=function(e){for(var t="",r=0,n=0,a=0,i=0;r<e.length;)(n=e.charCodeAt(r))<128?(t+=String.fromCharCode(n),r++):n>191&&n<224?(i=e.charCodeAt(r+1),t+=String.fromCharCode((31&n)<<6|63&i),r+=2):(i=e.charCodeAt(r+1),a=e.charCodeAt(r+2),t+=String.fromCharCode((15&n)<<12|(63&i)<<6|63&a),r+=3);return t}(c),c}function A(e){return"</"===e.slice(0,2)}function k(e,t,r){var n="",a=0,i=!1,o=!1,s=0,c=e.length,l="",u="";e:for(s=0;s<c;s++){var d=e.charAt(s);if(!1===i){if("<"===d){i=s;continue}}else if(!1===o){if("<"===d){n+=r(e.slice(a,s)),i=s,a=s;continue}if(">"===d||s===c-1){n+=r(e.slice(a,i)),l=m(u=e.slice(i,s+1)),n+=t(i,n.length,l,u,A(u)),a=s+1,i=!1;continue}if('"'===d||"'"===d)for(var p=1,_=e.charAt(s-p);""===_.trim()||"="===_;){if("="===_){o=d;continue e}_=e.charAt(s-++p)}}else if(d===o){o=!1;continue}}return a<c&&(n+=r(e.substr(a))),n}function P(e,t){var r=0,a=0,i=[],o=!1,s=e.length;function c(e,r){if(!((e=(e=h.trim(e)).replace(n,"").toLowerCase()).length<1)){var a=t(e,r||"");a&&i.push(a)}}for(var l=0;l<s;l++){var u=e.charAt(l),d=void 0;if(!1!==o||"="!==u)if(!1===o||l!==a){if(/\s|\n|\t/.test(u)){if(e=e.replace(/\s|\n|\t/g," "),!1===o){if(-1===(d=v(e,l))){c(h.trim(e.slice(r,l))),o=!1,r=l+1;continue}l=d-1;continue}if(-1===(d=y(e,l-1))){c(o,w(h.trim(e.slice(r,l)))),o=!1,r=l+1;continue}}}else{if(-1===(d=e.indexOf(u,l+1)))break;c(o,h.trim(e.slice(a+1,d))),o=!1,r=(l=d)+1}else o=e.slice(r,l),r=l+1,a='"'===e.charAt(r)||"'"===e.charAt(r)?r:b(e,l+1)}return r<e.length&&(!1===o?c(e.slice(r)):c(o,w(h.trim(e.slice(r))))),h.trim(i.join(" "))}function I(e,t,r){if(r=function(e){return function(e){for(var t="",r=0,n=e.length;r<n;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return h.trim(t)}(e=function(e){return e.replace(c,":").replace(l," ")}(e=function(e){return e.replace(o,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}(e=function(e){return e.replace(s,'"')}(e))))}(r),"href"===t||"src"===t){if("#"===(r=h.trim(r)))return"#";if("http://"!==r.substr(0,7)&&"https://"!==r.substr(0,8)&&"mailto:"!==r.substr(0,7)&&"tel:"!==r.substr(0,4)&&"data:image/"!==r.substr(0,11)&&"ftp://"!==r.substr(0,6)&&"./"!==r.substr(0,2)&&"../"!==r.substr(0,3)&&"#"!==r[0]&&"/"!==r[0])return""}else if("background"===t){if(u.lastIndex=0,u.test(r))return""}else if("style"===t){if(p.lastIndex=0,p.test(r))return"";if(d.lastIndex=0,d.test(r)&&(u.lastIndex=0,u.test(r)))return""}return function(e){return e=function(e){return e.replace(_,"&quot;")}(e),f(e)}(r)}var C=function(e){return"string"==typeof e?e.replace(/'/g,'"').replace('=""',"").replace(/\s+/g,"").toLowerCase():""},T=function(){function e(e){var t=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{});t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=function(){return""}),t.whiteList={},t.onTag=function(){},t.onTagAttr=function(){},t.onIgnoreTag=function(){},t.onIgnoreTagAttr=function(){},t.safeAttrValue=I,t.escapeHtml=f,this.options=Object.assign(t,e)}return e.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,n=t.onTag,a=t.onIgnoreTag,i=t.onTagAttr,o=t.onIgnoreTagAttr,s=t.safeAttrValue,c=t.escapeHtml;t.stripBlankChar&&(e=function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return!(127===t||t<=31&&10!==t&&13!==t)}))).join("")}(e)),t.allowCommentTag||(e=function(e){for(var t="",r=0;r<e.length;){var n=e.indexOf("\x3c!--",r);if(-1===n){t+=e.slice(r);break}t+=e.slice(r,n);var a=e.indexOf("--\x3e",n);if(-1===a)break;r=a+3}return t}(e));var l=!1;t.stripIgnoreTagBody&&(l=function(e,t){"function"!=typeof t&&(t=function(){});var r=!Array.isArray(e),n=[],a=!1;return{onIgnoreTag:function(i,o,s){if(function(t){return!!r||-1!==h.indexOf(e,t)}(i)){if(s.isClosing){var c="[/removed]",l=s.position+10;return n.push([!1!==a?a:s.position,l]),a=!1,c}return a||(a=s.position),"[removed]"}return t(i,o,s)},remove:function(e){var t="",r=0;return h.forEach(n,(function(n){t+=e.slice(r,n[0]),r=n[1]})),t+=e.slice(r)}}}(t.stripIgnoreTagBody,a),a=l.onIgnoreTag);var u=k(e,(function(e,t,l,u,d){var p={sourcePosition:e,position:t,isClosing:d,isWhite:Object.prototype.hasOwnProperty.call(r,l)},_=n(l,u,p);if(!g(_))return _;if(p.isWhite){if(p.isClosing)return"</".concat(l,">");var f=function(e){var t=h.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var r="/"===(e=h.trim(e.slice(t+1,-1)))[e.length-1];return r&&(e=h.trim(e.slice(0,-1))),{html:e,closing:r}}(u),m=r[l],v=P(f.html,(function(e,t){var r=-1!==h.indexOf(m,e),n=i(l,e,t,r);return g(n)?r?(t=s(l,e,t,null))?"".concat(e,'="').concat(t,'"'):e:g(n=o(l,e,t,r))?void 0:n:n}));return u="<".concat(l),v&&(u+=" ".concat(v)),f.closing&&(u+=" /"),u+">"}return g(_=a(l,u,p))?c(u):_}),c);return l&&(u=l.remove(u)),u},e}(),x=!0,R=function(e){return e&&e.Math==Math&&e},N=R("object"==typeof globalThis&&globalThis)||R("object"==typeof window&&window)||R("object"==typeof self&&self)||R("object"==typeof global&&global)||Function("return this")();try{!0!==(x=!!(x=String(x)).startsWith("<%=")||JSON.parse(x))&&"true"!==x||(N=new Function("\nvar _checkXSS = function (it) {\n  return it && it.Math == Math && it;\n};\nreturn _checkXSS(typeof globalThis === 'object' && globalThis) ||\n_checkXSS(typeof window === 'object' && window) ||\n_checkXSS(typeof self === 'object' && self) ||\n_checkXSS(typeof global === 'object' && global) ||\nFunction('return this')();\n")())}catch(e){console.log(e)}var L=new(function(){function e(){var e=this;this.batchData=[],this.uniqKeys=new Set,this.timeout=2e3,this.lock=!1,this.getSlardarBid=function(){var t,r,n="cc_web";if(!h.includes(n,"bid"))return n;if(e.config&&e.config.bid)return e.config.bid;var a=N;if(a&&a._xssBid)return a._xssBid;if(a&&a.slardar&&"function"==typeof a.slardar.config){var i=(a.slardar.config()||{}).bid;if(i)return i}if(a&&a.Slardar&&"function"==typeof a.Slardar.config){var o=(a.Slardar.config()||{}).bid;if(o)return o}return(null===(r=null===(t=null==a?void 0:a.Slardar)||void 0===t?void 0:t._baseParams)||void 0===r?void 0:r.bid)||"argus"},this.getConfigRegion=function(){var t;return h.includes("va","region")?e.config&&e.config.region?e.config.region:((null===(t=null==N?void 0:N.gfdatav1)||void 0===t?void 0:t.region)||"cn").toLowerCase():"va"},this.gerReportUrl=function(){var t={cn:E("aHR0cHM6Ly9tb24uemlqaWVhcGkuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),boe:E("aHR0cHM6Ly9tb24uemlqaWVhcGkuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),ttp:E("aHR0cHM6Ly9tb24udXMudGlrdG9rdi5jb20vbW9uaXRvcl9icm93c2VyL2NvbGxlY3QvYmF0Y2gvc2VjdXJpdHkvP2JpZD0="),va:E("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),maliva:E("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),sg:E("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),boei18n:E("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9")}[e.getConfigRegion()];if(t)return t+e.getSlardarBid()}}return e.prototype.setConfig=function(e){this.config=e},e.prototype.upload=function(){var e=this;if(!this.config||!this.config.isCloseReport){var t=!1;t=String(t);try{if(!0===(t=!t.startsWith("<%=")&&JSON.parse(t))||"true"===t)return}catch(e){console.log(e)}var r=this.gerReportUrl();!this.lock&&r&&0!==this.batchData.length&&(this.lock=!0,setTimeout((function(){var t=e.batchData.slice(0,100);e.batchData=e.batchData.slice(100),N.fetch(r,{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).catch((function(e){console.warn("xss defense report error",e)})),e.lock=!1,e.upload()}),this.timeout))}},e.prototype.generateKey=function(e){return e.collectKey?[e.collectMode,e.collectKey].join("___"):""},e.prototype.push=function(e){this.batchData.push(e),this.upload()},e.prototype.report=function(e){var t,r=this.generateKey(e);if(N.fetch&&e.collectKey){var n=(null===(t=null===window||void 0===window?void 0:window.location)||void 0===t?void 0:t.href)||"SSR";e.documentUrl=n;var a={age:Math.floor(Date.now()),type:"xss",url:n,body:e,"user-agent":""};"enforce"===e.disposition&&"SSR"!==n||(a.url=r),"SSR"===n&&(a.url="SSR___".concat(a.url),a.body.ssr=!0),this.push(a)}},e}());function O(e,t){return L.setConfig(t),new T(t).process(e)}var D=function(e){return-1===(e=(e=(e=(e=e.replace(/&colon;/gi,":")).replace(/&tab;/gi,"")).replace(/&newline;/gi,"")).replace(/(\t|\n|\r)/g,"")).indexOf("&#")?e.trim().toLowerCase():e.trim().replace(/&#(?:(x)([0-9a-f]+)|([0-9]+));?/gi,(function(e,t,r,n){return String.fromCharCode(t?parseInt(r,16):parseInt(n))})).replace(/(\t|\n|\r)/g,"").toLowerCase()};function U(e,t){if(void 0===e&&(e=""),"string"!=typeof e)return!0;if(e=D(e),h.includes(e,"base64")&&!function(e){if(""===e||""===e.trim())return!0;try{return!h.includes(e,"data:text/html;base64")}catch(e){return!0}}(e))return t&&t("data:text/html;base64"),!1;var r=["expression(","behavior:","view-source:"];if(h.some(r,(function(t){return-1!==e.indexOf(t)})))return h.forEach(r,(function(r){-1!==e.indexOf(r)&&t&&t(r)})),!1;var n=["data:application","data:javascript","data:text/html","data:texthtml"];if(h.some(n,(function(t){return-1!==e.indexOf(t)})))return h.forEach(n,(function(r){-1!==e.indexOf(r)&&t&&t(r)})),!1;if(e.indexOf("javascript:")>0)return t&&t("javascript:"),!1;if(/^javascript:/i.test(e)){var a=e.slice(11).replace(/\s/g,"").trim();return!!h.some(["void","void(0)","void0","false","undefined",";"],(function(e){return e===a}))||(t&&t("javascript:"),!1)}return!0}var j=function(e,t){var r,n,a=!1;if(a=String(a),"string"!=typeof e)return e;if(r=e,n=Number(-1),"NaN"!==r.toString()&&-1!==n&&r.length>=n)return e;if(U(e,t))return e;try{if(!0===(a=!a.startsWith("<%=")&&JSON.parse(a))||"true"===a){var i=new URL(e);return i.origin+i.pathname}}catch(e){return console.log(e),"#"}return"#"};function F(e,t,n){if(void 0===e&&(e=""),void 0===t&&(t=[]),"string"!=typeof e)return!0;if(!U(e=D(e)))return!1;var a=function(e){var t=e.match(/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/)||[];return{url:t[0],scheme:t[1],slash:t[2],host:t[3],port:t[4],path:t[5],query:t[6],hash:t[7]}}(e),i=a.scheme,o=a.host;return n?Boolean(n(e)):!(!i||!o)&&(!h.includes(["http","https","file"],i)||("object"==typeof window&&window&&(t=r(r([],t,!0),[location.host],!1)),h.some(t,(function(e){return!!(e instanceof RegExp&&e.test(o))||e===o}))))}var M=F,B=F,W=function(e,t){for(var r={},n=0,a=h.keys(e);n<a.length;n++){var i=a[n];Array.isArray(e[i])?r[i]=h.from(e[i]):r[i]=W({},e[i])}for(var o=0,s=h.keys(t);o<s.length;o++)(i=s[o])in e?Array.isArray(e[i])?r[i]=e[i].concat(t[i]):r[i]=W(e[i],t[i]):Array.isArray(t[i])?r[i]=h.from(t[i]):r[i]=W({},t[i]);return r},z={blackList:{a:["folder"],meta:["content"],iframe:["srcdoc"],input:["pattern"],vmlframe:["xmlns"]},blackTags:["script","xml","embed","isindex","object","base","set","handler","animate","payload","import"],blackAttrs:["charset","ns","namespace","formaction","xlink:href","xmlns:xlink","handler","repeat","repeat-start","repeat-end"],blackAttrRegExps:[/^on/],filterList:{param:["value"],video:["poster"],form:["action"]},filterAttrs:["href","src","background","style","dynsrc","lowsrc","content"]};try{var G={};G.blackAttrRegExps&&(G.blackAttrRegExps=G.blackAttrRegExps.map((function(e){return new RegExp(e.toString().slice(1,e.toString().length-1))})));var H="merge";h.includes(H,"override")&&(z=G),h.includes(H,"merge")&&(z=W(z,G))}catch(e){console.log(e)}var $,V={mode:"black",whiteList:{},blackConfig:z,collect:null,initCollect:function(){V.collect={blackList:{},blackTags:[],blackAttrs:[],blackAttrRegExps:[],filterAttrs:[],filterList:{},filterProtocol:[]}},removeCollect:function(){var e=function(e){for(var t=0,r=function(r){Array.isArray(e[r])?0===e[r].length?delete e[r]:(e[r]=h.from(h.uniq(e[r])),t+=e[r].length):0===h.keys(e[r]).length?delete e[r]:h.keys(e[r]).forEach((function(n){e[r][n]=h.from(h.uniq(e[r][n])),t+=e[r][n].length}))},n=0,a=h.keys(e);n<a.length;n++)r(a[n]);return{count:t,ret:e}}(V.collect),t=e.count,r=e.ret;return V.collect=null,{collectKey:0===t?null:JSON.stringify(r),collectMode:"black"}},onIgnoreTag:function(e,t){var r;if(!h.includes(z.blackTags,e)){var n=k(t,(function(e,t,r,n,a){if(-1!==r.indexOf("/"))return f(n);if(a)return"</".concat(r,">");var i=function(e){var t,r=(t=/\s|\n|\t/.exec(e))?t.index:-1;if(-1===r)return{html:"",closing:"/"===e[e.length-2]};var n="/"===(e=e.slice(r+1,-1).trim())[e.length-1];return n&&(e=e.slice(0,-1).trim()),{html:e,closing:n}}(n),o=P(i.html,(function(e,t){var n,a=0;if(z.blackList[r]&&h.includes(z.blackList[r],e)&&(V.collect.blackList[r]=V.collect.blackList[r]||[],V.collect.blackList[r].push(e),a++),z.blackAttrRegExps.length&&z.blackAttrRegExps.some((function(t){return t.test(e)}))&&h.forEach(z.blackAttrRegExps,(function(t){t.test(e)&&(V.collect.blackAttrRegExps.push("".concat(t.toString(),"->").concat(e)),a++)})),z.blackAttrs.length&&h.includes(z.blackAttrs,e)&&(z.blackAttrs.push(e),a++),!a){if(z.filterList&&z.filterList[r]&&h.includes(z.filterList[r],e)){var i=j(t,(function(e){var t;null===(t=V.collect)||void 0===t||t.filterProtocol.push(e)}));return i!==t&&(V.collect.filterList[r]=V.collect.filterList[r]||[],V.collect.filterList[r].push(e)),t?"".concat(e,"='").concat(i,"'"):e}return z.filterAttrs&&h.includes(z.filterAttrs,e)?(i=j(t,(function(e){var t;null===(t=V.collect)||void 0===t||t.filterProtocol.push(e)})),i!==t&&(null===(n=V.collect)||void 0===n||n.filterAttrs.push(e)),t?"".concat(e,"='").concat(i,"'"):e):t?"".concat(e,"='").concat(t,"'"):e}}));return n="<".concat(r),o&&(n+=" ".concat(o)),i.closing&&(n+=" /"),n+">"}),f);return n}null===(r=V.collect)||void 0===r||r.blackTags.push(e)}},Y=function(e){var t=e.reportOnly,r=void 0===t||t,n=e.block;return r&&"all"===r?"report":("string"==typeof r&&("true"===r&&(r=!0),"false"===r&&(r=!1)),n?"enforce":r?"report":"enforce")},q=function(e){return function(r,n,a){if(!r||"string"!=typeof r)return r;var i=n;e===O&&(i=V).initCollect();var o=e(r,i);if(C(o)===C(r))return r;if(!a)return o;var s=a.logType,c=Y(a),l=i.removeCollect();return L.report(t(t({type:s,disposition:c},l),{sourceText:S(r.replace(/'/g,'"')),filterText:S(o.replace(/'/g,'"'))})),"enforce"===c?o:r}},K=q((function(e,t){return void 0===t&&(t={}),t&&t.whiteList||(t.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}),new T(t).process(e)})),J=q(O),X=($=j,function(e,t,r){var n=[],a=$(e,(function(e){n.push(e)}));if(a===e)return e;n=h.from(h.uniq(n));var i=t||r||{};if(!i)return a;var o=i.logType,s=Y(r);return L.report({type:o,disposition:s,collectKey:n.join("___"),collectData:JSON.stringify(n),collectMode:"black",sourceText:S(e),filterText:S(a)}),"enforce"===s?a:e}),Z=N._xssProject||{},Q=N.xssNamespace||{},ee="3.0.30",te={FilterXSS:T,version:ee,webpackPluginVersion:"3.0.39",reportOnly:"all",filterXSS:K,_filterXSS:J,filterUrl:X,BlackConfig:V,project:Z,setProjectName:function(e){Z[e]=this,N._xssProjectName=e}};Q.cc_web_editor_smart_toolbox=te,N.xssNamespace=Q,N.Math&&!N.Math.xssNamespace&&(N.Math.xssNamespace=Q),Z[ee]=te,N.globalThis=N,N.getFilterXss=function(){return void 0!==this._xssProjectName?this._xssProject[this._xssProjectName]:te},N.xss=te,N.isSafeUrl=M,N.isSafeDomain=B,N.isSafeProtocol=U,N._xssProject=Z,N._xssProjectName&&(Z[N._xssProjectName]=te);var re=te.setProjectName.bind(te);e.BlackConfig=V,e.FilterXSS=T,e._filterXSS=J,e.filterUrl=X,e.filterXSS=K,e.isSafeDomain=B,e.isSafeProtocol=U,e.isSafeUrl=M,e.project=Z,e.setProjectName=re,e.setXssNamespace=function(e){var t=e.appId,r=e.bid,n=e.region,a=e.isCloseReport;Q[t]=te;var i=V;i.bid=r,i.region=n,i.enabled=!0,i.isCloseReport=a},e.xssNamespace=Q,Object.defineProperty(e,"__esModule",{value:!0})})),(window.webpackChunksmart_toolbox=window.webpackChunksmart_toolbox||[]).push([[6208],{47183:function(e,t,r){r.d(t,{Pj:function(){return D}});r(8503),r(43666),r(54257);var n=r(69874),a=r(83105),i=r(49853),o=r(38e3),s=r(67308);function c(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l="style_spin__5uCiL",u="style_rtl__vYVyg";!function(e,t){void 0===t&&(t={});var r=t.insertAt;if(!(typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===r&&n.firstChild?n.insertBefore(a,n.firstChild):n.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}(".style_spin__5uCiL,.style_spin__5uCiL svg {animation: style_iconpark-spin__mGDV3 1s infinite linear;}\n.style_rtl__vYVyg,.style_rtl__vYVyg svg {transform: scaleX(-1);}\n.style_spin__5uCiL.style_rtl__vYVyg,.style_spin__5uCiL.style_rtl__vYVyg svg {animation: style_iconpark-spin-rtl__ZyqaE 1s infinite linear;}\n@keyframes style_iconpark-spin__mGDV3 {\n  0% { -webkit-transform: rotate(0); transform: rotate(0);} 100% {-webkit-transform: rotate(360deg); transform: rotate(360deg);}\n}\n@keyframes style_iconpark-spin-rtl__ZyqaE {\n  0% {-webkit-transform: scaleX(-1) rotate(0); transform: scaleX(-1) rotate(0);} 100% {-webkit-transform: scaleX(-1) rotate(360deg); transform: scaleX(-1) rotate(360deg);}\n}");var d=["size","width","height","spin","rtl","color","fill","stroke","className"];function p(e){var t=(0,s.useRef)(null),r=e.size,n=void 0===r?"1em":r,a=e.width,i=e.height,o=e.spin,p=e.rtl,_=e.color,f=e.fill,h=e.stroke,g=e.className,m=c(e,d),v=a||n,y=i||n,w=h||_,b=f||_;return(0,s.useEffect)((function(){var e,r;b||(null===(e=t.current)||void 0===e||e.querySelectorAll("[data-follow-fill]").forEach((function(e){e.setAttribute("fill",e.getAttribute("data-follow-fill")||"")})));w||(null===(r=t.current)||void 0===r||r.querySelectorAll("[data-follow-stroke]").forEach((function(e){e.setAttribute("stroke",e.getAttribute("data-follow-stroke")||"")})))}),[h,_,f]),s.createElement("svg",Object.assign({ref:t,width:v,height:y,viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",fill:"none",role:"presentation",xmlns:"http://www.w3.org/2000/svg",className:"".concat(g||""," ").concat(o?l:""," ").concat(p?u:"").trim()},m),s.createElement("g",null,s.createElement("path",{"data-follow-fill":"currentColor",d:"M7 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm7 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm5 2a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",fill:b})))}var _=["size","width","height","spin","rtl","color","fill","stroke","className"];function f(e){var t=(0,s.useRef)(null),r=e.size,n=void 0===r?"1em":r,a=e.width,i=e.height,o=e.spin,d=e.rtl,p=e.color,f=e.fill,h=e.stroke,g=e.className,m=c(e,_),v=a||n,y=i||n,w=h||p,b=f||p;return(0,s.useEffect)((function(){var e,r;b||(null===(e=t.current)||void 0===e||e.querySelectorAll("[data-follow-fill]").forEach((function(e){e.setAttribute("fill",e.getAttribute("data-follow-fill")||"")})));w||(null===(r=t.current)||void 0===r||r.querySelectorAll("[data-follow-stroke]").forEach((function(e){e.setAttribute("stroke",e.getAttribute("data-follow-stroke")||"")})))}),[h,p,f]),s.createElement("svg",Object.assign({ref:t,width:v,height:y,viewBox:"0 0 12 12",preserveAspectRatio:"xMidYMid meet",fill:"none",role:"presentation",xmlns:"http://www.w3.org/2000/svg",className:"".concat(g||""," ").concat(o?l:""," ").concat(d?u:"").trim()},m),s.createElement("g",null,s.createElement("path",{"data-follow-fill":"currentColor",d:"m6 7.215 3.426-4.069 1.147.967-3.617 4.296a1.25 1.25 0 0 1-1.913 0L1.426 4.113l1.147-.967L6 7.216Z",fill:b})))}var h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof r.g<"u"?r.g:typeof self<"u"?self:{};function g(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var m,v,y={exports:{}};m=y,v=y.exports,function(){var e,t="Expected a function",r="__lodash_hash_undefined__",n="__lodash_placeholder__",a=16,i=32,o=64,s=128,c=256,l=1/0,u=9007199254740991,d=NaN,p=4294967295,_=[["ary",s],["bind",1],["bindKey",2],["curry",8],["curryRight",a],["flip",512],["partial",i],["partialRight",o],["rearg",c]],f="[object Arguments]",g="[object Array]",y="[object Boolean]",w="[object Date]",b="[object Error]",S="[object Function]",E="[object GeneratorFunction]",A="[object Map]",k="[object Number]",P="[object Object]",I="[object Promise]",C="[object RegExp]",T="[object Set]",x="[object String]",R="[object Symbol]",N="[object WeakMap]",L="[object ArrayBuffer]",O="[object DataView]",D="[object Float32Array]",U="[object Float64Array]",j="[object Int8Array]",F="[object Int16Array]",M="[object Int32Array]",B="[object Uint8Array]",W="[object Uint8ClampedArray]",z="[object Uint16Array]",G="[object Uint32Array]",H=/\b__p \+= '';/g,$=/\b(__p \+=) '' \+/g,V=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Y=/&(?:amp|lt|gt|quot|#39);/g,q=/[&<>"']/g,K=RegExp(Y.source),J=RegExp(q.source),X=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,te=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ne=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(ne.source),ie=/^\s+/,oe=/\s/,se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,le=/,? & /,ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/[()=,{}\[\]\/\s]/,pe=/\\(\\)?/g,_e=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fe=/\w*$/,he=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,me=/^\[object .+?Constructor\]$/,ve=/^0o[0-7]+$/i,ye=/^(?:0|[1-9]\d*)$/,we=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,be=/($^)/,Se=/['\n\r\u2028\u2029\\]/g,Ee="\\ud800-\\udfff",Ae="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ke="\\u2700-\\u27bf",Pe="a-z\\xdf-\\xf6\\xf8-\\xff",Ie="A-Z\\xc0-\\xd6\\xd8-\\xde",Ce="\\ufe0e\\ufe0f",Te="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",xe="['\u2019]",Re="["+Ee+"]",Ne="["+Te+"]",Le="["+Ae+"]",Oe="\\d+",De="["+ke+"]",Ue="["+Pe+"]",je="[^"+Ee+Te+Oe+ke+Pe+Ie+"]",Fe="\\ud83c[\\udffb-\\udfff]",Me="[^"+Ee+"]",Be="(?:\\ud83c[\\udde6-\\uddff]){2}",We="[\\ud800-\\udbff][\\udc00-\\udfff]",ze="["+Ie+"]",Ge="\\u200d",He="(?:"+Ue+"|"+je+")",$e="(?:"+ze+"|"+je+")",Ve="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ye="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",qe="(?:"+Le+"|"+Fe+")?",Ke="["+Ce+"]?",Je=Ke+qe+"(?:"+Ge+"(?:"+[Me,Be,We].join("|")+")"+Ke+qe+")*",Xe="(?:"+[De,Be,We].join("|")+")"+Je,Ze="(?:"+[Me+Le+"?",Le,Be,We,Re].join("|")+")",Qe=RegExp(xe,"g"),et=RegExp(Le,"g"),tt=RegExp(Fe+"(?="+Fe+")|"+Ze+Je,"g"),rt=RegExp([ze+"?"+Ue+"+"+Ve+"(?="+[Ne,ze,"$"].join("|")+")",$e+"+"+Ye+"(?="+[Ne,ze+He,"$"].join("|")+")",ze+"?"+He+"+"+Ve,ze+"+"+Ye,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Oe,Xe].join("|"),"g"),nt=RegExp("["+Ge+Ee+Ae+Ce+"]"),at=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,it=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ot=-1,st={};st[D]=st[U]=st[j]=st[F]=st[M]=st[B]=st[W]=st[z]=st[G]=!0,st[f]=st[g]=st[L]=st[y]=st[O]=st[w]=st[b]=st[S]=st[A]=st[k]=st[P]=st[C]=st[T]=st[x]=st[N]=!1;var ct={};ct[f]=ct[g]=ct[L]=ct[O]=ct[y]=ct[w]=ct[D]=ct[U]=ct[j]=ct[F]=ct[M]=ct[A]=ct[k]=ct[P]=ct[C]=ct[T]=ct[x]=ct[R]=ct[B]=ct[W]=ct[z]=ct[G]=!0,ct[b]=ct[S]=ct[N]=!1;var lt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ut=parseFloat,dt=parseInt,pt="object"==typeof h&&h&&h.Object===Object&&h,_t="object"==typeof self&&self&&self.Object===Object&&self,ft=pt||_t||Function("return this")(),ht=v&&!v.nodeType&&v,gt=ht&&m&&!m.nodeType&&m,mt=gt&&gt.exports===ht,vt=mt&&pt.process,yt=function(){try{return gt&&gt.require&&gt.require("util").types||vt&&vt.binding&&vt.binding("util")}catch{}}(),wt=yt&&yt.isArrayBuffer,bt=yt&&yt.isDate,St=yt&&yt.isMap,Et=yt&&yt.isRegExp,At=yt&&yt.isSet,kt=yt&&yt.isTypedArray;function Pt(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function It(e,t,r,n){for(var a=-1,i=null==e?0:e.length;++a<i;){var o=e[a];t(n,o,r(o),e)}return n}function Ct(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function Tt(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function xt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Rt(e,t){for(var r=-1,n=null==e?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}function Nt(e,t){return!(null==e||!e.length)&&zt(e,t,0)>-1}function Lt(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}function Ot(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}function Dt(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}function Ut(e,t,r,n){var a=-1,i=null==e?0:e.length;for(n&&i&&(r=e[++a]);++a<i;)r=t(r,e[a],a,e);return r}function jt(e,t,r,n){var a=null==e?0:e.length;for(n&&a&&(r=e[--a]);a--;)r=t(r,e[a],a,e);return r}function Ft(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Mt=Vt("length");function Bt(e,t,r){var n;return r(e,(function(e,r,a){if(t(e,r,a))return n=r,!1})),n}function Wt(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}function zt(e,t,r){return t==t?function(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}(e,t,r):Wt(e,Ht,r)}function Gt(e,t,r,n){for(var a=r-1,i=e.length;++a<i;)if(n(e[a],t))return a;return-1}function Ht(e){return e!=e}function $t(e,t){var r=null==e?0:e.length;return r?Kt(e,t)/r:d}function Vt(t){return function(r){return null==r?e:r[t]}}function Yt(t){return function(r){return null==t?e:t[r]}}function qt(e,t,r,n,a){return a(e,(function(e,a,i){r=n?(n=!1,e):t(r,e,a,i)})),r}function Kt(t,r){for(var n,a=-1,i=t.length;++a<i;){var o=r(t[a]);o!==e&&(n=n===e?o:n+o)}return n}function Jt(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Xt(e){return e&&e.slice(0,_r(e)+1).replace(ie,"")}function Zt(e){return function(t){return e(t)}}function Qt(e,t){return Ot(t,(function(t){return e[t]}))}function er(e,t){return e.has(t)}function tr(e,t){for(var r=-1,n=e.length;++r<n&&zt(t,e[r],0)>-1;);return r}function rr(e,t){for(var r=e.length;r--&&zt(t,e[r],0)>-1;);return r}var nr=Yt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),ar=Yt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ir(e){return"\\"+lt[e]}function or(e){return nt.test(e)}function sr(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function cr(e,t){return function(r){return e(t(r))}}function lr(e,t){for(var r=-1,a=e.length,i=0,o=[];++r<a;){var s=e[r];(s===t||s===n)&&(e[r]=n,o[i++]=r)}return o}function ur(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function dr(e){return or(e)?function(e){for(var t=tt.lastIndex=0;tt.test(e);)++t;return t}(e):Mt(e)}function pr(e){return or(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.split("")}(e)}function _r(e){for(var t=e.length;t--&&oe.test(e.charAt(t)););return t}var fr=Yt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),hr=function h(m){var v,oe=(m=null==m?ft:hr.defaults(ft.Object(),m,hr.pick(ft,it))).Array,Ee=m.Date,Ae=m.Error,ke=m.Function,Pe=m.Math,Ie=m.Object,Ce=m.RegExp,Te=m.String,xe=m.TypeError,Re=oe.prototype,Ne=ke.prototype,Le=Ie.prototype,Oe=m["__core-js_shared__"],De=Ne.toString,Ue=Le.hasOwnProperty,je=0,Fe=(v=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||""))?"Symbol(src)_1."+v:"",Me=Le.toString,Be=De.call(Ie),We=ft._,ze=Ce("^"+De.call(Ue).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ge=mt?m.Buffer:e,He=m.Symbol,$e=m.Uint8Array,Ve=Ge?Ge.allocUnsafe:e,Ye=cr(Ie.getPrototypeOf,Ie),qe=Ie.create,Ke=Le.propertyIsEnumerable,Je=Re.splice,Xe=He?He.isConcatSpreadable:e,Ze=He?He.iterator:e,tt=He?He.toStringTag:e,nt=function(){try{var e=di(Ie,"defineProperty");return e({},"",{}),e}catch{}}(),lt=m.clearTimeout!==ft.clearTimeout&&m.clearTimeout,pt=Ee&&Ee.now!==ft.Date.now&&Ee.now,_t=m.setTimeout!==ft.setTimeout&&m.setTimeout,ht=Pe.ceil,gt=Pe.floor,vt=Ie.getOwnPropertySymbols,yt=Ge?Ge.isBuffer:e,Mt=m.isFinite,Yt=Re.join,gr=cr(Ie.keys,Ie),mr=Pe.max,vr=Pe.min,yr=Ee.now,wr=m.parseInt,br=Pe.random,Sr=Re.reverse,Er=di(m,"DataView"),Ar=di(m,"Map"),kr=di(m,"Promise"),Pr=di(m,"Set"),Ir=di(m,"WeakMap"),Cr=di(Ie,"create"),Tr=Ir&&new Ir,xr={},Rr=ji(Er),Nr=ji(Ar),Lr=ji(kr),Or=ji(Pr),Dr=ji(Ir),Ur=He?He.prototype:e,jr=Ur?Ur.valueOf:e,Fr=Ur?Ur.toString:e;function Mr(e){if(ts(e)&&!Ho(e)&&!(e instanceof Gr)){if(e instanceof zr)return e;if(Ue.call(e,"__wrapped__"))return Fi(e)}return new zr(e)}var Br=function(){function t(){}return function(r){if(!es(r))return{};if(qe)return qe(r);t.prototype=r;var n=new t;return t.prototype=e,n}}();function Wr(){}function zr(t,r){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=e}function Gr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Hr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function $r(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Vr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Yr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Vr;++t<r;)this.add(e[t])}function qr(e){var t=this.__data__=new $r(e);this.size=t.size}function Kr(e,t){var r=Ho(e),n=!r&&Go(e),a=!r&&!n&&qo(e),i=!r&&!n&&!a&&ls(e),o=r||n||a||i,s=o?Jt(e.length,Te):[],c=s.length;for(var l in e)(t||Ue.call(e,l))&&(!o||!("length"==l||a&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||vi(l,c)))&&s.push(l);return s}function Jr(t){var r=t.length;return r?t[qn(0,r-1)]:e}function Xr(e,t){return Oi(Ta(e),sn(t,0,e.length))}function Zr(e){return Oi(Ta(e))}function Qr(t,r,n){(n!==e&&!Bo(t[r],n)||n===e&&!(r in t))&&an(t,r,n)}function en(t,r,n){var a=t[r];(!Ue.call(t,r)||!Bo(a,n)||n===e&&!(r in t))&&an(t,r,n)}function tn(e,t){for(var r=e.length;r--;)if(Bo(e[r][0],t))return r;return-1}function rn(e,t,r,n){return pn(e,(function(e,a,i){t(n,e,r(e),i)})),n}function nn(e,t){return e&&xa(t,Rs(t),e)}function an(e,t,r){"__proto__"==t&&nt?nt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function on(t,r){for(var n=-1,a=r.length,i=oe(a),o=null==t;++n<a;)i[n]=o?e:Ps(t,r[n]);return i}function sn(t,r,n){return t==t&&(n!==e&&(t=t<=n?t:n),r!==e&&(t=t>=r?t:r)),t}function cn(t,r,n,a,i,o){var s,c=1&r,l=2&r,u=4&r;if(n&&(s=i?n(t,a,i,o):n(t)),s!==e)return s;if(!es(t))return t;var d=Ho(t);if(d){if(s=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Ue.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(t),!c)return Ta(t,s)}else{var p=fi(t),_=p==S||p==E;if(qo(t))return Ea(t,c);if(p==P||p==f||_&&!i){if(s=l||_?{}:gi(t),!c)return l?function(e,t){return xa(e,_i(e),t)}(t,function(e,t){return e&&xa(t,Ns(t),e)}(s,t)):function(e,t){return xa(e,pi(e),t)}(t,nn(s,t))}else{if(!ct[p])return i?t:{};s=function(e,t,r){var n=e.constructor;switch(t){case L:return Aa(e);case y:case w:return new n(+e);case O:return function(e,t){var r=t?Aa(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case D:case U:case j:case F:case M:case B:case W:case z:case G:return ka(e,r);case A:return new n;case k:case x:return new n(e);case C:return function(e){var t=new e.constructor(e.source,fe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case T:return new n;case R:return function(e){return jr?Ie(jr.call(e)):{}}(e)}}(t,p,c)}}o||(o=new qr);var h=o.get(t);if(h)return h;o.set(t,s),os(t)?t.forEach((function(e){s.add(cn(e,r,n,e,t,o))})):rs(t)&&t.forEach((function(e,a){s.set(a,cn(e,r,n,a,t,o))}));var g=d?e:(u?l?ai:ni:l?Ns:Rs)(t);return Ct(g||t,(function(e,a){g&&(e=t[a=e]),en(s,a,cn(e,r,n,a,t,o))})),s}function ln(t,r,n){var a=n.length;if(null==t)return!a;for(t=Ie(t);a--;){var i=n[a],o=r[i],s=t[i];if(s===e&&!(i in t)||!o(s))return!1}return!0}function un(r,n,a){if("function"!=typeof r)throw new xe(t);return xi((function(){r.apply(e,a)}),n)}function dn(e,t,r,n){var a=-1,i=Nt,o=!0,s=e.length,c=[],l=t.length;if(!s)return c;r&&(t=Ot(t,Zt(r))),n?(i=Lt,o=!1):t.length>=200&&(i=er,o=!1,t=new Yr(t));e:for(;++a<s;){var u=e[a],d=null==r?u:r(u);if(u=n||0!==u?u:0,o&&d==d){for(var p=l;p--;)if(t[p]===d)continue e;c.push(u)}else i(t,d,n)||c.push(u)}return c}Mr.templateSettings={escape:X,evaluate:Z,interpolate:Q,variable:"",imports:{_:Mr}},Mr.prototype=Wr.prototype,Mr.prototype.constructor=Mr,zr.prototype=Br(Wr.prototype),zr.prototype.constructor=zr,Gr.prototype=Br(Wr.prototype),Gr.prototype.constructor=Gr,Hr.prototype.clear=function(){this.__data__=Cr?Cr(null):{},this.size=0},Hr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hr.prototype.get=function(t){var n=this.__data__;if(Cr){var a=n[t];return a===r?e:a}return Ue.call(n,t)?n[t]:e},Hr.prototype.has=function(t){var r=this.__data__;return Cr?r[t]!==e:Ue.call(r,t)},Hr.prototype.set=function(t,n){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=Cr&&n===e?r:n,this},$r.prototype.clear=function(){this.__data__=[],this.size=0},$r.prototype.delete=function(e){var t=this.__data__,r=tn(t,e);return!(r<0||(r==t.length-1?t.pop():Je.call(t,r,1),--this.size,0))},$r.prototype.get=function(t){var r=this.__data__,n=tn(r,t);return n<0?e:r[n][1]},$r.prototype.has=function(e){return tn(this.__data__,e)>-1},$r.prototype.set=function(e,t){var r=this.__data__,n=tn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Vr.prototype.clear=function(){this.size=0,this.__data__={hash:new Hr,map:new(Ar||$r),string:new Hr}},Vr.prototype.delete=function(e){var t=li(this,e).delete(e);return this.size-=t?1:0,t},Vr.prototype.get=function(e){return li(this,e).get(e)},Vr.prototype.has=function(e){return li(this,e).has(e)},Vr.prototype.set=function(e,t){var r=li(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Yr.prototype.add=Yr.prototype.push=function(e){return this.__data__.set(e,r),this},Yr.prototype.has=function(e){return this.__data__.has(e)},qr.prototype.clear=function(){this.__data__=new $r,this.size=0},qr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},qr.prototype.get=function(e){return this.__data__.get(e)},qr.prototype.has=function(e){return this.__data__.has(e)},qr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof $r){var n=r.__data__;if(!Ar||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Vr(n)}return r.set(e,t),this.size=r.size,this};var pn=La(wn),_n=La(bn,!0);function fn(e,t){var r=!0;return pn(e,(function(e,n,a){return r=!!t(e,n,a)})),r}function hn(t,r,n){for(var a=-1,i=t.length;++a<i;){var o=t[a],s=r(o);if(null!=s&&(c===e?s==s&&!cs(s):n(s,c)))var c=s,l=o}return l}function gn(e,t){var r=[];return pn(e,(function(e,n,a){t(e,n,a)&&r.push(e)})),r}function mn(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=mi),a||(a=[]);++i<o;){var s=e[i];t>0&&r(s)?t>1?mn(s,t-1,r,n,a):Dt(a,s):n||(a[a.length]=s)}return a}var vn=Oa(),yn=Oa(!0);function wn(e,t){return e&&vn(e,t,Rs)}function bn(e,t){return e&&yn(e,t,Rs)}function Sn(e,t){return Rt(t,(function(t){return Xo(e[t])}))}function En(t,r){for(var n=0,a=(r=ya(r,t)).length;null!=t&&n<a;)t=t[Ui(r[n++])];return n&&n==a?t:e}function An(e,t,r){var n=t(e);return Ho(e)?n:Dt(n,r(e))}function kn(t){return null==t?t===e?"[object Undefined]":"[object Null]":tt&&tt in Ie(t)?function(t){var r=Ue.call(t,tt),n=t[tt];try{t[tt]=e;var a=!0}catch{}var i=Me.call(t);return a&&(r?t[tt]=n:delete t[tt]),i}(t):function(e){return Me.call(e)}(t)}function Pn(e,t){return e>t}function In(e,t){return null!=e&&Ue.call(e,t)}function Cn(e,t){return null!=e&&t in Ie(e)}function Tn(t,r,n){for(var a=n?Lt:Nt,i=t[0].length,o=t.length,s=o,c=oe(o),l=1/0,u=[];s--;){var d=t[s];s&&r&&(d=Ot(d,Zt(r))),l=vr(d.length,l),c[s]=!n&&(r||i>=120&&d.length>=120)?new Yr(s&&d):e}d=t[0];var p=-1,_=c[0];e:for(;++p<i&&u.length<l;){var f=d[p],h=r?r(f):f;if(f=n||0!==f?f:0,!(_?er(_,h):a(u,h,n))){for(s=o;--s;){var g=c[s];if(!(g?er(g,h):a(t[s],h,n)))continue e}_&&_.push(h),u.push(f)}}return u}function xn(t,r,n){var a=null==(t=Ii(t,r=ya(r,t)))?t:t[Ui(Ki(r))];return null==a?e:Pt(a,t,n)}function Rn(e){return ts(e)&&kn(e)==f}function Nn(t,r,n,a,i){return t===r||(null==t||null==r||!ts(t)&&!ts(r)?t!=t&&r!=r:function(t,r,n,a,i,o){var s=Ho(t),c=Ho(r),l=s?g:fi(t),u=c?g:fi(r),d=(l=l==f?P:l)==P,p=(u=u==f?P:u)==P,_=l==u;if(_&&qo(t)){if(!qo(r))return!1;s=!0,d=!1}if(_&&!d)return o||(o=new qr),s||ls(t)?ti(t,r,n,a,i,o):function(e,t,r,n,a,i,o){switch(r){case O:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case L:return!(e.byteLength!=t.byteLength||!i(new $e(e),new $e(t)));case y:case w:case k:return Bo(+e,+t);case b:return e.name==t.name&&e.message==t.message;case C:case x:return e==t+"";case A:var s=sr;case T:var c=1&n;if(s||(s=ur),e.size!=t.size&&!c)return!1;var l=o.get(e);if(l)return l==t;n|=2,o.set(e,t);var u=ti(s(e),s(t),n,a,i,o);return o.delete(e),u;case R:if(jr)return jr.call(e)==jr.call(t)}return!1}(t,r,l,n,a,i,o);if(!(1&n)){var h=d&&Ue.call(t,"__wrapped__"),m=p&&Ue.call(r,"__wrapped__");if(h||m){var v=h?t.value():t,S=m?r.value():r;return o||(o=new qr),i(v,S,n,a,o)}}return!!_&&(o||(o=new qr),function(t,r,n,a,i,o){var s=1&n,c=ni(t),l=c.length,u=ni(r),d=u.length;if(l!=d&&!s)return!1;for(var p=l;p--;){var _=c[p];if(!(s?_ in r:Ue.call(r,_)))return!1}var f=o.get(t),h=o.get(r);if(f&&h)return f==r&&h==t;var g=!0;o.set(t,r),o.set(r,t);for(var m=s;++p<l;){var v=t[_=c[p]],y=r[_];if(a)var w=s?a(y,v,_,r,t,o):a(v,y,_,t,r,o);if(!(w===e?v===y||i(v,y,n,a,o):w)){g=!1;break}m||(m="constructor"==_)}if(g&&!m){var b=t.constructor,S=r.constructor;b!=S&&"constructor"in t&&"constructor"in r&&!("function"==typeof b&&b instanceof b&&"function"==typeof S&&S instanceof S)&&(g=!1)}return o.delete(t),o.delete(r),g}(t,r,n,a,i,o))}(t,r,n,a,Nn,i))}function Ln(t,r,n,a){var i=n.length,o=i,s=!a;if(null==t)return!o;for(t=Ie(t);i--;){var c=n[i];if(s&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++i<o;){var l=(c=n[i])[0],u=t[l],d=c[1];if(s&&c[2]){if(u===e&&!(l in t))return!1}else{var p=new qr;if(a)var _=a(u,d,l,t,r,p);if(!(_===e?Nn(d,u,3,a,p):_))return!1}}return!0}function On(e){return!(!es(e)||function(e){return!!Fe&&Fe in e}(e))&&(Xo(e)?ze:me).test(ji(e))}function Dn(e){return"function"==typeof e?e:null==e?nc:"object"==typeof e?Ho(e)?Wn(e[0],e[1]):Bn(e):pc(e)}function Un(e){if(!Ei(e))return gr(e);var t=[];for(var r in Ie(e))Ue.call(e,r)&&"constructor"!=r&&t.push(r);return t}function jn(e){if(!es(e))return function(e){var t=[];if(null!=e)for(var r in Ie(e))t.push(r);return t}(e);var t=Ei(e),r=[];for(var n in e)"constructor"==n&&(t||!Ue.call(e,n))||r.push(n);return r}function Fn(e,t){return e<t}function Mn(e,t){var r=-1,n=Vo(e)?oe(e.length):[];return pn(e,(function(e,a,i){n[++r]=t(e,a,i)})),n}function Bn(e){var t=ui(e);return 1==t.length&&t[0][2]?ki(t[0][0],t[0][1]):function(r){return r===e||Ln(r,e,t)}}function Wn(t,r){return wi(t)&&Ai(r)?ki(Ui(t),r):function(n){var a=Ps(n,t);return a===e&&a===r?Is(n,t):Nn(r,a,3)}}function zn(t,r,n,a,i){t!==r&&vn(r,(function(o,s){if(i||(i=new qr),es(o))!function(t,r,n,a,i,o,s){var c=Ci(t,n),l=Ci(r,n),u=s.get(l);if(u)Qr(t,n,u);else{var d=o?o(c,l,n+"",t,r,s):e,p=d===e;if(p){var _=Ho(l),f=!_&&qo(l),h=!_&&!f&&ls(l);d=l,_||f||h?Ho(c)?d=c:Yo(c)?d=Ta(c):f?(p=!1,d=Ea(l,!0)):h?(p=!1,d=ka(l,!0)):d=[]:as(l)||Go(l)?(d=c,Go(c)?d=ms(c):(!es(c)||Xo(c))&&(d=gi(l))):p=!1}p&&(s.set(l,d),i(d,l,a,o,s),s.delete(l)),Qr(t,n,d)}}(t,r,s,n,zn,a,i);else{var c=a?a(Ci(t,s),o,s+"",t,r,i):e;c===e&&(c=o),Qr(t,s,c)}}),Ns)}function Gn(t,r){var n=t.length;if(n)return vi(r+=r<0?n:0,n)?t[r]:e}function Hn(e,t,r){t=t.length?Ot(t,(function(e){return Ho(e)?function(t){return En(t,1===e.length?e[0]:e)}:e})):[nc];var n=-1;return t=Ot(t,Zt(ci())),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(Mn(e,(function(e,r,a){return{criteria:Ot(t,(function(t){return t(e)})),index:++n,value:e}})),(function(e,t){return function(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,s=r.length;++n<o;){var c=Pa(a[n],i[n]);if(c)return n>=s?c:c*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}))}function $n(e,t,r){for(var n=-1,a=t.length,i={};++n<a;){var o=t[n],s=En(e,o);r(s,o)&&Qn(i,ya(o,e),s)}return i}function Vn(e,t,r,n){var a=n?Gt:zt,i=-1,o=t.length,s=e;for(e===t&&(t=Ta(t)),r&&(s=Ot(e,Zt(r)));++i<o;)for(var c=0,l=t[i],u=r?r(l):l;(c=a(s,u,c,n))>-1;)s!==e&&Je.call(s,c,1),Je.call(e,c,1);return e}function Yn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var a=t[r];if(r==n||a!==i){var i=a;vi(a)?Je.call(e,a,1):da(e,a)}}return e}function qn(e,t){return e+gt(br()*(t-e+1))}function Kn(e,t){var r="";if(!e||t<1||t>u)return r;do{t%2&&(r+=e),(t=gt(t/2))&&(e+=e)}while(t);return r}function Jn(e,t){return Ri(Pi(e,t,nc),e+"")}function Xn(e){return Jr(Bs(e))}function Zn(e,t){var r=Bs(e);return Oi(r,sn(t,0,r.length))}function Qn(t,r,n,a){if(!es(t))return t;for(var i=-1,o=(r=ya(r,t)).length,s=o-1,c=t;null!=c&&++i<o;){var l=Ui(r[i]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(i!=s){var d=c[l];(u=a?a(d,l,c):e)===e&&(u=es(d)?d:vi(r[i+1])?[]:{})}en(c,l,u),c=c[l]}return t}var ea=Tr?function(e,t){return Tr.set(e,t),e}:nc,ta=nt?function(e,t){return nt(e,"toString",{configurable:!0,enumerable:!1,value:ec(t),writable:!0})}:nc;function ra(e){return Oi(Bs(e))}function na(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=oe(a);++n<a;)i[n]=e[n+t];return i}function aa(e,t){var r;return pn(e,(function(e,n,a){return!(r=t(e,n,a))})),!!r}function ia(e,t,r){var n=0,a=null==e?n:e.length;if("number"==typeof t&&t==t&&a<=2147483647){for(;n<a;){var i=n+a>>>1,o=e[i];null!==o&&!cs(o)&&(r?o<=t:o<t)?n=i+1:a=i}return a}return oa(e,t,nc,r)}function oa(t,r,n,a){var i=0,o=null==t?0:t.length;if(0===o)return 0;for(var s=(r=n(r))!=r,c=null===r,l=cs(r),u=r===e;i<o;){var d=gt((i+o)/2),p=n(t[d]),_=p!==e,f=null===p,h=p==p,g=cs(p);if(s)var m=a||h;else m=u?h&&(a||_):c?h&&_&&(a||!f):l?h&&_&&!f&&(a||!g):!f&&!g&&(a?p<=r:p<r);m?i=d+1:o=d}return vr(o,4294967294)}function sa(e,t){for(var r=-1,n=e.length,a=0,i=[];++r<n;){var o=e[r],s=t?t(o):o;if(!r||!Bo(s,c)){var c=s;i[a++]=0===o?0:o}}return i}function ca(e){return"number"==typeof e?e:cs(e)?d:+e}function la(e){if("string"==typeof e)return e;if(Ho(e))return Ot(e,la)+"";if(cs(e))return Fr?Fr.call(e):"";var t=e+"";return"0"==t&&1/e==-l?"-0":t}function ua(e,t,r){var n=-1,a=Nt,i=e.length,o=!0,s=[],c=s;if(r)o=!1,a=Lt;else if(i>=200){var l=t?null:Ka(e);if(l)return ur(l);o=!1,a=er,c=new Yr}else c=t?[]:s;e:for(;++n<i;){var u=e[n],d=t?t(u):u;if(u=r||0!==u?u:0,o&&d==d){for(var p=c.length;p--;)if(c[p]===d)continue e;t&&c.push(d),s.push(u)}else a(c,d,r)||(c!==s&&c.push(d),s.push(u))}return s}function da(e,t){return null==(e=Ii(e,t=ya(t,e)))||delete e[Ui(Ki(t))]}function pa(e,t,r,n){return Qn(e,t,r(En(e,t)),n)}function _a(e,t,r,n){for(var a=e.length,i=n?a:-1;(n?i--:++i<a)&&t(e[i],i,e););return r?na(e,n?0:i,n?i+1:a):na(e,n?i+1:0,n?a:i)}function fa(e,t){var r=e;return r instanceof Gr&&(r=r.value()),Ut(t,(function(e,t){return t.func.apply(t.thisArg,Dt([e],t.args))}),r)}function ha(e,t,r){var n=e.length;if(n<2)return n?ua(e[0]):[];for(var a=-1,i=oe(n);++a<n;)for(var o=e[a],s=-1;++s<n;)s!=a&&(i[a]=dn(i[a]||o,e[s],t,r));return ua(mn(i,1),t,r)}function ga(t,r,n){for(var a=-1,i=t.length,o=r.length,s={};++a<i;){var c=a<o?r[a]:e;n(s,t[a],c)}return s}function ma(e){return Yo(e)?e:[]}function va(e){return"function"==typeof e?e:nc}function ya(e,t){return Ho(e)?e:wi(e,t)?[e]:Di(vs(e))}var wa=Jn;function ba(t,r,n){var a=t.length;return n=n===e?a:n,!r&&n>=a?t:na(t,r,n)}var Sa=lt||function(e){return ft.clearTimeout(e)};function Ea(e,t){if(t)return e.slice();var r=e.length,n=Ve?Ve(r):new e.constructor(r);return e.copy(n),n}function Aa(e){var t=new e.constructor(e.byteLength);return new $e(t).set(new $e(e)),t}function ka(e,t){var r=t?Aa(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Pa(t,r){if(t!==r){var n=t!==e,a=null===t,i=t==t,o=cs(t),s=r!==e,c=null===r,l=r==r,u=cs(r);if(!c&&!u&&!o&&t>r||o&&s&&l&&!c&&!u||a&&s&&l||!n&&l||!i)return 1;if(!a&&!o&&!u&&t<r||u&&n&&i&&!a&&!o||c&&n&&i||!s&&i||!l)return-1}return 0}function Ia(e,t,r,n){for(var a=-1,i=e.length,o=r.length,s=-1,c=t.length,l=mr(i-o,0),u=oe(c+l),d=!n;++s<c;)u[s]=t[s];for(;++a<o;)(d||a<i)&&(u[r[a]]=e[a]);for(;l--;)u[s++]=e[a++];return u}function Ca(e,t,r,n){for(var a=-1,i=e.length,o=-1,s=r.length,c=-1,l=t.length,u=mr(i-s,0),d=oe(u+l),p=!n;++a<u;)d[a]=e[a];for(var _=a;++c<l;)d[_+c]=t[c];for(;++o<s;)(p||a<i)&&(d[_+r[o]]=e[a++]);return d}function Ta(e,t){var r=-1,n=e.length;for(t||(t=oe(n));++r<n;)t[r]=e[r];return t}function xa(t,r,n,a){var i=!n;n||(n={});for(var o=-1,s=r.length;++o<s;){var c=r[o],l=a?a(n[c],t[c],c,n,t):e;l===e&&(l=t[c]),i?an(n,c,l):en(n,c,l)}return n}function Ra(e,t){return function(r,n){var a=Ho(r)?It:rn,i=t?t():{};return a(r,e,ci(n,2),i)}}function Na(t){return Jn((function(r,n){var a=-1,i=n.length,o=i>1?n[i-1]:e,s=i>2?n[2]:e;for(o=t.length>3&&"function"==typeof o?(i--,o):e,s&&yi(n[0],n[1],s)&&(o=i<3?e:o,i=1),r=Ie(r);++a<i;){var c=n[a];c&&t(r,c,a,o)}return r}))}function La(e,t){return function(r,n){if(null==r)return r;if(!Vo(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Ie(r);(t?i--:++i<a)&&!1!==n(o[i],i,o););return r}}function Oa(e){return function(t,r,n){for(var a=-1,i=Ie(t),o=n(t),s=o.length;s--;){var c=o[e?s:++a];if(!1===r(i[c],c,i))break}return t}}function Da(t){return function(r){var n=or(r=vs(r))?pr(r):e,a=n?n[0]:r.charAt(0),i=n?ba(n,1).join(""):r.slice(1);return a[t]()+i}}function Ua(e){return function(t){return Ut(Xs(Gs(t).replace(Qe,"")),e,"")}}function ja(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Br(e.prototype),n=e.apply(r,t);return es(n)?n:r}}function Fa(t){return function(r,n,a){var i=Ie(r);if(!Vo(r)){var o=ci(n,3);r=Rs(r),n=function(e){return o(i[e],e,i)}}var s=t(r,n,a);return s>-1?i[o?r[s]:s]:e}}function Ma(r){return ri((function(n){var a=n.length,i=a,o=zr.prototype.thru;for(r&&n.reverse();i--;){var s=n[i];if("function"!=typeof s)throw new xe(t);if(o&&!c&&"wrapper"==oi(s))var c=new zr([],!0)}for(i=c?i:a;++i<a;){var l=oi(s=n[i]),u="wrapper"==l?ii(s):e;c=u&&bi(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?c[oi(u[0])].apply(c,u[3]):1==s.length&&bi(s)?c[l]():c.thru(s)}return function(){var e=arguments,t=e[0];if(c&&1==e.length&&Ho(t))return c.plant(t).value();for(var r=0,i=a?n[r].apply(this,e):t;++r<a;)i=n[r].call(this,i);return i}}))}function Ba(t,r,n,a,i,o,c,l,u,d){var p=r&s,_=1&r,f=2&r,h=24&r,g=512&r,m=f?e:ja(t);return function s(){for(var v=arguments.length,y=oe(v),w=v;w--;)y[w]=arguments[w];if(h)var b=si(s),S=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(y,b);if(a&&(y=Ia(y,a,i,h)),o&&(y=Ca(y,o,c,h)),v-=S,h&&v<d){var E=lr(y,b);return Ya(t,r,Ba,s.placeholder,n,y,E,l,u,d-v)}var A=_?n:this,k=f?A[t]:t;return v=y.length,l?y=function(t,r){for(var n=t.length,a=vr(r.length,n),i=Ta(t);a--;){var o=r[a];t[a]=vi(o,n)?i[o]:e}return t}(y,l):g&&v>1&&y.reverse(),p&&u<v&&(y.length=u),this&&this!==ft&&this instanceof s&&(k=m||ja(k)),k.apply(A,y)}}function Wa(e,t){return function(r,n){return function(e,t,r,n){return wn(e,(function(e,a,i){t(n,r(e),a,i)})),n}(r,e,t(n),{})}}function za(t,r){return function(n,a){var i;if(n===e&&a===e)return r;if(n!==e&&(i=n),a!==e){if(i===e)return a;"string"==typeof n||"string"==typeof a?(n=la(n),a=la(a)):(n=ca(n),a=ca(a)),i=t(n,a)}return i}}function Ga(e){return ri((function(t){return t=Ot(t,Zt(ci())),Jn((function(r){var n=this;return e(t,(function(e){return Pt(e,n,r)}))}))}))}function Ha(t,r){var n=(r=r===e?" ":la(r)).length;if(n<2)return n?Kn(r,t):r;var a=Kn(r,ht(t/dr(r)));return or(r)?ba(pr(a),0,t).join(""):a.slice(0,t)}function $a(t){return function(r,n,a){return a&&"number"!=typeof a&&yi(r,n,a)&&(n=a=e),r=_s(r),n===e?(n=r,r=0):n=_s(n),function(e,t,r,n){for(var a=-1,i=mr(ht((t-e)/(r||1)),0),o=oe(i);i--;)o[n?i:++a]=e,e+=r;return o}(r,n,a=a===e?r<n?1:-1:_s(a),t)}}function Va(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=gs(t),r=gs(r)),e(t,r)}}function Ya(t,r,n,a,s,c,l,u,d,p){var _=8&r;r|=_?i:o,4&(r&=~(_?o:i))||(r&=-4);var f=[t,r,s,_?c:e,_?l:e,_?e:c,_?e:l,u,d,p],h=n.apply(e,f);return bi(t)&&Ti(h,f),h.placeholder=a,Ni(h,t,r)}function qa(e){var t=Pe[e];return function(e,r){if(e=gs(e),(r=null==r?0:vr(fs(r),292))&&Mt(e)){var n=(vs(e)+"e").split("e");return+((n=(vs(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var Ka=Pr&&1/ur(new Pr([,-0]))[1]==l?function(e){return new Pr(e)}:cc;function Ja(e){return function(t){var r=fi(t);return r==A?sr(t):r==T?function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}(t):function(e,t){return Ot(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Xa(r,l,u,d,p,_,f,h){var g=2&l;if(!g&&"function"!=typeof r)throw new xe(t);var m=d?d.length:0;if(m||(l&=-97,d=p=e),f=f===e?f:mr(fs(f),0),h=h===e?h:fs(h),m-=p?p.length:0,l&o){var v=d,y=p;d=p=e}var w=g?e:ii(r),b=[r,l,u,d,p,v,y,_,f,h];if(w&&function(e,t){var r=e[1],a=t[1],i=r|a,o=i<131,l=a==s&&8==r||a==s&&r==c&&e[7].length<=t[8]||384==a&&t[7].length<=t[8]&&8==r;if(!o&&!l)return e;1&a&&(e[2]=t[2],i|=1&r?0:4);var u=t[3];if(u){var d=e[3];e[3]=d?Ia(d,u,t[4]):u,e[4]=d?lr(e[3],n):t[4]}(u=t[5])&&(d=e[5],e[5]=d?Ca(d,u,t[6]):u,e[6]=d?lr(e[5],n):t[6]),(u=t[7])&&(e[7]=u),a&s&&(e[8]=null==e[8]?t[8]:vr(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(b,w),r=b[0],l=b[1],u=b[2],d=b[3],p=b[4],!(h=b[9]=b[9]===e?g?0:r.length:mr(b[9]-m,0))&&24&l&&(l&=-25),l&&1!=l)S=8==l||l==a?function(t,r,n){var a=ja(t);return function i(){for(var o=arguments.length,s=oe(o),c=o,l=si(i);c--;)s[c]=arguments[c];var u=o<3&&s[0]!==l&&s[o-1]!==l?[]:lr(s,l);return(o-=u.length)<n?Ya(t,r,Ba,i.placeholder,e,s,u,e,e,n-o):Pt(this&&this!==ft&&this instanceof i?a:t,this,s)}}(r,l,h):l!=i&&33!=l||p.length?Ba.apply(e,b):function(e,t,r,n){var a=1&t,i=ja(e);return function t(){for(var o=-1,s=arguments.length,c=-1,l=n.length,u=oe(l+s),d=this&&this!==ft&&this instanceof t?i:e;++c<l;)u[c]=n[c];for(;s--;)u[c++]=arguments[++o];return Pt(d,a?r:this,u)}}(r,l,u,d);else var S=function(e,t,r){var n=1&t,a=ja(e);return function t(){return(this&&this!==ft&&this instanceof t?a:e).apply(n?r:this,arguments)}}(r,l,u);return Ni((w?ea:Ti)(S,b),r,l)}function Za(t,r,n,a){return t===e||Bo(t,Le[n])&&!Ue.call(a,n)?r:t}function Qa(t,r,n,a,i,o){return es(t)&&es(r)&&(o.set(r,t),zn(t,r,e,Qa,o),o.delete(r)),t}function ei(t){return as(t)?e:t}function ti(t,r,n,a,i,o){var s=1&n,c=t.length,l=r.length;if(c!=l&&!(s&&l>c))return!1;var u=o.get(t),d=o.get(r);if(u&&d)return u==r&&d==t;var p=-1,_=!0,f=2&n?new Yr:e;for(o.set(t,r),o.set(r,t);++p<c;){var h=t[p],g=r[p];if(a)var m=s?a(g,h,p,r,t,o):a(h,g,p,t,r,o);if(m!==e){if(m)continue;_=!1;break}if(f){if(!Ft(r,(function(e,t){if(!er(f,t)&&(h===e||i(h,e,n,a,o)))return f.push(t)}))){_=!1;break}}else if(h!==g&&!i(h,g,n,a,o)){_=!1;break}}return o.delete(t),o.delete(r),_}function ri(t){return Ri(Pi(t,e,Hi),t+"")}function ni(e){return An(e,Rs,pi)}function ai(e){return An(e,Ns,_i)}var ii=Tr?function(e){return Tr.get(e)}:cc;function oi(e){for(var t=e.name+"",r=xr[t],n=Ue.call(xr,t)?r.length:0;n--;){var a=r[n],i=a.func;if(null==i||i==e)return a.name}return t}function si(e){return(Ue.call(Mr,"placeholder")?Mr:e).placeholder}function ci(){var e=Mr.iteratee||ac;return e=e===ac?Dn:e,arguments.length?e(arguments[0],arguments[1]):e}function li(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function ui(e){for(var t=Rs(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,Ai(a)]}return t}function di(t,r){var n=function(t,r){return null==t?e:t[r]}(t,r);return On(n)?n:e}var pi=vt?function(e){return null==e?[]:(e=Ie(e),Rt(vt(e),(function(t){return Ke.call(e,t)})))}:hc,_i=vt?function(e){for(var t=[];e;)Dt(t,pi(e)),e=Ye(e);return t}:hc,fi=kn;function hi(e,t,r){for(var n=-1,a=(t=ya(t,e)).length,i=!1;++n<a;){var o=Ui(t[n]);if(!(i=null!=e&&r(e,o)))break;e=e[o]}return i||++n!=a?i:!!(a=null==e?0:e.length)&&Qo(a)&&vi(o,a)&&(Ho(e)||Go(e))}function gi(e){return"function"!=typeof e.constructor||Ei(e)?{}:Br(Ye(e))}function mi(e){return Ho(e)||Go(e)||!!(Xe&&e&&e[Xe])}function vi(e,t){var r=typeof e;return!!(t=t??u)&&("number"==r||"symbol"!=r&&ye.test(e))&&e>-1&&e%1==0&&e<t}function yi(e,t,r){if(!es(r))return!1;var n=typeof t;return!!("number"==n?Vo(r)&&vi(t,r.length):"string"==n&&t in r)&&Bo(r[t],e)}function wi(e,t){if(Ho(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!cs(e))||te.test(e)||!ee.test(e)||null!=t&&e in Ie(t)}function bi(e){var t=oi(e),r=Mr[t];if("function"!=typeof r||!(t in Gr.prototype))return!1;if(e===r)return!0;var n=ii(r);return!!n&&e===n[0]}(Er&&fi(new Er(new ArrayBuffer(1)))!=O||Ar&&fi(new Ar)!=A||kr&&fi(kr.resolve())!=I||Pr&&fi(new Pr)!=T||Ir&&fi(new Ir)!=N)&&(fi=function(t){var r=kn(t),n=r==P?t.constructor:e,a=n?ji(n):"";if(a)switch(a){case Rr:return O;case Nr:return A;case Lr:return I;case Or:return T;case Dr:return N}return r});var Si=Oe?Xo:gc;function Ei(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Le)}function Ai(e){return e==e&&!es(e)}function ki(t,r){return function(n){return null!=n&&n[t]===r&&(r!==e||t in Ie(n))}}function Pi(t,r,n){return r=mr(r===e?t.length-1:r,0),function(){for(var e=arguments,a=-1,i=mr(e.length-r,0),o=oe(i);++a<i;)o[a]=e[r+a];a=-1;for(var s=oe(r+1);++a<r;)s[a]=e[a];return s[r]=n(o),Pt(t,this,s)}}function Ii(e,t){return t.length<2?e:En(e,na(t,0,-1))}function Ci(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ti=Li(ea),xi=_t||function(e,t){return ft.setTimeout(e,t)},Ri=Li(ta);function Ni(e,t,r){var n=t+"";return Ri(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(se,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return Ct(_,(function(r){var n="_."+r[0];t&r[1]&&!Nt(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(le):[]}(n),r)))}function Li(t){var r=0,n=0;return function(){var a=yr(),i=16-(a-n);if(n=a,i>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(e,arguments)}}function Oi(t,r){var n=-1,a=t.length,i=a-1;for(r=r===e?a:r;++n<r;){var o=qn(n,i),s=t[o];t[o]=t[n],t[n]=s}return t.length=r,t}var Di=function(e){var t=Oo(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,r,n,a){t.push(n?a.replace(pe,"$1"):r||e)})),t}));function Ui(e){if("string"==typeof e||cs(e))return e;var t=e+"";return"0"==t&&1/e==-l?"-0":t}function ji(e){if(null!=e){try{return De.call(e)}catch{}try{return e+""}catch{}}return""}function Fi(e){if(e instanceof Gr)return e.clone();var t=new zr(e.__wrapped__,e.__chain__);return t.__actions__=Ta(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Mi=Jn((function(e,t){return Yo(e)?dn(e,mn(t,1,Yo,!0)):[]})),Bi=Jn((function(t,r){var n=Ki(r);return Yo(n)&&(n=e),Yo(t)?dn(t,mn(r,1,Yo,!0),ci(n,2)):[]})),Wi=Jn((function(t,r){var n=Ki(r);return Yo(n)&&(n=e),Yo(t)?dn(t,mn(r,1,Yo,!0),e,n):[]}));function zi(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=null==r?0:fs(r);return a<0&&(a=mr(n+a,0)),Wt(e,ci(t,3),a)}function Gi(t,r,n){var a=null==t?0:t.length;if(!a)return-1;var i=a-1;return n!==e&&(i=fs(n),i=n<0?mr(a+i,0):vr(i,a-1)),Wt(t,ci(r,3),i,!0)}function Hi(e){return null!=e&&e.length?mn(e,1):[]}function $i(t){return t&&t.length?t[0]:e}var Vi=Jn((function(e){var t=Ot(e,ma);return t.length&&t[0]===e[0]?Tn(t):[]})),Yi=Jn((function(t){var r=Ki(t),n=Ot(t,ma);return r===Ki(n)?r=e:n.pop(),n.length&&n[0]===t[0]?Tn(n,ci(r,2)):[]})),qi=Jn((function(t){var r=Ki(t),n=Ot(t,ma);return(r="function"==typeof r?r:e)&&n.pop(),n.length&&n[0]===t[0]?Tn(n,e,r):[]}));function Ki(t){var r=null==t?0:t.length;return r?t[r-1]:e}var Ji=Jn(Xi);function Xi(e,t){return e&&e.length&&t&&t.length?Vn(e,t):e}var Zi=ri((function(e,t){var r=null==e?0:e.length,n=on(e,t);return Yn(e,Ot(t,(function(e){return vi(e,r)?+e:e})).sort(Pa)),n}));function Qi(e){return null==e?e:Sr.call(e)}var eo=Jn((function(e){return ua(mn(e,1,Yo,!0))})),to=Jn((function(t){var r=Ki(t);return Yo(r)&&(r=e),ua(mn(t,1,Yo,!0),ci(r,2))})),ro=Jn((function(t){var r=Ki(t);return r="function"==typeof r?r:e,ua(mn(t,1,Yo,!0),e,r)}));function no(e){if(!e||!e.length)return[];var t=0;return e=Rt(e,(function(e){if(Yo(e))return t=mr(e.length,t),!0})),Jt(t,(function(t){return Ot(e,Vt(t))}))}function ao(t,r){if(!t||!t.length)return[];var n=no(t);return null==r?n:Ot(n,(function(t){return Pt(r,e,t)}))}var io=Jn((function(e,t){return Yo(e)?dn(e,t):[]})),oo=Jn((function(e){return ha(Rt(e,Yo))})),so=Jn((function(t){var r=Ki(t);return Yo(r)&&(r=e),ha(Rt(t,Yo),ci(r,2))})),co=Jn((function(t){var r=Ki(t);return r="function"==typeof r?r:e,ha(Rt(t,Yo),e,r)})),lo=Jn(no),uo=Jn((function(t){var r=t.length,n=r>1?t[r-1]:e;return n="function"==typeof n?(t.pop(),n):e,ao(t,n)}));function po(e){var t=Mr(e);return t.__chain__=!0,t}function _o(e,t){return t(e)}var fo=ri((function(t){var r=t.length,n=r?t[0]:0,a=this.__wrapped__,i=function(e){return on(e,t)};return!(r>1||this.__actions__.length)&&a instanceof Gr&&vi(n)?((a=a.slice(n,+n+(r?1:0))).__actions__.push({func:_o,args:[i],thisArg:e}),new zr(a,this.__chain__).thru((function(t){return r&&!t.length&&t.push(e),t}))):this.thru(i)})),ho=Ra((function(e,t,r){Ue.call(e,r)?++e[r]:an(e,r,1)})),go=Fa(zi),mo=Fa(Gi);function vo(e,t){return(Ho(e)?Ct:pn)(e,ci(t,3))}function yo(e,t){return(Ho(e)?Tt:_n)(e,ci(t,3))}var wo=Ra((function(e,t,r){Ue.call(e,r)?e[r].push(t):an(e,r,[t])})),bo=Jn((function(e,t,r){var n=-1,a="function"==typeof t,i=Vo(e)?oe(e.length):[];return pn(e,(function(e){i[++n]=a?Pt(t,e,r):xn(e,t,r)})),i})),So=Ra((function(e,t,r){an(e,r,t)}));function Eo(e,t){return(Ho(e)?Ot:Mn)(e,ci(t,3))}var Ao=Ra((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]})),ko=Jn((function(e,t){if(null==e)return[];var r=t.length;return r>1&&yi(e,t[0],t[1])?t=[]:r>2&&yi(t[0],t[1],t[2])&&(t=[t[0]]),Hn(e,mn(t,1),[])})),Po=pt||function(){return ft.Date.now()};function Io(t,r,n){return r=n?e:r,r=t&&null==r?t.length:r,Xa(t,s,e,e,e,e,r)}function Co(r,n){var a;if("function"!=typeof n)throw new xe(t);return r=fs(r),function(){return--r>0&&(a=n.apply(this,arguments)),r<=1&&(n=e),a}}var To=Jn((function(e,t,r){var n=1;if(r.length){var a=lr(r,si(To));n|=i}return Xa(e,n,t,r,a)})),xo=Jn((function(e,t,r){var n=3;if(r.length){var a=lr(r,si(xo));n|=i}return Xa(t,n,e,r,a)}));function Ro(r,n,a){var i,o,s,c,l,u,d=0,p=!1,_=!1,f=!0;if("function"!=typeof r)throw new xe(t);function h(t){var n=i,a=o;return i=o=e,d=t,c=r.apply(a,n)}function g(t){var r=t-u;return u===e||r>=n||r<0||_&&t-d>=s}function m(){var e=Po();if(g(e))return v(e);l=xi(m,function(e){var t=n-(e-u);return _?vr(t,s-(e-d)):t}(e))}function v(t){return l=e,f&&i?h(t):(i=o=e,c)}function y(){var t=Po(),r=g(t);if(i=arguments,o=this,u=t,r){if(l===e)return function(e){return d=e,l=xi(m,n),p?h(e):c}(u);if(_)return Sa(l),l=xi(m,n),h(u)}return l===e&&(l=xi(m,n)),c}return n=gs(n)||0,es(a)&&(p=!!a.leading,s=(_="maxWait"in a)?mr(gs(a.maxWait)||0,n):s,f="trailing"in a?!!a.trailing:f),y.cancel=function(){l!==e&&Sa(l),d=0,i=u=o=l=e},y.flush=function(){return l===e?c:v(Po())},y}var No=Jn((function(e,t){return un(e,1,t)})),Lo=Jn((function(e,t,r){return un(e,gs(t)||0,r)}));function Oo(e,r){if("function"!=typeof e||null!=r&&"function"!=typeof r)throw new xe(t);var n=function(){var t=arguments,a=r?r.apply(this,t):t[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,t);return n.cache=i.set(a,o)||i,o};return n.cache=new(Oo.Cache||Vr),n}function Do(e){if("function"!=typeof e)throw new xe(t);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Oo.Cache=Vr;var Uo=wa((function(e,t){var r=(t=1==t.length&&Ho(t[0])?Ot(t[0],Zt(ci())):Ot(mn(t,1),Zt(ci()))).length;return Jn((function(n){for(var a=-1,i=vr(n.length,r);++a<i;)n[a]=t[a].call(this,n[a]);return Pt(e,this,n)}))})),jo=Jn((function(t,r){var n=lr(r,si(jo));return Xa(t,i,e,r,n)})),Fo=Jn((function(t,r){var n=lr(r,si(Fo));return Xa(t,o,e,r,n)})),Mo=ri((function(t,r){return Xa(t,c,e,e,e,r)}));function Bo(e,t){return e===t||e!=e&&t!=t}var Wo=Va(Pn),zo=Va((function(e,t){return e>=t})),Go=Rn(function(){return arguments}())?Rn:function(e){return ts(e)&&Ue.call(e,"callee")&&!Ke.call(e,"callee")},Ho=oe.isArray,$o=wt?Zt(wt):function(e){return ts(e)&&kn(e)==L};function Vo(e){return null!=e&&Qo(e.length)&&!Xo(e)}function Yo(e){return ts(e)&&Vo(e)}var qo=yt||gc,Ko=bt?Zt(bt):function(e){return ts(e)&&kn(e)==w};function Jo(e){if(!ts(e))return!1;var t=kn(e);return t==b||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!as(e)}function Xo(e){if(!es(e))return!1;var t=kn(e);return t==S||t==E||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Zo(e){return"number"==typeof e&&e==fs(e)}function Qo(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=u}function es(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ts(e){return null!=e&&"object"==typeof e}var rs=St?Zt(St):function(e){return ts(e)&&fi(e)==A};function ns(e){return"number"==typeof e||ts(e)&&kn(e)==k}function as(e){if(!ts(e)||kn(e)!=P)return!1;var t=Ye(e);if(null===t)return!0;var r=Ue.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&De.call(r)==Be}var is=Et?Zt(Et):function(e){return ts(e)&&kn(e)==C},os=At?Zt(At):function(e){return ts(e)&&fi(e)==T};function ss(e){return"string"==typeof e||!Ho(e)&&ts(e)&&kn(e)==x}function cs(e){return"symbol"==typeof e||ts(e)&&kn(e)==R}var ls=kt?Zt(kt):function(e){return ts(e)&&Qo(e.length)&&!!st[kn(e)]},us=Va(Fn),ds=Va((function(e,t){return e<=t}));function ps(e){if(!e)return[];if(Vo(e))return ss(e)?pr(e):Ta(e);if(Ze&&e[Ze])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[Ze]());var t=fi(e);return(t==A?sr:t==T?ur:Bs)(e)}function _s(e){return e?(e=gs(e))===l||e===-l?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function fs(e){var t=_s(e),r=t%1;return t==t?r?t-r:t:0}function hs(e){return e?sn(fs(e),0,p):0}function gs(e){if("number"==typeof e)return e;if(cs(e))return d;if(es(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=es(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Xt(e);var r=ge.test(e);return r||ve.test(e)?dt(e.slice(2),r?2:8):he.test(e)?d:+e}function ms(e){return xa(e,Ns(e))}function vs(e){return null==e?"":la(e)}var ys=Na((function(e,t){if(Ei(t)||Vo(t))xa(t,Rs(t),e);else for(var r in t)Ue.call(t,r)&&en(e,r,t[r])})),ws=Na((function(e,t){xa(t,Ns(t),e)})),bs=Na((function(e,t,r,n){xa(t,Ns(t),e,n)})),Ss=Na((function(e,t,r,n){xa(t,Rs(t),e,n)})),Es=ri(on),As=Jn((function(t,r){t=Ie(t);var n=-1,a=r.length,i=a>2?r[2]:e;for(i&&yi(r[0],r[1],i)&&(a=1);++n<a;)for(var o=r[n],s=Ns(o),c=-1,l=s.length;++c<l;){var u=s[c],d=t[u];(d===e||Bo(d,Le[u])&&!Ue.call(t,u))&&(t[u]=o[u])}return t})),ks=Jn((function(t){return t.push(e,Qa),Pt(Os,e,t)}));function Ps(t,r,n){var a=null==t?e:En(t,r);return a===e?n:a}function Is(e,t){return null!=e&&hi(e,t,Cn)}var Cs=Wa((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Me.call(t)),e[t]=r}),ec(nc)),Ts=Wa((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Me.call(t)),Ue.call(e,t)?e[t].push(r):e[t]=[r]}),ci),xs=Jn(xn);function Rs(e){return Vo(e)?Kr(e):Un(e)}function Ns(e){return Vo(e)?Kr(e,!0):jn(e)}var Ls=Na((function(e,t,r){zn(e,t,r)})),Os=Na((function(e,t,r,n){zn(e,t,r,n)})),Ds=ri((function(e,t){var r={};if(null==e)return r;var n=!1;t=Ot(t,(function(t){return t=ya(t,e),n||(n=t.length>1),t})),xa(e,ai(e),r),n&&(r=cn(r,7,ei));for(var a=t.length;a--;)da(r,t[a]);return r})),Us=ri((function(e,t){return null==e?{}:function(e,t){return $n(e,t,(function(t,r){return Is(e,r)}))}(e,t)}));function js(e,t){if(null==e)return{};var r=Ot(ai(e),(function(e){return[e]}));return t=ci(t),$n(e,r,(function(e,r){return t(e,r[0])}))}var Fs=Ja(Rs),Ms=Ja(Ns);function Bs(e){return null==e?[]:Qt(e,Rs(e))}var Ws=Ua((function(e,t,r){return t=t.toLowerCase(),e+(r?zs(t):t)}));function zs(e){return Js(vs(e).toLowerCase())}function Gs(e){return(e=vs(e))&&e.replace(we,nr).replace(et,"")}var Hs=Ua((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),$s=Ua((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Vs=Da("toLowerCase"),Ys=Ua((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()})),qs=Ua((function(e,t,r){return e+(r?" ":"")+Js(t)})),Ks=Ua((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),Js=Da("toUpperCase");function Xs(t,r,n){return t=vs(t),(r=n?e:r)===e?function(e){return at.test(e)}(t)?function(e){return e.match(rt)||[]}(t):function(e){return e.match(ue)||[]}(t):t.match(r)||[]}var Zs=Jn((function(t,r){try{return Pt(t,e,r)}catch(n){return Jo(n)?n:new Ae(n)}})),Qs=ri((function(e,t){return Ct(t,(function(t){t=Ui(t),an(e,t,To(e[t],e))})),e}));function ec(e){return function(){return e}}var tc=Ma(),rc=Ma(!0);function nc(e){return e}function ac(e){return Dn("function"==typeof e?e:cn(e,1))}var ic=Jn((function(e,t){return function(r){return xn(r,e,t)}})),oc=Jn((function(e,t){return function(r){return xn(e,r,t)}}));function sc(e,t,r){var n=Rs(t),a=Sn(t,n);null==r&&(!es(t)||!a.length&&n.length)&&(r=t,t=e,e=this,a=Sn(t,Rs(t)));var i=!(es(r)&&"chain"in r&&!r.chain),o=Xo(e);return Ct(a,(function(r){var n=t[r];e[r]=n,o&&(e.prototype[r]=function(){var t=this.__chain__;if(i||t){var r=e(this.__wrapped__);return(r.__actions__=Ta(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Dt([this.value()],arguments))})})),e}function cc(){}var lc=Ga(Ot),uc=Ga(xt),dc=Ga(Ft);function pc(e){return wi(e)?Vt(Ui(e)):function(e){return function(t){return En(t,e)}}(e)}var _c=$a(),fc=$a(!0);function hc(){return[]}function gc(){return!1}var mc=za((function(e,t){return e+t}),0),vc=qa("ceil"),yc=za((function(e,t){return e/t}),1),wc=qa("floor"),bc=za((function(e,t){return e*t}),1),Sc=qa("round"),Ec=za((function(e,t){return e-t}),0);return Mr.after=function(e,r){if("function"!=typeof r)throw new xe(t);return e=fs(e),function(){if(--e<1)return r.apply(this,arguments)}},Mr.ary=Io,Mr.assign=ys,Mr.assignIn=ws,Mr.assignInWith=bs,Mr.assignWith=Ss,Mr.at=Es,Mr.before=Co,Mr.bind=To,Mr.bindAll=Qs,Mr.bindKey=xo,Mr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ho(e)?e:[e]},Mr.chain=po,Mr.chunk=function(t,r,n){r=(n?yi(t,r,n):r===e)?1:mr(fs(r),0);var a=null==t?0:t.length;if(!a||r<1)return[];for(var i=0,o=0,s=oe(ht(a/r));i<a;)s[o++]=na(t,i,i+=r);return s},Mr.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,a=[];++t<r;){var i=e[t];i&&(a[n++]=i)}return a},Mr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=oe(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return Dt(Ho(r)?Ta(r):[r],mn(t,1))},Mr.cond=function(e){var r=null==e?0:e.length,n=ci();return e=r?Ot(e,(function(e){if("function"!=typeof e[1])throw new xe(t);return[n(e[0]),e[1]]})):[],Jn((function(t){for(var n=-1;++n<r;){var a=e[n];if(Pt(a[0],this,t))return Pt(a[1],this,t)}}))},Mr.conforms=function(e){return function(e){var t=Rs(e);return function(r){return ln(r,e,t)}}(cn(e,1))},Mr.constant=ec,Mr.countBy=ho,Mr.create=function(e,t){var r=Br(e);return null==t?r:nn(r,t)},Mr.curry=function t(r,n,a){var i=Xa(r,8,e,e,e,e,e,n=a?e:n);return i.placeholder=t.placeholder,i},Mr.curryRight=function t(r,n,i){var o=Xa(r,a,e,e,e,e,e,n=i?e:n);return o.placeholder=t.placeholder,o},Mr.debounce=Ro,Mr.defaults=As,Mr.defaultsDeep=ks,Mr.defer=No,Mr.delay=Lo,Mr.difference=Mi,Mr.differenceBy=Bi,Mr.differenceWith=Wi,Mr.drop=function(t,r,n){var a=null==t?0:t.length;return a?na(t,(r=n||r===e?1:fs(r))<0?0:r,a):[]},Mr.dropRight=function(t,r,n){var a=null==t?0:t.length;return a?na(t,0,(r=a-(r=n||r===e?1:fs(r)))<0?0:r):[]},Mr.dropRightWhile=function(e,t){return e&&e.length?_a(e,ci(t,3),!0,!0):[]},Mr.dropWhile=function(e,t){return e&&e.length?_a(e,ci(t,3),!0):[]},Mr.fill=function(t,r,n,a){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&yi(t,r,n)&&(n=0,a=i),function(t,r,n,a){var i=t.length;for((n=fs(n))<0&&(n=-n>i?0:i+n),(a=a===e||a>i?i:fs(a))<0&&(a+=i),a=n>a?0:hs(a);n<a;)t[n++]=r;return t}(t,r,n,a)):[]},Mr.filter=function(e,t){return(Ho(e)?Rt:gn)(e,ci(t,3))},Mr.flatMap=function(e,t){return mn(Eo(e,t),1)},Mr.flatMapDeep=function(e,t){return mn(Eo(e,t),l)},Mr.flatMapDepth=function(t,r,n){return n=n===e?1:fs(n),mn(Eo(t,r),n)},Mr.flatten=Hi,Mr.flattenDeep=function(e){return null!=e&&e.length?mn(e,l):[]},Mr.flattenDepth=function(t,r){return null!=t&&t.length?mn(t,r=r===e?1:fs(r)):[]},Mr.flip=function(e){return Xa(e,512)},Mr.flow=tc,Mr.flowRight=rc,Mr.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var a=e[t];n[a[0]]=a[1]}return n},Mr.functions=function(e){return null==e?[]:Sn(e,Rs(e))},Mr.functionsIn=function(e){return null==e?[]:Sn(e,Ns(e))},Mr.groupBy=wo,Mr.initial=function(e){return null!=e&&e.length?na(e,0,-1):[]},Mr.intersection=Vi,Mr.intersectionBy=Yi,Mr.intersectionWith=qi,Mr.invert=Cs,Mr.invertBy=Ts,Mr.invokeMap=bo,Mr.iteratee=ac,Mr.keyBy=So,Mr.keys=Rs,Mr.keysIn=Ns,Mr.map=Eo,Mr.mapKeys=function(e,t){var r={};return t=ci(t,3),wn(e,(function(e,n,a){an(r,t(e,n,a),e)})),r},Mr.mapValues=function(e,t){var r={};return t=ci(t,3),wn(e,(function(e,n,a){an(r,n,t(e,n,a))})),r},Mr.matches=function(e){return Bn(cn(e,1))},Mr.matchesProperty=function(e,t){return Wn(e,cn(t,1))},Mr.memoize=Oo,Mr.merge=Ls,Mr.mergeWith=Os,Mr.method=ic,Mr.methodOf=oc,Mr.mixin=sc,Mr.negate=Do,Mr.nthArg=function(e){return e=fs(e),Jn((function(t){return Gn(t,e)}))},Mr.omit=Ds,Mr.omitBy=function(e,t){return js(e,Do(ci(t)))},Mr.once=function(e){return Co(2,e)},Mr.orderBy=function(t,r,n,a){return null==t?[]:(Ho(r)||(r=null==r?[]:[r]),Ho(n=a?e:n)||(n=null==n?[]:[n]),Hn(t,r,n))},Mr.over=lc,Mr.overArgs=Uo,Mr.overEvery=uc,Mr.overSome=dc,Mr.partial=jo,Mr.partialRight=Fo,Mr.partition=Ao,Mr.pick=Us,Mr.pickBy=js,Mr.property=pc,Mr.propertyOf=function(t){return function(r){return null==t?e:En(t,r)}},Mr.pull=Ji,Mr.pullAll=Xi,Mr.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?Vn(e,t,ci(r,2)):e},Mr.pullAllWith=function(t,r,n){return t&&t.length&&r&&r.length?Vn(t,r,e,n):t},Mr.pullAt=Zi,Mr.range=_c,Mr.rangeRight=fc,Mr.rearg=Mo,Mr.reject=function(e,t){return(Ho(e)?Rt:gn)(e,Do(ci(t,3)))},Mr.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,a=[],i=e.length;for(t=ci(t,3);++n<i;){var o=e[n];t(o,n,e)&&(r.push(o),a.push(n))}return Yn(e,a),r},Mr.rest=function(r,n){if("function"!=typeof r)throw new xe(t);return Jn(r,n=n===e?n:fs(n))},Mr.reverse=Qi,Mr.sampleSize=function(t,r,n){return r=(n?yi(t,r,n):r===e)?1:fs(r),(Ho(t)?Xr:Zn)(t,r)},Mr.set=function(e,t,r){return null==e?e:Qn(e,t,r)},Mr.setWith=function(t,r,n,a){return a="function"==typeof a?a:e,null==t?t:Qn(t,r,n,a)},Mr.shuffle=function(e){return(Ho(e)?Zr:ra)(e)},Mr.slice=function(t,r,n){var a=null==t?0:t.length;return a?(n&&"number"!=typeof n&&yi(t,r,n)?(r=0,n=a):(r=null==r?0:fs(r),n=n===e?a:fs(n)),na(t,r,n)):[]},Mr.sortBy=ko,Mr.sortedUniq=function(e){return e&&e.length?sa(e):[]},Mr.sortedUniqBy=function(e,t){return e&&e.length?sa(e,ci(t,2)):[]},Mr.split=function(t,r,n){return n&&"number"!=typeof n&&yi(t,r,n)&&(r=n=e),(n=n===e?p:n>>>0)?(t=vs(t))&&("string"==typeof r||null!=r&&!is(r))&&!(r=la(r))&&or(t)?ba(pr(t),0,n):t.split(r,n):[]},Mr.spread=function(e,r){if("function"!=typeof e)throw new xe(t);return r=null==r?0:mr(fs(r),0),Jn((function(t){var n=t[r],a=ba(t,0,r);return n&&Dt(a,n),Pt(e,this,a)}))},Mr.tail=function(e){var t=null==e?0:e.length;return t?na(e,1,t):[]},Mr.take=function(t,r,n){return t&&t.length?na(t,0,(r=n||r===e?1:fs(r))<0?0:r):[]},Mr.takeRight=function(t,r,n){var a=null==t?0:t.length;return a?na(t,(r=a-(r=n||r===e?1:fs(r)))<0?0:r,a):[]},Mr.takeRightWhile=function(e,t){return e&&e.length?_a(e,ci(t,3),!1,!0):[]},Mr.takeWhile=function(e,t){return e&&e.length?_a(e,ci(t,3)):[]},Mr.tap=function(e,t){return t(e),e},Mr.throttle=function(e,r,n){var a=!0,i=!0;if("function"!=typeof e)throw new xe(t);return es(n)&&(a="leading"in n?!!n.leading:a,i="trailing"in n?!!n.trailing:i),Ro(e,r,{leading:a,maxWait:r,trailing:i})},Mr.thru=_o,Mr.toArray=ps,Mr.toPairs=Fs,Mr.toPairsIn=Ms,Mr.toPath=function(e){return Ho(e)?Ot(e,Ui):cs(e)?[e]:Ta(Di(vs(e)))},Mr.toPlainObject=ms,Mr.transform=function(e,t,r){var n=Ho(e),a=n||qo(e)||ls(e);if(t=ci(t,4),null==r){var i=e&&e.constructor;r=a?n?new i:[]:es(e)&&Xo(i)?Br(Ye(e)):{}}return(a?Ct:wn)(e,(function(e,n,a){return t(r,e,n,a)})),r},Mr.unary=function(e){return Io(e,1)},Mr.union=eo,Mr.unionBy=to,Mr.unionWith=ro,Mr.uniq=function(e){return e&&e.length?ua(e):[]},Mr.uniqBy=function(e,t){return e&&e.length?ua(e,ci(t,2)):[]},Mr.uniqWith=function(t,r){return r="function"==typeof r?r:e,t&&t.length?ua(t,e,r):[]},Mr.unset=function(e,t){return null==e||da(e,t)},Mr.unzip=no,Mr.unzipWith=ao,Mr.update=function(e,t,r){return null==e?e:pa(e,t,va(r))},Mr.updateWith=function(t,r,n,a){return a="function"==typeof a?a:e,null==t?t:pa(t,r,va(n),a)},Mr.values=Bs,Mr.valuesIn=function(e){return null==e?[]:Qt(e,Ns(e))},Mr.without=io,Mr.words=Xs,Mr.wrap=function(e,t){return jo(va(t),e)},Mr.xor=oo,Mr.xorBy=so,Mr.xorWith=co,Mr.zip=lo,Mr.zipObject=function(e,t){return ga(e||[],t||[],en)},Mr.zipObjectDeep=function(e,t){return ga(e||[],t||[],Qn)},Mr.zipWith=uo,Mr.entries=Fs,Mr.entriesIn=Ms,Mr.extend=ws,Mr.extendWith=bs,sc(Mr,Mr),Mr.add=mc,Mr.attempt=Zs,Mr.camelCase=Ws,Mr.capitalize=zs,Mr.ceil=vc,Mr.clamp=function(t,r,n){return n===e&&(n=r,r=e),n!==e&&(n=(n=gs(n))==n?n:0),r!==e&&(r=(r=gs(r))==r?r:0),sn(gs(t),r,n)},Mr.clone=function(e){return cn(e,4)},Mr.cloneDeep=function(e){return cn(e,5)},Mr.cloneDeepWith=function(t,r){return cn(t,5,r="function"==typeof r?r:e)},Mr.cloneWith=function(t,r){return cn(t,4,r="function"==typeof r?r:e)},Mr.conformsTo=function(e,t){return null==t||ln(e,t,Rs(t))},Mr.deburr=Gs,Mr.defaultTo=function(e,t){return null==e||e!=e?t:e},Mr.divide=yc,Mr.endsWith=function(t,r,n){t=vs(t),r=la(r);var a=t.length,i=n=n===e?a:sn(fs(n),0,a);return(n-=r.length)>=0&&t.slice(n,i)==r},Mr.eq=Bo,Mr.escape=function(e){return(e=vs(e))&&J.test(e)?e.replace(q,ar):e},Mr.escapeRegExp=function(e){return(e=vs(e))&&ae.test(e)?e.replace(ne,"\\$&"):e},Mr.every=function(t,r,n){var a=Ho(t)?xt:fn;return n&&yi(t,r,n)&&(r=e),a(t,ci(r,3))},Mr.find=go,Mr.findIndex=zi,Mr.findKey=function(e,t){return Bt(e,ci(t,3),wn)},Mr.findLast=mo,Mr.findLastIndex=Gi,Mr.findLastKey=function(e,t){return Bt(e,ci(t,3),bn)},Mr.floor=wc,Mr.forEach=vo,Mr.forEachRight=yo,Mr.forIn=function(e,t){return null==e?e:vn(e,ci(t,3),Ns)},Mr.forInRight=function(e,t){return null==e?e:yn(e,ci(t,3),Ns)},Mr.forOwn=function(e,t){return e&&wn(e,ci(t,3))},Mr.forOwnRight=function(e,t){return e&&bn(e,ci(t,3))},Mr.get=Ps,Mr.gt=Wo,Mr.gte=zo,Mr.has=function(e,t){return null!=e&&hi(e,t,In)},Mr.hasIn=Is,Mr.head=$i,Mr.identity=nc,Mr.includes=function(e,t,r,n){e=Vo(e)?e:Bs(e),r=r&&!n?fs(r):0;var a=e.length;return r<0&&(r=mr(a+r,0)),ss(e)?r<=a&&e.indexOf(t,r)>-1:!!a&&zt(e,t,r)>-1},Mr.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=null==r?0:fs(r);return a<0&&(a=mr(n+a,0)),zt(e,t,a)},Mr.inRange=function(t,r,n){return r=_s(r),n===e?(n=r,r=0):n=_s(n),function(e,t,r){return e>=vr(t,r)&&e<mr(t,r)}(t=gs(t),r,n)},Mr.invoke=xs,Mr.isArguments=Go,Mr.isArray=Ho,Mr.isArrayBuffer=$o,Mr.isArrayLike=Vo,Mr.isArrayLikeObject=Yo,Mr.isBoolean=function(e){return!0===e||!1===e||ts(e)&&kn(e)==y},Mr.isBuffer=qo,Mr.isDate=Ko,Mr.isElement=function(e){return ts(e)&&1===e.nodeType&&!as(e)},Mr.isEmpty=function(e){if(null==e)return!0;if(Vo(e)&&(Ho(e)||"string"==typeof e||"function"==typeof e.splice||qo(e)||ls(e)||Go(e)))return!e.length;var t=fi(e);if(t==A||t==T)return!e.size;if(Ei(e))return!Un(e).length;for(var r in e)if(Ue.call(e,r))return!1;return!0},Mr.isEqual=function(e,t){return Nn(e,t)},Mr.isEqualWith=function(t,r,n){var a=(n="function"==typeof n?n:e)?n(t,r):e;return a===e?Nn(t,r,e,n):!!a},Mr.isError=Jo,Mr.isFinite=function(e){return"number"==typeof e&&Mt(e)},Mr.isFunction=Xo,Mr.isInteger=Zo,Mr.isLength=Qo,Mr.isMap=rs,Mr.isMatch=function(e,t){return e===t||Ln(e,t,ui(t))},Mr.isMatchWith=function(t,r,n){return n="function"==typeof n?n:e,Ln(t,r,ui(r),n)},Mr.isNaN=function(e){return ns(e)&&e!=+e},Mr.isNative=function(e){if(Si(e))throw new Ae("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return On(e)},Mr.isNil=function(e){return null==e},Mr.isNull=function(e){return null===e},Mr.isNumber=ns,Mr.isObject=es,Mr.isObjectLike=ts,Mr.isPlainObject=as,Mr.isRegExp=is,Mr.isSafeInteger=function(e){return Zo(e)&&e>=-u&&e<=u},Mr.isSet=os,Mr.isString=ss,Mr.isSymbol=cs,Mr.isTypedArray=ls,Mr.isUndefined=function(t){return t===e},Mr.isWeakMap=function(e){return ts(e)&&fi(e)==N},Mr.isWeakSet=function(e){return ts(e)&&"[object WeakSet]"==kn(e)},Mr.join=function(e,t){return null==e?"":Yt.call(e,t)},Mr.kebabCase=Hs,Mr.last=Ki,Mr.lastIndexOf=function(t,r,n){var a=null==t?0:t.length;if(!a)return-1;var i=a;return n!==e&&(i=(i=fs(n))<0?mr(a+i,0):vr(i,a-1)),r==r?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(t,r,i):Wt(t,Ht,i,!0)},Mr.lowerCase=$s,Mr.lowerFirst=Vs,Mr.lt=us,Mr.lte=ds,Mr.max=function(t){return t&&t.length?hn(t,nc,Pn):e},Mr.maxBy=function(t,r){return t&&t.length?hn(t,ci(r,2),Pn):e},Mr.mean=function(e){return $t(e,nc)},Mr.meanBy=function(e,t){return $t(e,ci(t,2))},Mr.min=function(t){return t&&t.length?hn(t,nc,Fn):e},Mr.minBy=function(t,r){return t&&t.length?hn(t,ci(r,2),Fn):e},Mr.stubArray=hc,Mr.stubFalse=gc,Mr.stubObject=function(){return{}},Mr.stubString=function(){return""},Mr.stubTrue=function(){return!0},Mr.multiply=bc,Mr.nth=function(t,r){return t&&t.length?Gn(t,fs(r)):e},Mr.noConflict=function(){return ft._===this&&(ft._=We),this},Mr.noop=cc,Mr.now=Po,Mr.pad=function(e,t,r){e=vs(e);var n=(t=fs(t))?dr(e):0;if(!t||n>=t)return e;var a=(t-n)/2;return Ha(gt(a),r)+e+Ha(ht(a),r)},Mr.padEnd=function(e,t,r){e=vs(e);var n=(t=fs(t))?dr(e):0;return t&&n<t?e+Ha(t-n,r):e},Mr.padStart=function(e,t,r){e=vs(e);var n=(t=fs(t))?dr(e):0;return t&&n<t?Ha(t-n,r)+e:e},Mr.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),wr(vs(e).replace(ie,""),t||0)},Mr.random=function(t,r,n){if(n&&"boolean"!=typeof n&&yi(t,r,n)&&(r=n=e),n===e&&("boolean"==typeof r?(n=r,r=e):"boolean"==typeof t&&(n=t,t=e)),t===e&&r===e?(t=0,r=1):(t=_s(t),r===e?(r=t,t=0):r=_s(r)),t>r){var a=t;t=r,r=a}if(n||t%1||r%1){var i=br();return vr(t+i*(r-t+ut("1e-"+((i+"").length-1))),r)}return qn(t,r)},Mr.reduce=function(e,t,r){var n=Ho(e)?Ut:qt,a=arguments.length<3;return n(e,ci(t,4),r,a,pn)},Mr.reduceRight=function(e,t,r){var n=Ho(e)?jt:qt,a=arguments.length<3;return n(e,ci(t,4),r,a,_n)},Mr.repeat=function(t,r,n){return r=(n?yi(t,r,n):r===e)?1:fs(r),Kn(vs(t),r)},Mr.replace=function(){var e=arguments,t=vs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Mr.result=function(t,r,n){var a=-1,i=(r=ya(r,t)).length;for(i||(i=1,t=e);++a<i;){var o=null==t?e:t[Ui(r[a])];o===e&&(a=i,o=n),t=Xo(o)?o.call(t):o}return t},Mr.round=Sc,Mr.runInContext=h,Mr.sample=function(e){return(Ho(e)?Jr:Xn)(e)},Mr.size=function(e){if(null==e)return 0;if(Vo(e))return ss(e)?dr(e):e.length;var t=fi(e);return t==A||t==T?e.size:Un(e).length},Mr.snakeCase=Ys,Mr.some=function(t,r,n){var a=Ho(t)?Ft:aa;return n&&yi(t,r,n)&&(r=e),a(t,ci(r,3))},Mr.sortedIndex=function(e,t){return ia(e,t)},Mr.sortedIndexBy=function(e,t,r){return oa(e,t,ci(r,2))},Mr.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=ia(e,t);if(n<r&&Bo(e[n],t))return n}return-1},Mr.sortedLastIndex=function(e,t){return ia(e,t,!0)},Mr.sortedLastIndexBy=function(e,t,r){return oa(e,t,ci(r,2),!0)},Mr.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var r=ia(e,t,!0)-1;if(Bo(e[r],t))return r}return-1},Mr.startCase=qs,Mr.startsWith=function(e,t,r){return e=vs(e),r=null==r?0:sn(fs(r),0,e.length),t=la(t),e.slice(r,r+t.length)==t},Mr.subtract=Ec,Mr.sum=function(e){return e&&e.length?Kt(e,nc):0},Mr.sumBy=function(e,t){return e&&e.length?Kt(e,ci(t,2)):0},Mr.template=function(t,r,n){var a=Mr.templateSettings;n&&yi(t,r,n)&&(r=e),t=vs(t),r=bs({},r,a,Za);var i,o,s=bs({},r.imports,a.imports,Za),c=Rs(s),l=Qt(s,c),u=0,d=r.interpolate||be,p="__p += '",_=Ce((r.escape||be).source+"|"+d.source+"|"+(d===Q?_e:be).source+"|"+(r.evaluate||be).source+"|$","g"),f="//# sourceURL="+(Ue.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ot+"]")+"\n";t.replace(_,(function(e,r,n,a,s,c){return n||(n=a),p+=t.slice(u,c).replace(Se,ir),r&&(i=!0,p+="' +\n__e("+r+") +\n'"),s&&(o=!0,p+="';\n"+s+";\n__p += '"),n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=c+e.length,e})),p+="';\n";var h=Ue.call(r,"variable")&&r.variable;if(h){if(de.test(h))throw new Ae("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(o?p.replace(H,""):p).replace($,"$1").replace(V,"$1;"),p="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var g=Zs((function(){return ke(c,f+"return "+p).apply(e,l)}));if(g.source=p,Jo(g))throw g;return g},Mr.times=function(e,t){if((e=fs(e))<1||e>u)return[];var r=p,n=vr(e,p);t=ci(t),e-=p;for(var a=Jt(n,t);++r<e;)t(r);return a},Mr.toFinite=_s,Mr.toInteger=fs,Mr.toLength=hs,Mr.toLower=function(e){return vs(e).toLowerCase()},Mr.toNumber=gs,Mr.toSafeInteger=function(e){return e?sn(fs(e),-u,u):0===e?e:0},Mr.toString=vs,Mr.toUpper=function(e){return vs(e).toUpperCase()},Mr.trim=function(t,r,n){if((t=vs(t))&&(n||r===e))return Xt(t);if(!t||!(r=la(r)))return t;var a=pr(t),i=pr(r);return ba(a,tr(a,i),rr(a,i)+1).join("")},Mr.trimEnd=function(t,r,n){if((t=vs(t))&&(n||r===e))return t.slice(0,_r(t)+1);if(!t||!(r=la(r)))return t;var a=pr(t);return ba(a,0,rr(a,pr(r))+1).join("")},Mr.trimStart=function(t,r,n){if((t=vs(t))&&(n||r===e))return t.replace(ie,"");if(!t||!(r=la(r)))return t;var a=pr(t);return ba(a,tr(a,pr(r))).join("")},Mr.truncate=function(t,r){var n=30,a="...";if(es(r)){var i="separator"in r?r.separator:i;n="length"in r?fs(r.length):n,a="omission"in r?la(r.omission):a}var o=(t=vs(t)).length;if(or(t)){var s=pr(t);o=s.length}if(n>=o)return t;var c=n-dr(a);if(c<1)return a;var l=s?ba(s,0,c).join(""):t.slice(0,c);if(i===e)return l+a;if(s&&(c+=l.length-c),is(i)){if(t.slice(c).search(i)){var u,d=l;for(i.global||(i=Ce(i.source,vs(fe.exec(i))+"g")),i.lastIndex=0;u=i.exec(d);)var p=u.index;l=l.slice(0,p===e?c:p)}}else if(t.indexOf(la(i),c)!=c){var _=l.lastIndexOf(i);_>-1&&(l=l.slice(0,_))}return l+a},Mr.unescape=function(e){return(e=vs(e))&&K.test(e)?e.replace(Y,fr):e},Mr.uniqueId=function(e){var t=++je;return vs(e)+t},Mr.upperCase=Ks,Mr.upperFirst=Js,Mr.each=vo,Mr.eachRight=yo,Mr.first=$i,sc(Mr,function(){var e={};return wn(Mr,(function(t,r){Ue.call(Mr.prototype,r)||(e[r]=t)})),e}(),{chain:!1}),Mr.VERSION="4.17.21",Ct(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Mr[e].placeholder=Mr})),Ct(["drop","take"],(function(t,r){Gr.prototype[t]=function(n){n=n===e?1:mr(fs(n),0);var a=this.__filtered__&&!r?new Gr(this):this.clone();return a.__filtered__?a.__takeCount__=vr(n,a.__takeCount__):a.__views__.push({size:vr(n,p),type:t+(a.__dir__<0?"Right":"")}),a},Gr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ct(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;Gr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ci(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}})),Ct(["head","last"],(function(e,t){var r="take"+(t?"Right":"");Gr.prototype[e]=function(){return this[r](1).value()[0]}})),Ct(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");Gr.prototype[e]=function(){return this.__filtered__?new Gr(this):this[r](1)}})),Gr.prototype.compact=function(){return this.filter(nc)},Gr.prototype.find=function(e){return this.filter(e).head()},Gr.prototype.findLast=function(e){return this.reverse().find(e)},Gr.prototype.invokeMap=Jn((function(e,t){return"function"==typeof e?new Gr(this):this.map((function(r){return xn(r,e,t)}))})),Gr.prototype.reject=function(e){return this.filter(Do(ci(e)))},Gr.prototype.slice=function(t,r){t=fs(t);var n=this;return n.__filtered__&&(t>0||r<0)?new Gr(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),r!==e&&(n=(r=fs(r))<0?n.dropRight(-r):n.take(r-t)),n)},Gr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Gr.prototype.toArray=function(){return this.take(p)},wn(Gr.prototype,(function(t,r){var n=/^(?:filter|find|map|reject)|While$/.test(r),a=/^(?:head|last)$/.test(r),i=Mr[a?"take"+("last"==r?"Right":""):r],o=a||/^find/.test(r);i&&(Mr.prototype[r]=function(){var r=this.__wrapped__,s=a?[1]:arguments,c=r instanceof Gr,l=s[0],u=c||Ho(r),d=function(e){var t=i.apply(Mr,Dt([e],s));return a&&p?t[0]:t};u&&n&&"function"==typeof l&&1!=l.length&&(c=u=!1);var p=this.__chain__,_=!!this.__actions__.length,f=o&&!p,h=c&&!_;if(!o&&u){r=h?r:new Gr(this);var g=t.apply(r,s);return g.__actions__.push({func:_o,args:[d],thisArg:e}),new zr(g,p)}return f&&h?t.apply(this,s):(g=this.thru(d),f?a?g.value()[0]:g.value():g)})})),Ct(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Re[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Mr.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var a=this.value();return t.apply(Ho(a)?a:[],e)}return this[r]((function(r){return t.apply(Ho(r)?r:[],e)}))}})),wn(Gr.prototype,(function(e,t){var r=Mr[t];if(r){var n=r.name+"";Ue.call(xr,n)||(xr[n]=[]),xr[n].push({name:t,func:r})}})),xr[Ba(e,2).name]=[{name:"wrapper",func:e}],Gr.prototype.clone=function(){var e=new Gr(this.__wrapped__);return e.__actions__=Ta(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ta(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ta(this.__views__),e},Gr.prototype.reverse=function(){if(this.__filtered__){var e=new Gr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Gr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=Ho(e),n=t<0,a=r?e.length:0,i=function(e,t,r){for(var n=-1,a=r.length;++n<a;){var i=r[n],o=i.size;switch(i.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=vr(t,e+o);break;case"takeRight":e=mr(e,t-o)}}return{start:e,end:t}}(0,a,this.__views__),o=i.start,s=i.end,c=s-o,l=n?s:o-1,u=this.__iteratees__,d=u.length,p=0,_=vr(c,this.__takeCount__);if(!r||!n&&a==c&&_==c)return fa(e,this.__actions__);var f=[];e:for(;c--&&p<_;){for(var h=-1,g=e[l+=t];++h<d;){var m=u[h],v=m.iteratee,y=m.type,w=v(g);if(2==y)g=w;else if(!w){if(1==y)continue e;break e}}f[p++]=g}return f},Mr.prototype.at=fo,Mr.prototype.chain=function(){return po(this)},Mr.prototype.commit=function(){return new zr(this.value(),this.__chain__)},Mr.prototype.next=function(){this.__values__===e&&(this.__values__=ps(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?e:this.__values__[this.__index__++]}},Mr.prototype.plant=function(t){for(var r,n=this;n instanceof Wr;){var a=Fi(n);a.__index__=0,a.__values__=e,r?i.__wrapped__=a:r=a;var i=a;n=n.__wrapped__}return i.__wrapped__=t,r},Mr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Gr){var r=t;return this.__actions__.length&&(r=new Gr(this)),(r=r.reverse()).__actions__.push({func:_o,args:[Qi],thisArg:e}),new zr(r,this.__chain__)}return this.thru(Qi)},Mr.prototype.toJSON=Mr.prototype.valueOf=Mr.prototype.value=function(){return fa(this.__wrapped__,this.__actions__)},Mr.prototype.first=Mr.prototype.head,Ze&&(Mr.prototype[Ze]=function(){return this}),Mr}();gt?((gt.exports=hr)._=hr,ht._=hr):ft._=hr}.call(h);var w=y.exports,b={exports:{}};!function(e){!function(){var t={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=a(e,n(r)))}return e}function n(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var n="";for(var i in e)t.call(e,i)&&e[i]&&(n=a(n,i));return n}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):window.classNames=r}()}(b);const S=g(b.exports),E="_Breadcrumbs_Container_1euhy_1",A="_Breadcrumbs_1euhy_1",k="_Breadcrumbs_More_1euhy_14",P="_BreadcrumbsItem_1euhy_28",I="_BreadcrumbsMoreIcon_1euhy_37",C="_BreadcrumbsSplitIcon_1euhy_43",T=new Map,x=6,R=12,N=28,L=e=>w.sumBy(e,(e=>e.width??0))+e.length*R+2*e.length*x+N,O=e=>{const t=(0,s.useRef)(null),[r,n]=(0,s.useState)(e.width??0),a=(0,s.useMemo)((()=>(e=>{const t=JSON.stringify(e);if(T.get(t))return T.get(t);const r=document.createElement("div"),n=new Map,a={setClass:(...e)=>{r.classList.add(...e)},calc:(t,a=!1,i=document.body)=>{r.parentNode||(r.style.position="absolute",r.style.left="-9999px",r.style.whiteSpace="nowrap",r.style.overflow="hidden",r.style.textOverflow="ellipsis",r.style.fontSize=`${e.fontSize}px`,r.style.fontFamily='"Albert Sans", -apple-system, "system-ui", "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif',i.appendChild(r)),r.style.fontWeight=a?`${e.fontWeight}`:"normal";const o=a?`${t}_bold`:t;let s=n.get(o);return void 0!==s||(r.innerText=t,s=Math.ceil(r.getBoundingClientRect().width),n.set(o,s)),s}};return T.set(t,a),a})(e.text)),[e.text]);(0,s.useEffect)((()=>{const r=t.current;if(!r||e.width)return;n(r.getBoundingClientRect().width);const a=new MutationObserver((()=>{n(r.getBoundingClientRect().width)}));a.observe(r,{subtree:!0,childList:!0});const i=new ResizeObserver((e=>{for(const t of e)n(t.target.getBoundingClientRect().width)}));return i.observe(r),()=>{a.disconnect(),i.unobserve(r)}}),[t.current]);const i=(0,s.useMemo)((()=>e.data.map(((e,t,n)=>({...e,width:Math.min(r-R-N-2*x,a.calc(e.label,n.length-1===t))})))),[e.data,r]),o=(0,s.useMemo)((()=>{const e=i.slice(-1),t=i.slice(0,-1);if(0===r)return e;let n=t.length-1,a=t[n];for(;a&&L([a].concat(e))<r;)e.unshift(a),a=t[--n];return e}),[i,r]);return{invisibleData:i.slice(0,i.length-o.length),visibleData:o,containerRef:t}},D=e=>{const t=e.text??{fontSize:14,fontWeight:500},{containerRef:r,invisibleData:s,visibleData:c}=O({text:t,data:e.data,width:e.width}),l=t=>{var r;null==(r=e.onClick)||r.call(e,t)};return(0,o.jsx)("div",{ref:r,className:S(E,e.className),children:(0,o.jsxs)(i.A,{className:A,style:{gap:`${x}px`},size:0,split:(0,o.jsx)(f,{size:R,className:C}),children:[s.length>0?(0,o.jsx)(a.A,{getPopupContainer:e.getMorePopupContainer,droplist:(0,o.jsx)(n.A,{style:{width:200},children:s.map((e=>(0,o.jsx)(n.A.Item,{onClick:()=>l(e),children:e.label},e.value)))}),position:"bl",children:(0,o.jsx)("div",{className:k,children:(0,o.jsx)(p,{size:N,className:I})})}):null,c.map(((e,r,n)=>(0,o.jsx)("div",{className:S(P),style:{maxWidth:e.width,fontSize:t.fontSize,fontWeight:n.length-1===r?t.fontWeight:"normal"},onClick:()=>l(e),children:e.label},e.value)))]})})}},16942:function(e,t,r){r.d(t,{C0:function(){return Oe}});r(78436),r(75139),r(71511),r(78790),r(13398),r(69628);var n=r(56741),a=r(45476),i=r(26789),o=r(10782),s=r(77024),c=r(60591),l=r(38e3),u=r(14148),d=r(67308),p=r(39190),_=r(72579),f=r.n(_),h=r(2799),g=r.n(h),m=r(19240),v=r(63487),y=r.n(v),w=(r(45475),r(91776)),b=r(30395),S=r.n(b),E=r(27212),A=r(57691),k=r(2633),P=r(90018),I=r(37814),C=r(41967),T=r(60162),x=(r(47583),r(84698),Object.defineProperty),R=(e,t,r)=>(((e,t,r)=>{t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);function N(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}function L(e){var t;const r={url:e.baseURL&&e.url?N(e.baseURL,e.url):"",method:null==(t=null==e?void 0:e.method)?void 0:t.toUpperCase(),params:"string"==typeof e.params?JSON.parse(e.params):e.params,data:"string"==typeof e.data?JSON.parse(e.data):e.data,needCommonParams:!0,responseType:e.responseType??"json"};return m.Ay.app.fetch(r)}async function O(e){const t=await L(e);return new Promise(((r,n)=>{if(1!==t.code)n(t);else try{!function(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new h.AxiosError("Request failed with status code "+r.status,[h.AxiosError.ERR_BAD_REQUEST,h.AxiosError.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}(r,n,{data:JSON.parse(t.data.response),status:t.data.status,config:e,request:L})}catch(a){n(a)}}))}const D={APP_NAME:"cc_web",APP_ID:"348188",APP_PF:"7",CHANNEL:"va",LAN:"en",B_ID:"cc_web",VERSION:"5.8.0",APP_SDK_VERSION:"48.0.0",USER_AGREEMENT:"",PRIVACY_POLICY:(e="en")=>{switch(e){case"tr-TR":return"https://www.capcut.com/tr-tr/privacy-policy";case"ja-JP":return"https://www.capcut.com/ja-jp/privacy-policy";case"ko-KR":return"https://www.capcut.com/ko-kr/privacy-policy";case"es-LA":return"https://www.capcut.com/es-es/privacy-policy";case"pt-BR":return"https://www.capcut.com/pt-br/privacy-policy";case"fr-FR":return"https://www.capcut.com/fr-fr/privacy-policy";case"de-DE":return"https://www.capcut.com/de-de/privacy-policy";case"it-IT":return"https://www.capcut.com/it-it/privacy-policy";case"th-TH":return"https://www.capcut.com/th-th/privacy-policy";case"id-ID":return"https://www.capcut.com/id-id/privacy-policy";case"vi-VN":return"https://www.capcut.com/vi-vn/privacy-policy";case"fil-PH":case"tl-PH":return"https://www.capcut.com/tl-ph/privacy-policy";case"ms-MY":return"https://www.capcut.com/ms-my/privacy-policy";default:return"https://www.capcut.com/privacy-policy"}},GOOGLE_PRIVACY_POLICY:(e="en")=>{switch(e){case"tr-TR":return"https://marketingplatform.google.com/about/analytics/terms/tr/";case"ko-KR":return"https://marketingplatform.google.com/about/analytics/terms/kr/";case"ja-JP":return"https://marketingplatform.google.com/about/analytics/terms/jp/";case"pt-BR":return"https://marketingplatform.google.com/about/analytics/terms/br/";case"es-LA":return"https://marketingplatform.google.com/about/analytics/terms/es/";case"fr-FR":return"https://marketingplatform.google.com/about/analytics/terms/fr/";case"de-DE":return"https://marketingplatform.google.com/about/analytics/terms/de/";case"it-IT":return"https://marketingplatform.google.com/about/analytics/terms/it/";case"th-TH":return"https://marketingplatform.google.com/about/analytics/terms/th/";case"id-ID":return"https://marketingplatform.google.com/about/analytics/terms/id/";case"vi-VN":return"https://marketingplatform.google.com/about/analytics/terms/vn/";case"fil-PH":case"tl-PH":return"https://marketingplatform.google.com/about/analytics/terms/ph/";default:return"https://marketingplatform.google.com/about/analytics/terms/us/"}},TERMS_OF_CAPCUT:(e="en")=>{switch(e){case"tr-TR":return"https://www.capcut.com/tr-tr/terms-of-service";case"ja-JP":return"https://www.capcut.com/ja-jp/terms-of-service";case"ko-KR":return"https://www.capcut.com/ko-kr/terms-of-service";case"es-LA":return"https://www.capcut.com/es-es/terms-of-service";case"pt-BR":return"https://www.capcut.com/pt-br/terms-of-service";case"fr-FR":return"https://www.capcut.com/fr-fr/terms-of-service";case"de-DE":return"https://www.capcut.com/de-de/terms-of-service";case"it-IT":return"https://www.capcut.com/it-it/terms-of-service";case"th-TH":return"https://www.capcut.com/th-th/terms-of-service";case"id-ID":return"https://www.capcut.com/id-id/terms-of-service";case"vi-VN":return"https://www.capcut.com/vi-vn/terms-of-service";case"fil-PH":case"tl-PH":return"https://www.capcut.com/tl-ph/terms-of-service";case"ms-MY":return"https://www.capcut.com/ms-my/terms-of-service";default:return"https://www.capcut.com/terms-of-service"}},COOKIE_POLICY:(e="en")=>{switch(e){case"tr-TR":return"https://www.capcut.com/tr-tr/cookies-policy";case"ja-JP":return"https://www.capcut.com/ja-jp/cookies-policy";case"ko-KR":return"https://www.capcut.com/ko-kr/cookies-policy";case"es-LA":return"https://www.capcut.com/es-es/cookies-policy";case"pt-BR":return"https://www.capcut.com/pt-br/cookies-policy";case"fr-FR":return"https://www.capcut.com/fr-fr/cookies-policy";case"de-DE":return"https://www.capcut.com/de-de/cookies-policy";case"it-IT":return"https://www.capcut.com/it-it/cookies-policy";case"th-TH":return"https://www.capcut.com/th-th/cookies-policy";case"id-ID":return"https://www.capcut.com/id-id/cookies-policy";case"vi-VN":return"https://www.capcut.com/vi-vn/cookies-policy";case"fil-PH":case"tl-PH":return"https://www.capcut.com/tl-ph/cookies-policy";case"ms-MY":return"https://www.capcut.com/ms-my/cookies-policy";default:return"https://www.capcut.com/cookies-policy"}},MATERIALS_POLICY:(e="en")=>{switch(e){case"tr-TR":return"https://www.capcut.com/tr-tr/material-license-agreement";case"ja-JP":return"https://www.capcut.com/ja-jp/material-license-agreement";case"ko-KR":return"https://www.capcut.com/ko-kr/material-license-agreement";case"es-LA":return"https://www.capcut.com/es-es/material-license-agreement";case"pt-BR":return"https://www.capcut.com/pt-br/material-license-agreement";case"fr-FR":return"https://www.capcut.com/fr-fr/material-license-agreement";case"de-DE":return"https://www.capcut.com/de-de/material-license-agreement";case"it-IT":return"https://www.capcut.com/it-it/material-license-agreement";case"th-TH":return"https://www.capcut.com/th-th/material-license-agreement";case"id-ID":return"https://www.capcut.com/id-id/material-license-agreement";case"vi-VN":return"https://www.capcut.com/vi-vn/material-license-agreement";case"fil-PH":case"tl-PH":return"https://www.capcut.com/tl-ph/material-license-agreement";case"ms-MY":return"https://www.capcut.com/ms-my/material-license-agreement";default:return"https://www.capcut.com/material-license-agreement"}},CREATOR_AGREEMENT:(e="en")=>{switch(e){case"tr-TR":return"https://www.capcut.com/tr-tr/creator-agreement";case"ja-JP":return"https://www.capcut.com/ja-jp/creator-agreement";case"ko-KR":return"https://www.capcut.com/ko-kr/creator-agreement";case"es-LA":return"https://www.capcut.com/es-es/creator-agreement";case"pt-BR":return"https://www.capcut.com/pt-br/creator-agreement";case"fr-FR":return"https://www.capcut.com/fr-fr/creator-agreement";case"de-DE":return"https://www.capcut.com/de-de/creator-agreement";case"it-IT":return"https://www.capcut.com/it-it/creator-agreement";case"th-TH":return"https://www.capcut.com/th-th/creator-agreement";case"id-ID":return"https://www.capcut.com/id-id/creator-agreement";case"vi-VN":return"https://www.capcut.com/vi-vn/creator-agreement";case"fil-PH":case"tl-PH":return"https://www.capcut.com/tl-ph/creator-agreement";case"ms-MY":return"https://www.capcut.com/ms-my/creator-agreement";default:return"https://www.capcut.com/creator-agreement"}},COMMUNITY_GUIDELINE:(e="en")=>{switch(e){case"tr-TR":return"https://www.capcut.com/tr-tr/community-guideline";case"ja-JP":return"https://www.capcut.com/ja-jp/community-guideline";case"ko-KR":return"https://www.capcut.com/ko-kr/community-guideline";case"es-LA":return"https://www.capcut.com/es-es/community-guideline";case"pt-BR":return"https://www.capcut.com/pt-br/community-guideline";case"fr-FR":return"https://www.capcut.com/fr-fr/community-guideline";case"de-DE":return"https://www.capcut.com/de-de/community-guideline";case"it-IT":return"https://www.capcut.com/it-it/community-guideline";case"th-TH":return"https://www.capcut.com/th-th/community-guideline";case"id-ID":return"https://www.capcut.com/id-id/community-guideline";case"vi-VN":return"https://www.capcut.com/vi-vn/community-guideline";case"fil-PH":case"tl-PH":return"https://www.capcut.com/tl-ph/community-guideline";case"ms-MY":return"https://www.capcut.com/ms-my/community-guideline";default:return"https://www.capcut.com/community-guideline"}}};var U=(e=>(e.DEFAULT="DEFAULT",e.COMMERCE="COMMERCE",e.FRONTIER="FRONTIER",e.TTS="TTS",e))(U||{});var j=(e=>(e.TikTok="TikTok",e.TTAM="TTAM",e.YouTube="YouTube",e.YouTubeShorts="YouTubeShorts",e.Instagram="Instagram",e.InstagramReels="InstagramReels",e.FacebookPage="FacebookPage",e.FacebookGroup="FacebookGroup",e.Shopify="Shopify",e.Dropbox="Dropbox",e))(j||{}),F=(e=>(e[e.PAGE=0]="PAGE",e[e.GROUP=1]="GROUP",e[e.INSTAGRAM=2]="INSTAGRAM",e))(F||{});j.FacebookPage,j.FacebookGroup,j.Instagram,j.InstagramReels;var M=(e=>(e[e.YouTube=0]="YouTube",e[e.YouTubeShorts=1]="YouTubeShorts",e))(M||{});j.YouTube,j.YouTubeShorts;const B={Indonesian:{key:"id-ID",pathPrefix:"id-id",disable:!1,matcher:/^id/,text:"Bahasa Indonesia"},German:{key:"de-DE",pathPrefix:"de-de",disable:!1,matcher:/^de/,text:"Deutsch"},English:{key:"en",pathPrefix:"",disable:!1,matcher:/^en/,text:"English"},Spanish:{key:"es-LA",pathPrefix:"es-es",disable:!1,matcher:/^es/,text:"Espa\xf1ol"},French:{key:"fr-FR",pathPrefix:"fr-fr",disable:!1,matcher:/^fr/,text:"Fran\xe7ais"},italian:{key:"it-IT",pathPrefix:"it-it",disable:!1,matcher:/^it/,text:"Italiano"},Malay:{key:"ms-MY",pathPrefix:"ms-my",disable:!1,matcher:/^ms/,text:"Melayu"},Dutch:{key:"nl-NL",pathPrefix:"nl-nl",disable:!1,matcher:/^nl/,text:"Nederlands"},Polish:{key:"pl-PL",pathPrefix:"pl-pl",disable:!1,matcher:/^pl/,text:"Polski"},Portuguese:{key:"pt-BR",pathPrefix:"pt-br",disable:!1,matcher:/^pt/,text:"Portugu\xeas"},Romanian:{key:"ro-RO",pathPrefix:"ro-ro",disable:!1,matcher:/^ro/,text:"Rom\xe2n\u0103"},Swedish:{key:"sv-SE",pathPrefix:"sv-se",disable:!1,matcher:/^sv/,text:"Svenska"},Filipino:{key:"fil-PH",pathPrefix:"tl-ph",disable:!1,matcher:/^(tl|fil)/,text:"Tagalog"},vietnamese:{key:"vi-VN",pathPrefix:"vi-vn",disable:!1,matcher:/^vi/,text:"Ti\u1ebfng Vi\u1ec7t"},Turkey:{key:"tr-TR",pathPrefix:"tr-tr",disable:!1,matcher:/^tr/,text:"T\xfcrk\xe7e"},Thai:{key:"th-TH",pathPrefix:"th-th",disable:!1,matcher:/^th/,text:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22"},Japan:{key:"ja-JP",pathPrefix:"ja-jp",disable:!1,matcher:/^ja/,text:"\u65e5\u672c\u8a9e"},TraditionalChinese:{key:"zh-Hant-TW",pathPrefix:"zh-tw",disable:!1,matcher:/^zh/,text:"\u7e41\u9ad4\u4e2d\u6587"},Korea:{key:"ko-KR",pathPrefix:"ko-kr",disable:!1,matcher:/^ko/,text:"\ud55c\uad6d\uc5b4"}};Object.values(B).reduce(((e,t)=>(t.pathPrefix&&(e[t.key]=t.pathPrefix),e)),{});const W="object"==typeof navigator&&/(capcut.*lv\/([\d+.]+)|lv\/([\d+.]+).*capcut)/i.test(navigator.userAgent);class z{constructor(){R(this,"_hasBeenDone",!1),R(this,"_isIniting",!1),R(this,"resolveResult"),R(this,"rejectResult"),R(this,"_initCostTimes"),R(this,"_waitingResolvers",new Set),R(this,"_waitingResolverMap",new Map)}get hasBeenDone(){return this._hasBeenDone}get costTimes(){if(!this._initCostTimes)return;const{start:e,end:t}=this._initCostTimes;return(t||Date.now())-e}get initResult(){if(this._hasBeenDone)return{resolve:this.resolveResult,reject:this.rejectResult}}get isIniting(){return this._isIniting}awaitForInit({key:e,timeout:t}={}){if(this._hasBeenDone&&this.initResult){const{resolve:e,reject:t}=this.initResult;return t?Promise.reject(t):Promise.resolve(e)}if(e&&this._waitingResolverMap.has("key"))return this._waitingResolverMap.get("key");if(!t){const t=new Promise(((e,t)=>{this._waitingResolvers.add([e,t])}));return e&&this._waitingResolverMap.set(e,t),t}let r,n;const a=Promise.race([new Promise(((e,t)=>{r=[()=>{clearTimeout(n),e()},t],this._waitingResolvers.add([r,t])})),new Promise(((e,a)=>{n=setTimeout((()=>{this._waitingResolvers.delete(r),a(new Error("Timed out waiting for init"))}),t)}))]);return e&&this._waitingResolverMap.set(e,a),a}startToInit(){return!this._hasBeenDone&&!this._isIniting&&(this._isIniting=!0,this._initCostTimes={start:Date.now()},!0)}initDone(e){if(this._hasBeenDone)throw new Error("Cannot release an inited locker");this._initCostTimes&&(this._initCostTimes.end=Date.now());let t=!1;null!=e&&e.reject?(t=!0,this.rejectResult=e.reject):this.resolveResult=null==e?void 0:e.resolve;for(const r of this._waitingResolvers)t?r[1](this.rejectResult):r[0](this.resolveResult);this._waitingResolverMap.clear(),this._waitingResolvers.clear(),this._hasBeenDone=!0,this._isIniting=!1}}const G="custom-request-domain";const H=new class{constructor(){R(this,"_locker",new z),R(this,"_userRequestDomain")}getWebDomain(){return this._userRequestDomain.domain.web_domain}updateRequestDomain(e){e.domain&&(this._locker.hasBeenDone||this._locker.initDone(),this._userRequestDomain=e)}async baseRequestInterceptors(e){var t,r,n,a,i,o,s;const c=null==(t=e.baseURL)?void 0:t.startsWith("https");(null==(r=null==e?void 0:e[G])||!r.skipAwaitLocker)&&!c&&await this._locker.awaitForInit();const l=null==(n=null==e?void 0:e[G])?void 0:n.domain,u=(null!=e&&e.useCommerceApi?U.COMMERCE:U.DEFAULT)===U.COMMERCE?null==(i=null==(a=this._userRequestDomain)?void 0:a.domain)?void 0:i.commerce_domain:W?"https://mweb-api.capcutapi.com":null==(s=null==(o=this._userRequestDomain)?void 0:o.domain)?void 0:s.web_domain,d=l||u;return!c&&d&&(e.baseURL=`${l||d}${e.baseURL}`),{...e,withCredentials:!0}}createAxios(e){const t=W?g().create({...e,adapter:O}):g().create(e);return t.interceptors.request.use(this.baseRequestInterceptors.bind(this)),t}},$=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);const V="custom-axios-retry",Y=["get","head","options"].concat(["put","delete"]);function q(e){const t=(null==e?void 0:e[V])||{canRetry:!0};return t.retryCount=t.retryCount||0,t}const K=()=>0;function J(e){return!e.response&&!!e.code&&"ECONNABORTED"!==e.code&&function(e){return!$.has(e&&e.code)}(e)}function X(e){return J(e)||function(e){return!!e.config&&function(e){return"ECONNABORTED"!==e.code&&(!e.response||e.response.status>=500&&e.response.status<=599)}(e)&&-1!==Y.indexOf(e.config.method)}(e)}function Z({url:e,pf:t,appvr:r,tdid:n}){const a=Math.floor(Date.now()/1e3);return{sign:y()(`9e2c|${e.slice(-7)}|${t}|${r}|${a}|${n}|11ac`).toLowerCase(),"device-time":a}}const Q={baseURL:"/lv/v1",method:"POST",headers:{loc:D.CHANNEL,lan:u.Ay.language||D.LAN,pf:D.APP_PF,appvr:D.VERSION,tdid:"","sign-ver":1,"app-sdk-version":D.APP_SDK_VERSION}},ee=H.createAxios(Q);ee.interceptors.request.use((e=>{const{pf:t,appvr:r,tdid:n}=Q.headers;return Object.assign(e.headers,Z({url:`${e.baseURL}${e.url}`,pf:t,appvr:r,tdid:n})),e})),ee.interceptors.response.use((e=>{if(200===e.status){const t=e.data;return"0"===t.ret?Promise.resolve(t.data):Promise.reject(e)}return Promise.reject(e)}));const te=g().create({method:"GET"});te.interceptors.response.use((e=>200===e.status?Promise.resolve(e.data):Promise.reject(e)));const re={async getShareReportReason(){await H._locker.awaitForInit();let e="https://sf16-muse-va.ibytedtos.com/obj/ies-fe-bee-maliva/bee_prod/biz_80/bee_prod_80_bee_publish_4017.json";return H.getWebDomain().indexOf("sg")&&(e="https://sf-hs-sg.ibytedtos.com/obj/ies-fe-bee-alisg/bee_prod/biz_80/bee_prod_80_bee_publish_4017.json"),console.error("await jsonFileService.get(url)",await te.get(e)),await te.get(e)},async getCommentReportReason(){return await te.get("")},async getAIGCReportReason(){try{const e=await te.get("https://sf16-muse-va.ibytedtos.com/obj/ies-fe-bee-maliva/bee_prod/biz_49/bee_prod_49_bee_publish_644.json");if(!e.reasons)throw new Error("");return e}catch{return{reasons:[{text:"s2v_report_type_violent",cate:"violent",cid:401,tips:"",index:0,sort:0,reportParam:"violent_extremism"},{text:"s2v_report_type_illegal",cate:"illegal",cid:402,tips:"",index:1,sort:1,reportParam:"illegal_activities_and_regulated_goods"},{text:"s2v_report_type_graphic_content",cate:"graphic_content",cid:403,tips:"",index:2,sort:2,reportParam:"violent_and_graphic_content"},{text:"s2v_report_type_dangerous",cate:"dangerous",cid:404,tips:"",index:3,sort:3,reportParam:"suicide_self-harm_and_dangerous_acts"},{text:"s2v_report_type_hateful",cate:"hateful",cid:405,tips:"",index:4,sort:4,reportParam:"hateful_behavior"},{text:"s2v_report_type_harassment",cate:"harassment",cid:406,tips:"",index:5,sort:5,reportParam:"harassment_and_bullying"},{text:"s2v_report_type_adult",cate:"adult",cid:407,tips:"",index:6,sort:6,reportParam:"adult_nudity_and_sexual_activity"},{text:"s2v_report_type_minor",cate:"minor",cid:408,tips:"",index:7,sort:7,reportParam:"minor_safety"},{text:"s2v_report_type_integrity",cate:"integrity",cid:409,tips:"",index:8,sort:8,reportParam:"integrity_and_authenticity"},{text:"s2v_report_type_infringement",cate:"infringement",cid:410,tips:"",index:9,sort:9,reportParam:"intellectual_property_infringement"},{text:"s2v_report_type_other",cate:"other",cid:411,tips:"",index:10,sort:10,reportParam:"other"}]}}},async report(e){return await ee.post("/report/report",e)},async eventReport(e){return await ee.post("/event/report",e)},async aigcReport(e){return await ee.post("/report/report",e)}},ne={baseURL:"/lv/v1/user",method:"POST",headers:{loc:D.CHANNEL,lan:u.Ay.language||D.LAN,pf:D.APP_PF,appvr:D.VERSION,tdid:"","sign-ver":1,"app-sdk-version":D.APP_SDK_VERSION},params:{}},ae=g().create(ne);var ie,oe;ae.interceptors.request.use((e=>{const{pf:t,appvr:r,tdid:n}=ne.headers;return Object.assign(e.headers,Z({url:`${e.baseURL}${e.url}`,pf:t,appvr:r,tdid:n})),e})),ae.interceptors.response.use((e=>{if(200===e.status){const t=e.data;return"0"===t.ret?Promise.resolve(t):Promise.reject(e)}return Promise.reject(e)})),oe={retries:5,resetTimeout:!0,retryDelay:1e3,isRetry:()=>!0},(ie=ae).interceptors.request.use((e=>{const t=q(e);return t.lastRequestTime=Date.now(),e[V]=t,e})),ie.interceptors.response.use(void 0,(e=>{const{config:t}=e;if(!t)return Promise.reject(e);const{retries:r=5,isRetry:n=X,retryDelay:a=K,resetTimeout:i=!1}=Object.assign({},oe,null==t?void 0:t[V]),o=q(t);if(n(e)&&o.canRetry&&(-1===r||o.retryCount<r)){o.retryCount+=1;const r="number"==typeof a?a:a(o.retryCount,e);if(function(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}(ie,t),!i&&t.timeout&&o.lastRequestTime){const e=Date.now()-o.lastRequestTime;t.timeout=Math.max(t.timeout-e-r,1)}return t.transformRequest=[e=>e],new Promise((e=>setTimeout((()=>e(ie(t))),r)))}return Promise.reject(e)}));const se={async getLocation(){return await ae({url:"/web/get_location",data:{}})}};const ce=new class{get sdk(){if(!(typeof window>"u"))return null==window?void 0:window.ccWebSlardar}init(e){var t;null==(t=this.sdk)||t.call(this,"init",e)}start(){var e;null==(e=this.sdk)||e.call(this,"start")}config(e){var t;null==(t=this.sdk)||t.call(this,"config",e)}error(e,t,r={}){var n;const a=null!=r&&r.level?null==r?void 0:r.level:"warn",i=(0,T.A)(t)?(e=>{const t=new Error(e.message);return t.name=e.name,t.stack=e.stack,t.message=e.message,t})(t):new Error(JSON.stringify(t)),{message:o}=i;i.message=`\u3010Custom-Error\u3011:${e}-${r.toGroup?"MoreDataInExternal":null==i?void 0:i.message}`,r.toGroup&&(Object.assign(r,{message:o}),delete r.toGroup),null==(n=this.sdk)||n.call(this,"captureException",i,{...r,level:a})}dataEvent(e,t={}){var r;const n=null!=t&&t.level?null==t?void 0:t.level:"info",a=(0,I.A)(t,C.A);null==(r=this.sdk)||r.call(this,"sendEvent",{name:`\u3010Custom-Data\u3011: ${e}`,metrics:a,categories:{...t,level:n}})}log(e,t={}){var r;const n=null!=t&&t.level?null==t?void 0:t.level:"info";null==(r=this.sdk)||r.call(this,"sendLog",{content:`\u3010Custom-Log\u3011: ${e}`,level:n,extra:{...t}})}setCurrentBranch(e=""){var t;e&&(null==(t=this.sdk)||t.call(this,"context.set","branch",e))}};const le=["click"],ue="report";F.GROUP,F.PAGE,F.INSTAGRAM,M.YouTube,M.YouTubeShorts;const de={google:[/([^\/]+\.)?google(\.[^\/]+)(\/|$)/i],bing:[/([^\/]+\.)?bing\.com(\/|$)/i],yahoo:[/([^\/]+\.)?yahoo\.com(\/|$)/i],duckduckgo:[/([^\/]+\.)?duckduckgo\.com(\/|$)/i],yandex:[/([^\/]+\.)?yandex\.com(\/|$)/i],naver:[/([^\/]+\.)?naver\.com(\/|$)/i],facebook:[/([^\/]+\.)?facebook\.com(\/|$)/i,/([^\/]+\.)?fb\.com(\/|$)/i,/([^\/]+\.)?fb\.me(\/|$)/i],youtube:[/([^\/]+\.)?youtube\.com(\/|$)/i,/([^\/]+\.)?youtu\.be(\/|$)/i],twitter:[/([^\/]+\.)?twitter\.com(\/|$)/i,/([^\/]+\.)?t\.co(\/|$)/i],tiktok:[/([^\/]+\.)?tiktok\.com(\/|$)/i],instagram:[/([^\/]+\.)?instagram\.com(\/|$)/i,/([^\/]+\.)?instagr\.am(\/|$)/i],linkedin:[/([^\/]+\.)?linkedin\.com(\/|$)/i],survey:[/survey\.isnssdk\.com(\/|$)/i]},pe={SEO:[...de.google,...de.bing,...de.yahoo,...de.duckduckgo,...de.yandex,...de.naver],Social:[...de.facebook,...de.youtube,...de.twitter,...de.tiktok,...de.instagram,...de.linkedin],product:[...de.survey]};new Map(Object.keys(pe).reduce(((e,t)=>(pe[t].forEach((r=>{e.push([r,t])})),e)),[])),new Map(Object.keys(de).reduce(((e,t)=>(de[t].forEach((r=>{e.push([r,t])})),e)),[]));const _e={user_id:"",user_is_login:!1,user_is_subscribed:!1,user_is_new:!1},fe={isProd:!0,log:!1,userInfo:_e,isABDependenciesReady:!0},he="TEA_STORE_TOKEN_RET",ge="TEA_STORE_WEB_INFO";class me{constructor(){R(this,"isInited",!1),R(this,"isStarted",!1),R(this,"isABDependenciesReady",!0),R(this,"_web_id"),R(this,"_tea",P.A),R(this,"_reportWraperHandler"),R(this,"_startCallbacks",new Set),R(this,"options"),R(this,"cachedEvents",new Set),R(this,"cachedBeaconEvents",new Set),R(this,"cachedPredefinePageView"),R(this,"isSetWebId",!1),R(this,"currentPageHidden",!1),R(this,"awaitInitQueue",[]),R(this,"ABDependenciesReadyQueue",[]),typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"&&document.addEventListener("visibilitychange",(()=>{this.currentPageHidden=document.hidden}))}get tea(){return this._tea}awaitForInit(){return this.isInited?void 0:new Promise((e=>{this.awaitInitQueue.push(e)}))}awaitForStart(){return this.isStarted?void 0:new Promise((e=>{this.addStartCallBack(e)}))}awaitABDependenciesReady(){return this.isABDependenciesReady?void 0:new Promise((e=>{this.ABDependenciesReadyQueue.push(e)}))}setABDependenciesReady(){this.isABDependenciesReady=!0,this.ABDependenciesReadyQueue.forEach((e=>{e()})),this.ABDependenciesReadyQueue=[]}init(e){var t;this.options=Object.assign({},fe,e),this._web_id=this.options.web_id,this.isABDependenciesReady=this.options.isABDependenciesReady,this._tea.init({disable_auto_pv:!0,disable_sdk_monitor:!0,app_id:Number(D.APP_ID),channel:D.CHANNEL,log:this.options.log,enable_ab_test:!0,ab_channel_domain:"https://vmweb-sg.byteoversea.com",disable_webid:!!this._web_id,enable_stay_duration:!(null==e||!e.enable_stay_duration),maxDuration:Number(null==e?void 0:e.maxDuration)||864e5,enable_debug:!(null==e||!e.enable_debug),autotrack:null!=e&&e.useAutoTrack?{custom:"tea",svg:!0}:void 0}),this.config({app_version:null!=e&&e.appVersion?`1.0.${null==e?void 0:e.appVersion.split(".").pop()}`:"",_staging_flag:this.options.isProd?0:1,web_id:this._web_id,user_agent:(null==(t=null==window?void 0:window.navigator)?void 0:t.userAgent)||"",...this.options.userInfo}),this.clearInitQueue(),this.register()}async start(){if(!this.isInited&&!this.isStarted){const[e,t]=(()=>{const e=window.GATEWAY_INJECTED_WEB_ID,t="string"==typeof e&&!!e;return[t,t?e:void 0]})();e&&(this._web_id=t)}this.isStarted=!0,this.setABDependenciesReady(),this._tea.start(),await this.setWebIdToCustom(),this.execStartCallBacks(),this.sendCacheEvent()}async getABTestConfig(e,t){return await this.awaitForInit(),await this.awaitABDependenciesReady(),this.isStarted?new Promise((r=>{this._tea.getVar(e,t,(e=>{r(e)}))})):(console.warn("[WARNING]@byted-image/reporter getABTestConfig failure, cause sdk is not allow to started"),Promise.resolve(t))}getABTestConfigSync(e,t,r){var n;return Promise.resolve().then((()=>this.awaitForInit())).then((()=>this.awaitABDependenciesReady())).then((()=>{this.isStarted||(console.warn("[WARNING]@byted-image/reporter getABTestConfig failure, cause sdk is not allow to started"),null==r||r(t)),this._tea.getVar(e,t,(e=>{null==r||r(e)}))})),(null==(n=window._libra_abtest)?void 0:n[e])??t}async getABTestConfigSilent(e,t){return await this.awaitForInit(),await this.awaitABDependenciesReady(),this.isStarted?new Promise((r=>{this._tea.getAllVars((n=>{var a;r((null==(a=null==n?void 0:n[e])?void 0:a.val)??t)}))})):(console.warn("[WARNING]@byted-image/reporter getABTestConfig failure, cause sdk is not allow to started"),Promise.resolve(t))}report(e,t,r){var n,a;!1===(null==r?void 0:r.hiddenPageReport)&&this.currentPageHidden?null!=(n=this.options)&&n.log&&console.info("Tea Repoter Reject:",`hiddenPageReport => ${null==r?void 0:r.hiddenPageReport}; currentPageHidden => ${this.currentPageHidden}`):this.isStarted&&this.isSetWebId?(null!=(a=this.options)&&a.log&&console.info("Tea Repoter:",e,t),this.tea.event(e,t)):this.cachedEvents.add({event:e,params:t})}reportBecon(e,t){var r;this.isStarted&&this.isSetWebId?(null!=(r=this.options)&&r.log&&console.info("Tea Repoter(becon):",e,t),this.tea.beconEvent(e,t)):this.cachedBeaconEvents.add({event:e,params:t})}reportPredefinePageView(e){var t;if(!this.isStarted||!this.isSetWebId)return void(this.cachedPredefinePageView=e);null!=(t=this.options)&&t.log&&console.info("Tea Repoter:",event,e);const{isFirstVisitPage:r,isSessionStartPage:n}=function(){let e=!1,t=!1;const r=window.GATEWAY_INJECT_IS_FIRST_VISIT_PAGE;return typeof r<"u"&&(e="1"===r),t=e||!document.referrer.includes(location.hostname),{isFirstVisitPage:e,isSessionStartPage:t}}();e.is_first_visit_page=r?"1":"0",e.is_session_start_page=n?"1":"0",this._tea.predefinePageView(e)}sendCacheEvent(){var e;if(this.cachedPredefinePageView&&this.reportPredefinePageView(this.cachedPredefinePageView),this.cachedEvents.size){for(const{event:e,params:t}of this.cachedEvents)this.report(e,t);this.cachedEvents.clear()}if(this.cachedBeaconEvents.size){for(const{event:t,params:r}of this.cachedBeaconEvents)null!=(e=this.options)&&e.log&&console.info("Tea Repoter(becon):",t,r),this.reportBecon(t,r);this.cachedBeaconEvents.clear()}}updateUserInfo(e){this.config({...e})}resetUserInfo(){this.config({..._e})}destroy(){this.unregister()}getToken(){if(void 0!==this._web_id)return Promise.resolve({web_id:this._web_id});const e=window.GATEWAY_INJECTED_WEB_ID;if(e)return Promise.resolve({web_id:e});const t=window[ge];if(void 0!==t)return Promise.resolve(t);return window[he]||(window[he]=new Promise((e=>{this._tea.getToken((t=>{null!=t&&t.web_id?window[ge]=t:window[he]=void 0,e(t??{})}),2e3)})).catch((()=>(window[he]=void 0,{}))),window[he])}async setWebIdToCustom(){var e,t;const{web_id:r}=await this.getToken();r||ce.error("reporter getToken not get web id",new Error,{content:"reporter getToken not get web id",level:"error"});const{custom:n}=(null==(e=this.getConfig())?void 0:e.header)??{};this.config({custom:{...n,user_agent:(null==(t=null==window?void 0:window.navigator)?void 0:t.userAgent)||"",web_id:r}}),this.isSetWebId=!0}config(e){var t;this.fixEsLanguage(e);const{custom:r}=(null==(t=this.getConfig())?void 0:t.header)??{};this._tea.inited&&this._tea.config({...e,custom:{...r,...(null==e?void 0:e.custom)??{}}})}configUTParams(e){var t;const{custom:r}=(null==(t=this.getConfig())?void 0:t.header)??{},{campaign_id:n,term:a,channel:i,extraCommonParams:o}=e;this.config({custom:{...r,...i,...o,campaign_id:n,keywords:a||i.keywords}})}getConfig(e){try{return this._tea.getConfig(e)}catch{return{}}}async asyncGetConfig(e){const t=this.getConfig(e);return(0,k.A)(t)?(await Promise.race([this.awaitForInit(),this.awaitForStart()]),this.getConfig(e)):t}enableTTWid(){this.config({enable_ttwebid:!0})}addStartCallBack(e){this.isStarted?e(null):this._startCallbacks.add(e)}checkEnableReport(){return this.isStarted&&this.isSetWebId}execStartCallBacks(){this._startCallbacks.forEach((e=>{e(null)}))}clearInitQueue(){this.isInited=!0,this.awaitInitQueue.forEach((e=>{e()})),this.awaitInitQueue=[]}register(){le.forEach((e=>{window.document.addEventListener(e,this._reportWraperHandler)}))}unregister(){le.forEach((e=>{window.document.removeEventListener(e,this._reportWraperHandler)}))}reportWraperHandler(e){let t=0;const r=e.composedPath(),n=e.type;let a,i="",o="";for(a=r[t];a;){const{dataset:e}=a;if(e&&e[`${ue}Events`])break;a=r[++t]}if(a){const{dataset:e}=a;i=JSON.parse((null==e?void 0:e[`${ue}Events`])||""),o=JSON.parse((null==e?void 0:e[`${ue}Params`])||"")}if(i){const e=i[n];let t="",r={};if("object"!=typeof e)throw new Error("report event error, please confirm events is obj");t=e.event??"",r=e.params??{},t&&this.report(t,{...o,...r})}}fixEsLanguage(e){var t,r;(null==(r=null==(t=null==e?void 0:e.custom)?void 0:t.lang)?void 0:r.toLocaleLowerCase())===B.Spanish.key.toLocaleLowerCase()&&(e.custom.lang="es-ES")}}const ve=(()=>{let e;return()=>(e||(e=new me),e)})();class ye{constructor(){R(this,"reporter",ve())}report(e,t){const{immediately:r}=t||{};r?this.reporter.reportBecon("aigc_report_entrance",e):this.reporter.report("aigc_report_entrance",e)}}class we{constructor(){R(this,"reporter",ve())}report(e,t){const{immediately:r}=t||{};r?this.reporter.reportBecon("aigc_report_reason",e):this.reporter.report("aigc_report_reason",e)}}class be{constructor(){R(this,"reporter",ve())}report(e,t){const{immediately:r}=t||{};r?this.reporter.reportBecon("aigc_report_result",e):this.reporter.report("aigc_report_result",e)}}const Se={comment:"comment",user:"user",share:"share",embedVideo:"embedVideo",aigc:"aigc"},Ee=(Se.comment,Se.user,Se.share,Se.embedVideo,Se.aigc,{[Se.comment]:re.getCommentReportReason,[Se.user]:()=>re.getShareReportReason,[Se.share]:re.getShareReportReason,[Se.embedVideo]:re.getShareReportReason,[Se.aigc]:re.getAIGCReportReason}),Ae=new(f()),ke=Ae,Pe=i.A.Item,Ie=[151,193,252,197,280,135,185,262,113,203,239],Ce=e=>{const[t,r]=(0,d.useState)(e),{onOk:s,onCancel:p,type:_=Se.share,beforeOk:f,...h}=t,[g]=i.A.useForm(),[m,v]=(0,d.useState)(!0),[y,w]=(0,d.useState)(!0),[b,S]=(0,d.useState)(!1),[E,,,A]=function(e,t,r){const[n,a]=(0,d.useState)(r),[i,o]=(0,d.useState)(),[s,c]=(0,d.useState)(!0);return(0,d.useEffect)((()=>{e().then((e=>a(e))).catch((e=>o(e))).finally((()=>c(!1)))}),t),[n,a,i,s]}((async()=>{const e=Ee[_];return(await e()).reasons.sort(((e,t)=>e.sort-t.sort)).filter((e=>120!==e.cid))}),[_],[]);(0,d.useEffect)((()=>(Ae.removeAllListeners("update"),Ae.removeAllListeners("updateSubmitLoading"),Ae.on("update",(e=>{r(e),g.setFieldsValue({reason_type:null,report_desc:""}),w(!0),v(!0)})),Ae.on("updateSubmitLoading",(e=>{S(e)})),()=>{Ae.removeAllListeners("update"),Ae.removeAllListeners("updateSubmitLoading")})),[g]);const k=()=>{g.validate().then((async e=>{let t={reason_type:e.reason_type};null==E||E.every((r=>r.cid!==e.reason_type||(t={reason_type:r.cid,reason:u.F2.t(`web_${r.text}`),reason_key:r.text,report_param:r.reportParam},!1))),(!s||!1!==await s(t))&&(f&&f({...e,reason_title:null==t?void 0:t.reason}),v(!1))}))},P=()=>{v(!1),S(!1),p&&p()},I=()=>{g.getFieldsValue().reason_type?(g.setFields({reason_type:{error:void 0}}),w(!1)):(g.setFields({reason_type:{error:{message:u.F2.t("report_type_cannot_be_empty!",{},"\u4e3e\u62a5\u7c7b\u578b\u4e0d\u80fd\u4e3a\u7a7a\uff01")}}}),w(!0))};return[Se.share,Se.user,Se.aigc].includes(_)?(0,l.jsx)(n.A,{...h,okText:u.F2.t("submit",{},"Submit"),okButtonProps:{disabled:y,loading:b},cancelButtonProps:{disabled:b,...h.cancelButtonProps},cancelText:u.F2.t("web_cancel",{},"Cancel"),style:{width:480},visible:m,onOk:k,onCancel:P,title:u.F2.t("web_sharereview_button_report",{},"Report"),children:(0,l.jsxs)(i.A,{disabled:b,form:g,onChange:I,className:"report-share-form",children:[A&&(0,l.jsx)(c.A,{animation:!0,text:{rows:10,width:[348,281,...Array(5).fill(220),...Array(3).fill(177)]}}),(0,l.jsx)(Pe,{className:"reason-form-item",requiredSymbol:!1,field:"reason_type",children:(0,l.jsx)(o.A.Group,{className:"reason-group",direction:"vertical",children:null==E?void 0:E.map((e=>(0,l.jsx)(o.A,{value:e.cid,children:u.F2.t(`web_${e.text}`)},e.cid)))})})]})}):_===Se.embedVideo?(0,l.jsxs)(n.A,{...h,okText:u.F2.t("submit",{},"Submit"),okButtonProps:{disabled:y},mask:!1,closable:!1,cancelText:u.F2.t("web_cancel",{},"Cancel"),style:{width:480},visible:m,onOk:k,onCancel:P,title:null,className:"embed-video-report-wrapper",cancelButtonProps:{style:{color:"#FFF",background:"var(--lvv-color-text-content-disable)"}},children:[(0,l.jsx)("div",{className:"embed-video-report-title",children:u.F2.t("web_sharereview_button_report",{},"Report")}),(0,l.jsxs)(i.A,{form:g,onChange:I,className:"embed-video-report-share-form",children:[A&&(0,l.jsx)(c.A,{animation:!0,text:{rows:Ie.length,width:Ie}}),(0,l.jsx)(Pe,{className:"reason-form-item",requiredSymbol:!1,field:"reason_type",children:(0,l.jsx)(o.A.Group,{className:"reason-group",direction:"vertical",children:null==E?void 0:E.map((e=>(0,l.jsx)(o.A,{value:e.cid,children:u.F2.t(`web_${e.text}`)},e.cid)))})})]})]}):(0,l.jsx)(n.A,{...h,style:{width:664},visible:m,onOk:k,onCancel:P,children:(0,l.jsxs)(i.A,{form:g,labelAlign:"left",labelCol:{span:4},wrapperCol:{span:20},onChange:I,className:"report-form",children:[(0,l.jsx)(Pe,{className:"reason-form-item-title",requiredSymbol:{position:"end"},label:u.F2.t("type_of_report",{},"\u4e3e\u62a5\u7c7b\u578b"),field:"reason_type",labelCol:{span:6},wrapperCol:{span:18},rules:[{required:!0,message:u.F2.t("report_type_cannot_be_empty!",{},"\u4e3e\u62a5\u7c7b\u578b\u4e0d\u80fd\u4e3a\u7a7a\uff01")}],children:(0,l.jsx)(a.A,{style:{visibility:"hidden"}})}),(0,l.jsx)(Pe,{label:u.F2.t("report_description",{},"\u4e3e\u62a5\u63cf\u8ff0"),field:"report_desc",children:(0,l.jsx)(a.A.TextArea,{maxLength:300,rows:5,showWordLimit:!0})})]})})},Te="_report-btn_1bfru_1",xe="_report-icon_1bfru_16",Re="share-report-setting-modal",Ne=e=>{const t=(0,d.useRef)(null);return(0,l.jsx)("span",{ref:t,onClick:e=>{e.stopPropagation()},onMouseDown:e=>{e.stopPropagation()},children:(0,l.jsx)(Ce,{...e,getPopupContainer:()=>t.current})})};let Le=null;const Oe=e=>{const{onOk:t,children:r,data:n,className:a,wrapClassName:i,reportParams:o,domain:c,enableReporter:_,cookieConsent:f}=e;Le=c||Le,(0,d.useEffect)((()=>{(async()=>{if(Le)H.updateRequestDomain({domain:Le});else{const{data:e}=await se.getLocation();H.updateRequestDomain({domain:e.domain}),Le=e.domain}})()}),[]),function(e,t=!0){(0,d.useEffect)((()=>{null==e||e.onChange((({firstPartyAnalytics:e})=>{e&&t&&(ve().start(),ve().clearInitQueue())}))}),[e,t])}(f,_);const[h,g]=(0,d.useState)(!1),[m,v]=(0,E.A)(void 0,{threshold:.1}),y=async r=>{var a;(new we).report({...(0,w.A)(e.reportParams,"aigc_content_id"),action:"submit",report_reason:r.report_param}),g(!0);const i=String(function(){const e=Math.pow(2,32)-1;return Math.floor(Math.random()*(e-1+1))+1}());let o=!0;try{await re.aigcReport({...r,id:i,report_type:9,extra:{ai_material:[{...n,object_id:i}]}}),(new be).report({...(0,w.A)(e.reportParams,"aigc_content_id"),action:"show",result:"success"})}catch(c){o=!1,null!=(a=null==c?void 0:c.data)&&a.ret&&"0"!==c.data.ret?s.A.error(u.F2.t("web_s2v_report_toast_went_wrong",{},"Something went wrong. Try again.")):s.A.error(u.F2.t("web_s2v_report_toast_internet",{},"Connect to the internet and try again."))}return o||(new be).report({...(0,w.A)(e.reportParams,"aigc_content_id"),action:"show",result:"fail"}),g(!1),o&&(null==t||t(r)),o},b=(0,d.useMemo)((()=>({type:"aigc",onOk:y,wrapClassName:i})),[y]);(0,d.useEffect)((()=>{ke.emit("updateSubmitLoading",h)}),[h]),(0,d.useEffect)((()=>{v&&(new ye).report({...o,action:"show"})}),[v,o]);const k=async()=>{(new ye).report({...o,action:"click"});try{await(e=>new Promise((t=>{const{reportParams:r,...n}=e,a=async r=>{var n;const a=await(null==(n=e.onOk)?void 0:n.call(e,r));return a&&t(r),a},i=()=>{(new we).report({...(0,w.A)(e.reportParams,"aigc_content_id"),action:"cancel"})},o=()=>{(new we).report({...(0,w.A)(e.reportParams,"aigc_content_id"),action:"show"})};let s=document.getElementById(Re);s?ke.emit("update",{...e,onOk:a,onCancel:i,afterOpen:o}):(s=document.createElement("div"),s.id=Re,document.body.appendChild(s),p.render(d.createElement(Ne,{...n,onOk:a,onCancel:i,afterOpen:o}),s))})))({...b,reportParams:o})}catch{}};return r?(0,l.jsx)("span",{className:S()(Te,a),onClick:k,ref:m,children:r}):(0,l.jsxs)("span",{className:S()(Te,a),onClick:k,ref:m,children:[(0,l.jsx)(A.AIL,{className:S()(xe,"aigc-report-icon")}),u.F2.t("web_s2v_report_hover_report",{},"Report")]})}},398:function(e,t,r){r.d(t,{SH:function(){return oa}});r(85333),r(13398),r(78436);var n=r(87176),a=r(77024),i=r(56741),o=r(38e3),s=r(67308),c=(r(13819),r(9932),r(14148)),l=r(7631),u=r(88617),d=r(57691),p=(r(33102),r(8608),r(81324),r(8706)),_=r(37814),f=r(41967),h=r(60162),g=r(42579),m=r.n(g),v=r(2633),y=r(90018),w=r(66279),b=(r(47583),r(84698),r(45475),r(91485),r(3501)),S=r(52131),E=(r(78790),r(10782)),A=r(30395),k=r.n(A),P=r(9837),I=r(63487),C=r.n(I),T=r(2799),x=r.n(T),R=r(19240),N=r(6055),L=(r(87025),r(14936),r(66696)),O=r(58519),D=r(67343),U=r(6525),j=r(85371),F=r(27594),M=r.n(F),B=r(83002),W=(r(40930),r(6822),r(85970)),z=r(5244),G=r.n(z),H=(r(89874),r(33430),r(45607),r(98634),r(70382),r(69628),r(62214)),$=r(69915),V=r(92057),Y=r(36096),q=r(89097),K=r(60591),J=r(11382),X=(r(47881),r(68742)),Z=r(23974),Q=r(46645),ee=(r(6321),r(63609),r(95904)),te=r(4663),re=(r(57069),r(16081)),ne=(r(39811),r(58367)),ae=r(20716),ie=Object.defineProperty,oe=(e,t,r)=>(((e,t,r)=>{t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const se=(0,s.createContext)({expandModalInstance:void 0,localeTranslation:{},handleClose:()=>{},isChangeSubTab:!1,setIsChangeSubTab:()=>{}});function ce(e,t){let r="";var n;r={b:e=>`${e.toFixed(2)}B`,kb:e=>`${(e/1024).toFixed(2)}KB`,mb:e=>`${(e/1048576).toFixed(2)}MB`,gb:e=>`${(e/1073741824).toFixed(2)}GB`,tb:e=>`${(e/1099511627776).toFixed(2)}TB`}[t||((n=e)<102.4?"b":n<104857.6?"kb":n<1073741824?"mb":n<1099511627776?"gb":"tb")](e);const a=`${r}`,i=a.indexOf(".");return"00"==a.substr(i+1,2)?a.substring(0,i)+a.substr(i+3,2):r}const le={PATH:"/thirdpartyCloudStorageAuth",LOCALE_PATH:"/thirdpartyCloudStorageAuth",MATCHER:"/thirdpartyCloudStorageAuth",HAS_LOCALE_PREFIX:!1},ue={PATH:"/editor-graphic",LOCALE_PATH:"/editor-graphic",MATCHER:"/editor-graphic",HAS_LOCALE_PREFIX:!1,INDEXING:!0},de={APP_NAME:"cc_web",APP_ID:"348188",APP_PF:"7",CHANNEL:"va",LAN:"en",B_ID:"cc_web",VERSION:"5.8.0",APP_SDK_VERSION:"48.0.0",USER_AGREEMENT:"",PRIVACY_POLICY:(e="en")=>{switch(e){case"tr-TR":return"https://www.capcut.com/tr-tr/privacy-policy";case"ja-JP":return"https://www.capcut.com/ja-jp/privacy-policy";case"ko-KR":return"https://www.capcut.com/ko-kr/privacy-policy";case"es-LA":return"https://www.capcut.com/es-es/privacy-policy";case"pt-BR":return"https://www.capcut.com/pt-br/privacy-policy";case"fr-FR":return"https://www.capcut.com/fr-fr/privacy-policy";case"de-DE":return"https://www.capcut.com/de-de/privacy-policy";case"it-IT":return"https://www.capcut.com/it-it/privacy-policy";case"th-TH":return"https://www.capcut.com/th-th/privacy-policy";case"id-ID":return"https://www.capcut.com/id-id/privacy-policy";case"vi-VN":return"https://www.capcut.com/vi-vn/privacy-policy";case"fil-PH":case"tl-PH":return"https://www.capcut.com/tl-ph/privacy-policy";case"ms-MY":return"https://www.capcut.com/ms-my/privacy-policy";default:return"https://www.capcut.com/privacy-policy"}},GOOGLE_PRIVACY_POLICY:(e="en")=>{switch(e){case"tr-TR":return"https://marketingplatform.google.com/about/analytics/terms/tr/";case"ko-KR":return"https://marketingplatform.google.com/about/analytics/terms/kr/";case"ja-JP":return"https://marketingplatform.google.com/about/analytics/terms/jp/";case"pt-BR":return"https://marketingplatform.google.com/about/analytics/terms/br/";case"es-LA":return"https://marketingplatform.google.com/about/analytics/terms/es/";case"fr-FR":return"https://marketingplatform.google.com/about/analytics/terms/fr/";case"de-DE":return"https://marketingplatform.google.com/about/analytics/terms/de/";case"it-IT":return"https://marketingplatform.google.com/about/analytics/terms/it/";case"th-TH":return"https://marketingplatform.google.com/about/analytics/terms/th/";case"id-ID":return"https://marketingplatform.google.com/about/analytics/terms/id/";case"vi-VN":return"https://marketingplatform.google.com/about/analytics/terms/vn/";case"fil-PH":case"tl-PH":return"https://marketingplatform.google.com/about/analytics/terms/ph/";default:return"https://marketingplatform.google.com/about/analytics/terms/us/"}},TERMS_OF_CAPCUT:(e="en")=>{switch(e){case"tr-TR":return"https://www.capcut.com/tr-tr/terms-of-service";case"ja-JP":return"https://www.capcut.com/ja-jp/terms-of-service";case"ko-KR":return"https://www.capcut.com/ko-kr/terms-of-service";case"es-LA":return"https://www.capcut.com/es-es/terms-of-service";case"pt-BR":return"https://www.capcut.com/pt-br/terms-of-service";case"fr-FR":return"https://www.capcut.com/fr-fr/terms-of-service";case"de-DE":return"https://www.capcut.com/de-de/terms-of-service";case"it-IT":return"https://www.capcut.com/it-it/terms-of-service";case"th-TH":return"https://www.capcut.com/th-th/terms-of-service";case"id-ID":return"https://www.capcut.com/id-id/terms-of-service";case"vi-VN":return"https://www.capcut.com/vi-vn/terms-of-service";case"fil-PH":case"tl-PH":return"https://www.capcut.com/tl-ph/terms-of-service";case"ms-MY":return"https://www.capcut.com/ms-my/terms-of-service";default:return"https://www.capcut.com/terms-of-service"}},COOKIE_POLICY:(e="en")=>{switch(e){case"tr-TR":return"https://www.capcut.com/tr-tr/cookies-policy";case"ja-JP":return"https://www.capcut.com/ja-jp/cookies-policy";case"ko-KR":return"https://www.capcut.com/ko-kr/cookies-policy";case"es-LA":return"https://www.capcut.com/es-es/cookies-policy";case"pt-BR":return"https://www.capcut.com/pt-br/cookies-policy";case"fr-FR":return"https://www.capcut.com/fr-fr/cookies-policy";case"de-DE":return"https://www.capcut.com/de-de/cookies-policy";case"it-IT":return"https://www.capcut.com/it-it/cookies-policy";case"th-TH":return"https://www.capcut.com/th-th/cookies-policy";case"id-ID":return"https://www.capcut.com/id-id/cookies-policy";case"vi-VN":return"https://www.capcut.com/vi-vn/cookies-policy";case"fil-PH":case"tl-PH":return"https://www.capcut.com/tl-ph/cookies-policy";case"ms-MY":return"https://www.capcut.com/ms-my/cookies-policy";default:return"https://www.capcut.com/cookies-policy"}},MATERIALS_POLICY:(e="en")=>{switch(e){case"tr-TR":return"https://www.capcut.com/tr-tr/material-license-agreement";case"ja-JP":return"https://www.capcut.com/ja-jp/material-license-agreement";case"ko-KR":return"https://www.capcut.com/ko-kr/material-license-agreement";case"es-LA":return"https://www.capcut.com/es-es/material-license-agreement";case"pt-BR":return"https://www.capcut.com/pt-br/material-license-agreement";case"fr-FR":return"https://www.capcut.com/fr-fr/material-license-agreement";case"de-DE":return"https://www.capcut.com/de-de/material-license-agreement";case"it-IT":return"https://www.capcut.com/it-it/material-license-agreement";case"th-TH":return"https://www.capcut.com/th-th/material-license-agreement";case"id-ID":return"https://www.capcut.com/id-id/material-license-agreement";case"vi-VN":return"https://www.capcut.com/vi-vn/material-license-agreement";case"fil-PH":case"tl-PH":return"https://www.capcut.com/tl-ph/material-license-agreement";case"ms-MY":return"https://www.capcut.com/ms-my/material-license-agreement";default:return"https://www.capcut.com/material-license-agreement"}},CREATOR_AGREEMENT:(e="en")=>{switch(e){case"tr-TR":return"https://www.capcut.com/tr-tr/creator-agreement";case"ja-JP":return"https://www.capcut.com/ja-jp/creator-agreement";case"ko-KR":return"https://www.capcut.com/ko-kr/creator-agreement";case"es-LA":return"https://www.capcut.com/es-es/creator-agreement";case"pt-BR":return"https://www.capcut.com/pt-br/creator-agreement";case"fr-FR":return"https://www.capcut.com/fr-fr/creator-agreement";case"de-DE":return"https://www.capcut.com/de-de/creator-agreement";case"it-IT":return"https://www.capcut.com/it-it/creator-agreement";case"th-TH":return"https://www.capcut.com/th-th/creator-agreement";case"id-ID":return"https://www.capcut.com/id-id/creator-agreement";case"vi-VN":return"https://www.capcut.com/vi-vn/creator-agreement";case"fil-PH":case"tl-PH":return"https://www.capcut.com/tl-ph/creator-agreement";case"ms-MY":return"https://www.capcut.com/ms-my/creator-agreement";default:return"https://www.capcut.com/creator-agreement"}},COMMUNITY_GUIDELINE:(e="en")=>{switch(e){case"tr-TR":return"https://www.capcut.com/tr-tr/community-guideline";case"ja-JP":return"https://www.capcut.com/ja-jp/community-guideline";case"ko-KR":return"https://www.capcut.com/ko-kr/community-guideline";case"es-LA":return"https://www.capcut.com/es-es/community-guideline";case"pt-BR":return"https://www.capcut.com/pt-br/community-guideline";case"fr-FR":return"https://www.capcut.com/fr-fr/community-guideline";case"de-DE":return"https://www.capcut.com/de-de/community-guideline";case"it-IT":return"https://www.capcut.com/it-it/community-guideline";case"th-TH":return"https://www.capcut.com/th-th/community-guideline";case"id-ID":return"https://www.capcut.com/id-id/community-guideline";case"vi-VN":return"https://www.capcut.com/vi-vn/community-guideline";case"fil-PH":case"tl-PH":return"https://www.capcut.com/tl-ph/community-guideline";case"ms-MY":return"https://www.capcut.com/ms-my/community-guideline";default:return"https://www.capcut.com/community-guideline"}}};var pe=(e=>(e[e.TASK_CANNOT_BE_CANCELED=200400]="TASK_CANNOT_BE_CANCELED",e[e.TASK__NOT_EXIST_1=200402]="TASK__NOT_EXIST_1",e[e.TASK__NOT_EXIST_2=1e3]="TASK__NOT_EXIST_2",e))(pe||{});var _e=(e=>(e[e.ERR_CTEATE_WORKSPACE_OVER_MAX_SIZE=2312]="ERR_CTEATE_WORKSPACE_OVER_MAX_SIZE",e[e.ERR_Hit_Sensitive_Word=2334]="ERR_Hit_Sensitive_Word",e))(_e||{}),fe=(e=>(e[e.ERR_UPLOAD_LINK_NOT_EXIST=2341]="ERR_UPLOAD_LINK_NOT_EXIST",e))(fe||{});var he=(e=>(e.noNormalVideo="fe-200000",e.onlyOneShare="200205",e.fileNotExit="2360",e.fileNotFound="2345",e.fileUnderReviewVisitLimit="2390",e.getFileFailed="2350",e.shareNotExit="2361",e.shareOff="2348",e.notLogin="1015",e.maxVisitors="200212",e.passwordError="2349",e.noVersion="noVersion",e.notCluster="notCluster",e.needIdentifyingCode="2362",e.noAllowJoin="2306",e))(he||{});const ge={EVER_CLOUD:{BELOW_VERSION:40008,INSUFFICIENT_SPACE:20113,INVALID_IDC:1037},WEB_CUSTOME_CODE:{ASSET_TRANSCODE_FAIL:-11001},NO_SIGN_UPLOAD:{ACCESS_TIME_LIMIT:"200201",SOURCE_IS_OVERTIME:"200202",VIDEO_TRANSCODE_FAIL:"4010"},COMMENT:{Err_NoCommentPermission:2363,Err_CommentPublishFailed:2364,Err_CommentPublishFailedDuplication:2365,Err_CommentPublishingProhibited:2366,Err_CommentPublishFailedRateLimit:2367,Err_CommentPublishFailedRiskControl:2368,Err_CommentDeletionFailed:2369,Err_DeletionFailedNoPermission:2370,Err_CommentListFetchFailed:2371,Err_ShareToGroupMermberFailed:2372},FILM_CODE:pe,COMMERCE:{ALREADY_SUBSCRIBE_USER:"34010104"},SIGN_UP_CODE:{SEND_CODE_ERROR_CODE:{SENDING_FREQUENTLY:1206,EMAIL_ERROR:1044},REGISTER_ERROR_CODE:{CODE_WRONG:1704,CODE_EXPIRED:1703},LOGIN_ERROR_CODE:{PASSWORD_WRONG:1009,USER_NOT_EXITE:1011,USER_ACCOUNT_CANCEL:1075}},USER_CODE:{NO_LOGIN:1015},CREATE_WORKSPACE_CODE:_e,PIPO:{REFRESH_USER_SPACE_FAILURE:"34100001"},WORKSPACE_UPLOAD_LINK_CODE:fe,GROUP:{INVITATION_LINK_REFRESH_TOO_FAST:1270,USER_NOT_IN_GROUP:1363,CREATE_GROUP_TOO_FAST:1269,EXCEEDED_CREATE_GROUPS_MAX_LIMIT:1287,EXCEEDED_USER_GROUPS_MAX_LIMIT:1299,INVITATION_LINK_EXPIRED:1267,ADD_GROUP_TOO_FAST:1268,EXCEEDED_GROUP_MEMBERS_MAX_LIMIT:1280,REPEAT_ADD_GROUP:1286,INVITATION_LINK_ERROR:1367,SHARE_LINK_EXPIRED:1450,GROUP_APPLY_LIMIT:1463,SAME_GROUP_APPLY_LIMIT:1464,GROUP_APPLY_PENDING:1468,GROUP_APPLY_NOT_ALLOW:1469,GROUP_APPLY_PASSED:1286,APPLY_APPROVE_NO_AUTH:1292,NOT_IN_GROUP:1291,APPROVAL_PROCESSED:1467,GROUP_MEMBER_FULL:1280,APPROVAL_EXPIRED:1470},SHARE:{FILE_NO_ACCESS:"2317",FILE_NOT_FOUND:"2345",FILE_BANNED:"2360",SHARE_INFO_NOT_FOUND:"2361",FILE_UPLOADING:"2386",ERROR_GET_SHARED_INFO:"2377"},AUTHORIZED:{GOOGLE_UNAUTHORIZED:1904},SHARE_ERROR_CODE:he},me={RECENT_LIST_FILE_TYPE:"RECENT_LIST_FILE_TYPE",RECENT_LIST_VIEW_TYPE:"RECENT_LIST_VIEW_TYPE",LIST_VIEW_TYPE:"LIST_VIEW_TYPE",LIST_DISPLAY_TYPE:"LIST_DISPLAY_TYPE",LIST_SORT_BY:"LIST_SORT_BY",RECYCLE_LIST_SORT_BY:"RECYCLE_LIST_SORT_BY",LIST_SORT_DIRECTION:"LIST_SORT_DIRECTION",RECYCLE_LIST_SORT_DIRECTION:"RECYCLE_LIST_SORT_DIRECTION",COOKIE_CONSENT_PROMPT_CONFIG:"COOKIE_CONSENT_PROMPT_CONFIG",THIRTPARTY_FEEDBACK:"THIRTPARTY_FEEDBACK",LV_TASK_CENTER:"LV_TASK_CENTER",THIRDPARTY_CLOUD_AUTH:"THIRDPARTY_CLOUD_AUTH",SURVEY_OPEN:"SURVEY_OPEN",CLOUD_STORAGE_PAYMENT_AND_BINDING:"CLOUD_STORAGE_PAYMENT_AND_BINDING",THIRDPARTY_SHARE_AUTH:"THIRDPARTY_SHARE_AUTH",CAPCUT_THEME:"CAPCUT_THEME",CAPCUT_TEMPLATE_VIDEO_VOLUME:"CAPCUT_TEMPLATE_VIDEO_VOLUME",GUIDE_FROM_TEAM_INVITE:"GUIDE_FROM_TEAM_INVITE",GUIDE_FROM_SIGN_UP:"GUIDE_FROM_SIGN_UP",COMPREHENSIVE_SEARCH_HISTORY:"COMPREHENSIVE_SEARCH_HISTORY",CC_WEB_IM_CONFIG:"CC_WEB_IM_CONFIG"};var ve=(e=>(e.US="US",e.BR="BR",e.SG="SG",e.KR="KR",e.ID="ID",e.GB="GB",e.CA="CA",e.AU="AU",e.NZ="NZ",e))(ve||{}),ye=(e=>(e.DEFAULT="DEFAULT",e.COMMERCE="COMMERCE",e.FRONTIER="FRONTIER",e.TTS="TTS",e))(ye||{});const we="https://mweb-api.capcutapi.com";var be=(e=>(e.Dropbox="Dropbox",e.GoogleDrive="GoogleDrive",e.GoogleContacts="GoogleContacts",e.Shopify="Shopify",e))(be||{}),Se=(e=>(e.Dropbox="dropbox",e.GoogleDrive="google_drive",e.GoogleDriveMarketPlace="google_mp",e.Shopify="shopify",e.DropboxImport="dropbox",e))(Se||{});const Ee=e=>{switch(e){case"Dropbox":default:return"web_space_upload_dropbox";case"GoogleDrive":return"web_space_upload_googledrive"}},Ae="1093504901008-cmpv0g4d9k4fd1g6aas7n2bpra6mulu5.apps.googleusercontent.com",ke="87571557143-3quv34dc1ier93o3h1kjjieocm0u6bo5.apps.googleusercontent.com",Pe={video:[".mp4",".mov",".m4v",".flv",".mkv",".avi",".webm",".wmv",".rm",".rmvb",".3gp",".m2ts",".mt2s",".m2t",".mxf",".mpg",".mpeg",".mpe",".ts"],audio:[".mp3",".flac",".m4a",".wav",".aac",".oga",".ogg",".wma",".amr",".aif",".aiff",".ac3",".mpa",".ape",".mac",".mp2",".acc"],image:[".jpeg",".jpg",".png",".gif",".heif",".heic"]};var Ie=(e=>(e.LandingPage="landing_page",e.DetailPage="detail_page",e.Editor="editor",e.WorkSpace="work_space",e.IntegrationPage="integration_page",e.ArticlePage="article_page",e.ArticleGroupPage="article_group_page",e.ExportPage="export_page",e.TowardsPage="towards_page",e.UGTemplateDetail="towards_page_template_detail",e.HashtagPage="hashtag_page",e.CategoryPage="category_page",e.TemplatePage="template_page",e.CreatorPage="creator_page",e.UGArticlePage="ug_article_page",e.TemplateDetailPage="template_detail_page",e.EDMPage="edm_page",e.TemplateEditor="template_editor",e.PictureEdit="picture_edit",e.SmartToolPage="smart_tool_page",e.ActivityMur101="mur101",e.ActivityMur103="mur103",e.SharePage="share_page",e.PersonalPage="personal_page",e.KocR1PC="koc_r1_pc",e))(Ie||{}),Ce=(e=>(e.TikTok="TikTok",e.TTAM="TTAM",e.YouTube="YouTube",e.YouTubeShorts="YouTubeShorts",e.Instagram="Instagram",e.InstagramReels="InstagramReels",e.FacebookPage="FacebookPage",e.FacebookGroup="FacebookGroup",e.Shopify="Shopify",e.Dropbox="Dropbox",e))(Ce||{}),Te=(e=>(e[e.PAGE=0]="PAGE",e[e.GROUP=1]="GROUP",e[e.INSTAGRAM=2]="INSTAGRAM",e))(Te||{});Ce.FacebookPage,Ce.FacebookGroup,Ce.Instagram,Ce.InstagramReels;var xe=(e=>(e[e.YouTube=0]="YouTube",e[e.YouTubeShorts=1]="YouTubeShorts",e))(xe||{});Ce.YouTube,Ce.YouTubeShorts;const Re={Indonesian:{key:"id-ID",pathPrefix:"id-id",disable:!1,matcher:/^id/,text:"Bahasa Indonesia"},German:{key:"de-DE",pathPrefix:"de-de",disable:!1,matcher:/^de/,text:"Deutsch"},English:{key:"en",pathPrefix:"",disable:!1,matcher:/^en/,text:"English"},Spanish:{key:"es-LA",pathPrefix:"es-es",disable:!1,matcher:/^es/,text:"Espa\xf1ol"},French:{key:"fr-FR",pathPrefix:"fr-fr",disable:!1,matcher:/^fr/,text:"Fran\xe7ais"},italian:{key:"it-IT",pathPrefix:"it-it",disable:!1,matcher:/^it/,text:"Italiano"},Malay:{key:"ms-MY",pathPrefix:"ms-my",disable:!1,matcher:/^ms/,text:"Melayu"},Dutch:{key:"nl-NL",pathPrefix:"nl-nl",disable:!1,matcher:/^nl/,text:"Nederlands"},Polish:{key:"pl-PL",pathPrefix:"pl-pl",disable:!1,matcher:/^pl/,text:"Polski"},Portuguese:{key:"pt-BR",pathPrefix:"pt-br",disable:!1,matcher:/^pt/,text:"Portugu\xeas"},Romanian:{key:"ro-RO",pathPrefix:"ro-ro",disable:!1,matcher:/^ro/,text:"Rom\xe2n\u0103"},Swedish:{key:"sv-SE",pathPrefix:"sv-se",disable:!1,matcher:/^sv/,text:"Svenska"},Filipino:{key:"fil-PH",pathPrefix:"tl-ph",disable:!1,matcher:/^(tl|fil)/,text:"Tagalog"},vietnamese:{key:"vi-VN",pathPrefix:"vi-vn",disable:!1,matcher:/^vi/,text:"Ti\u1ebfng Vi\u1ec7t"},Turkey:{key:"tr-TR",pathPrefix:"tr-tr",disable:!1,matcher:/^tr/,text:"T\xfcrk\xe7e"},Thai:{key:"th-TH",pathPrefix:"th-th",disable:!1,matcher:/^th/,text:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22"},Japan:{key:"ja-JP",pathPrefix:"ja-jp",disable:!1,matcher:/^ja/,text:"\u65e5\u672c\u8a9e"},TraditionalChinese:{key:"zh-Hant-TW",pathPrefix:"zh-tw",disable:!1,matcher:/^zh/,text:"\u7e41\u9ad4\u4e2d\u6587"},Korea:{key:"ko-KR",pathPrefix:"ko-kr",disable:!1,matcher:/^ko/,text:"\ud55c\uad6d\uc5b4"}};Object.values(Re).reduce(((e,t)=>(t.pathPrefix&&(e[t.key]=t.pathPrefix),e)),{});var Ne=(e=>(e.owner="owner",e.admin="admin",e.collaborator="collaborator",e))(Ne||{});Number(he.noAllowJoin);const Le={US:"11202206H2pXg2",GB:"11202205Wsj3E1",CA:"11202203Laxp61",AU:"11202203Laxp61",DE:"11202203Laxp61",FR:"11202203Laxp61",IT:"11202203Laxp61",ES:"11202203Laxp61",TR:"11202203Laxp61"},Oe=(e,t)=>e?"11202207M3BvW9":Le[t.toUpperCase()]??"11202206H2pXg2";var De=(e=>(e.PICTURE_TEMPLATE="3",e.TOC_TEMPLATE="0",e.TOB_TEMPLATE="1",e.TOWEB_TEMPLATE="4",e))(De||{});const Ue="object"==typeof navigator&&/(capcut.*lv\/([\d+.]+)|lv\/([\d+.]+).*capcut)/i.test(navigator.userAgent),je="utm_source",Fe="utm_campaign";const Me=new class{get sdk(){if(!(typeof window>"u"))return null==window?void 0:window.ccWebSlardar}init(e){var t;null==(t=this.sdk)||t.call(this,"init",e)}start(){var e;null==(e=this.sdk)||e.call(this,"start")}config(e){var t;null==(t=this.sdk)||t.call(this,"config",e)}error(e,t,r={}){var n;const a=null!=r&&r.level?null==r?void 0:r.level:"warn",i=(0,h.A)(t)?(e=>{const t=new Error(e.message);return t.name=e.name,t.stack=e.stack,t.message=e.message,t})(t):new Error(JSON.stringify(t)),{message:o}=i;i.message=`\u3010Custom-Error\u3011:${e}-${r.toGroup?"MoreDataInExternal":null==i?void 0:i.message}`,r.toGroup&&(Object.assign(r,{message:o}),delete r.toGroup),null==(n=this.sdk)||n.call(this,"captureException",i,{...r,level:a})}dataEvent(e,t={}){var r;const n=null!=t&&t.level?null==t?void 0:t.level:"info",a=(0,_.A)(t,f.A);null==(r=this.sdk)||r.call(this,"sendEvent",{name:`\u3010Custom-Data\u3011: ${e}`,metrics:a,categories:{...t,level:n}})}log(e,t={}){var r;const n=null!=t&&t.level?null==t?void 0:t.level:"info";null==(r=this.sdk)||r.call(this,"sendLog",{content:`\u3010Custom-Log\u3011: ${e}`,level:n,extra:{...t}})}setCurrentBranch(e=""){var t;e&&(null==(t=this.sdk)||t.call(this,"context.set","branch",e))}},Be=e=>{const t=navigator.userAgent.toLowerCase(),{mobile:r,name:n,version:a,os:i=""}=(0,B.A)(e),o=navigator.maxTouchPoints||NaN,s=navigator.platform||"";return{env:r?"mobile":"pc",name:n,version:a,isMobile:!!r,isWechat:/micromessenger/.test(t),isQQ:/qq/.test(t),isWeibo:/weibo/.test(t),isLv:/lv/.test(t),isAndroid:/android/.test(t),isIos:/ios/.test(i)||/iPad|iPhone|iPod/i.test(t)||/MacIntel/i.test(s)&&o>1,isMac:/macintosh|mac os x/i.test(i.toLowerCase())||/os x /i.test(i.toLowerCase()),isWin:/windows|win32|win64/i.test(i.toLowerCase())}};(0,s.createContext)({locale:void 0});const We=()=>{var e;let t="";return typeof window<"u"&&(t=(null==(e=window.location)?void 0:e.originParams)||location.search),"object"==typeof t&&(t=function(e){const t=[];return Object.keys(e).forEach((r=>{const n=e[r];Array.isArray(n)?n.forEach((function(e){t.push(`${r}=${e}`)})):t.push(`${r}=${n}`)})),t.join("&")}(t)),t},ze=e=>{var t;if(Array.isArray(e)){const r=new URLSearchParams(null==(t=null==window?void 0:window.location)?void 0:t.search);for(const t of e)r.delete(t),window.location.originParams&&delete window.location.originParams[t];const n=`${window.location.href.split("?")[0]}?${r.toString()}`;history.replaceState("",document.title,n)}};function Ge(e){const t=We();return new URLSearchParams(t).get(e)}class He{static getString(e){return typeof window>"u"||!navigator.cookieEnabled?null:localStorage.getItem(e)}static setString(e,t){if(!(typeof window>"u")&&navigator.cookieEnabled)return localStorage.setItem(e,t)}static getJsonWithEmptyJson(e){let t;try{const r=typeof localStorage<"u"&&localStorage.getItem(e)||"{}";t=JSON.parse(r)}catch(r){Me.error("LocalStorage-getJsonWithEmptyJson()",r)}return t}static getJson(e){if(typeof window>"u"||!navigator.cookieEnabled)return;const t=typeof localStorage<"u"&&localStorage.getItem(e);let r;if(t){try{r=JSON.parse(t)}catch(n){Me.error("localStorage-parse(origin)",n)}return r}}static setJson(e,t){if(!(typeof window>"u")&&navigator.cookieEnabled)try{localStorage.setItem(e,JSON.stringify(t))}catch(r){Me.error("localStorage-set",r)}}static getNestedJsonItem(e,t){return this.getJsonWithEmptyJson(e)[t]??{}}static setNestedJsonItem(e,t,r){const n=this.getJsonWithEmptyJson(e),a=n[t]??{},i={...n,[t]:{...a,...r}};try{this.setJson(e,i)}catch(o){Me.error("localStorage-set",o)}}static removeItem(e){typeof window>"u"||!navigator.cookieEnabled||localStorage.removeItem(e)}}function $e(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}function Ve(e){var t;const r={url:e.baseURL&&e.url?$e(e.baseURL,e.url):"",method:null==(t=null==e?void 0:e.method)?void 0:t.toUpperCase(),params:"string"==typeof e.params?JSON.parse(e.params):e.params,data:"string"==typeof e.data?JSON.parse(e.data):e.data,needCommonParams:!0,responseType:e.responseType??"json"};return R.Ay.app.fetch(r)}async function Ye(e){const t=await Ve(e);return new Promise(((r,n)=>{if(1!==t.code)n(t);else try{!function(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new T.AxiosError("Request failed with status code "+r.status,[T.AxiosError.ERR_BAD_REQUEST,T.AxiosError.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}(r,n,{data:JSON.parse(t.data.response),status:t.data.status,config:e,request:Ve})}catch(a){n(a)}}))}class qe{constructor(){oe(this,"_hasBeenDone",!1),oe(this,"_isIniting",!1),oe(this,"resolveResult"),oe(this,"rejectResult"),oe(this,"_initCostTimes"),oe(this,"_waitingResolvers",new Set),oe(this,"_waitingResolverMap",new Map)}get hasBeenDone(){return this._hasBeenDone}get costTimes(){if(!this._initCostTimes)return;const{start:e,end:t}=this._initCostTimes;return(t||Date.now())-e}get initResult(){if(this._hasBeenDone)return{resolve:this.resolveResult,reject:this.rejectResult}}get isIniting(){return this._isIniting}awaitForInit({key:e,timeout:t}={}){if(this._hasBeenDone&&this.initResult){const{resolve:e,reject:t}=this.initResult;return t?Promise.reject(t):Promise.resolve(e)}if(e&&this._waitingResolverMap.has("key"))return this._waitingResolverMap.get("key");if(!t){const t=new Promise(((e,t)=>{this._waitingResolvers.add([e,t])}));return e&&this._waitingResolverMap.set(e,t),t}let r,n;const a=Promise.race([new Promise(((e,t)=>{r=[()=>{clearTimeout(n),e()},t],this._waitingResolvers.add([r,t])})),new Promise(((e,a)=>{n=setTimeout((()=>{this._waitingResolvers.delete(r),a(new Error("Timed out waiting for init"))}),t)}))]);return e&&this._waitingResolverMap.set(e,a),a}startToInit(){return!this._hasBeenDone&&!this._isIniting&&(this._isIniting=!0,this._initCostTimes={start:Date.now()},!0)}initDone(e){if(this._hasBeenDone)throw new Error("Cannot release an inited locker");this._initCostTimes&&(this._initCostTimes.end=Date.now());let t=!1;null!=e&&e.reject?(t=!0,this.rejectResult=e.reject):this.resolveResult=null==e?void 0:e.resolve;for(const r of this._waitingResolvers)t?r[1](this.rejectResult):r[0](this.resolveResult);this._waitingResolverMap.clear(),this._waitingResolvers.clear(),this._hasBeenDone=!0,this._isIniting=!1}}const Ke="custom-request-domain";const Je=new class{constructor(){oe(this,"_locker",new qe),oe(this,"_userRequestDomain")}getWebDomain(){return this._userRequestDomain.domain.web_domain}updateRequestDomain(e){e.domain&&(this._locker.hasBeenDone||this._locker.initDone(),this._userRequestDomain=e)}async baseRequestInterceptors(e){var t,r,n,a,i,o,s;const c=null==(t=e.baseURL)?void 0:t.startsWith("https");(null==(r=null==e?void 0:e[Ke])||!r.skipAwaitLocker)&&!c&&await this._locker.awaitForInit();const l=null==(n=null==e?void 0:e[Ke])?void 0:n.domain,u=(null!=e&&e.useCommerceApi?ye.COMMERCE:ye.DEFAULT)===ye.COMMERCE?null==(i=null==(a=this._userRequestDomain)?void 0:a.domain)?void 0:i.commerce_domain:Ue?we:null==(s=null==(o=this._userRequestDomain)?void 0:o.domain)?void 0:s.web_domain,d=l||u;return!c&&d&&(e.baseURL=`${l||d}${e.baseURL}`),{...e,withCredentials:!0}}createAxios(e){const t=Ue?x().create({...e,adapter:Ye}):x().create(e);return t.interceptors.request.use(this.baseRequestInterceptors.bind(this)),t}};var Xe=(e=>(e.INIT="INIT",e.PENDING="PENDING",e.SUCCESS="SUCCESS",e.FAIL="FAIL",e))(Xe||{}),Ze=(e=>(e.AUTO="auto",e.UNAUTO="unauto",e))(Ze||{}),Qe=(e=>(e.BOE="boe",e.SG="sg",e.VA="va",e))(Qe||{}),et=(e=>(e.Month="month",e.Year="year",e))(et||{}),tt=(e=>(e[e.null=0]="null",e[e.Image=1]="Image",e[e.Video=2]="Video",e))(tt||{}),rt=(e=>(e[e.null=0]="null",e[e.GoogleDrive=1]="GoogleDrive",e))(rt||{}),nt=(e=>(e[e.Pending=1]="Pending",e[e.Running=2]="Running",e[e.Success=3]="Success",e[e.Fail=4]="Fail",e[e.Abnormal=5]="Abnormal",e))(nt||{});const at=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);const it="custom-axios-retry",ot=["get","head","options"].concat(["put","delete"]);function st(e){const t=(null==e?void 0:e[it])||{canRetry:!0};return t.retryCount=t.retryCount||0,t}const ct=()=>0;function lt(e){return!e.response&&!!e.code&&"ECONNABORTED"!==e.code&&function(e){return!at.has(e&&e.code)}(e)}function ut(e){return lt(e)||function(e){return!!e.config&&function(e){return"ECONNABORTED"!==e.code&&(!e.response||e.response.status>=500&&e.response.status<=599)}(e)&&-1!==ot.indexOf(e.config.method)}(e)}function dt(e,t){return e.interceptors.request.use((e=>{const t=st(e);return t.lastRequestTime=Date.now(),e[it]=t,e})),e.interceptors.response.use(void 0,(r=>{const{config:n}=r;if(!n)return Promise.reject(r);const{retries:a=5,isRetry:i=ut,retryDelay:o=ct,resetTimeout:s=!1}=Object.assign({},t,null==n?void 0:n[it]),c=st(n);if(i(r)&&c.canRetry&&(-1===a||c.retryCount<a)){c.retryCount+=1;const t="number"==typeof o?o:o(c.retryCount,r);if(function(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}(e,n),!s&&n.timeout&&c.lastRequestTime){const e=Date.now()-c.lastRequestTime;n.timeout=Math.max(n.timeout-e-t,1)}return n.transformRequest=[e=>e],new Promise((r=>setTimeout((()=>r(e(n))),t)))}return Promise.reject(r)})),e}function pt({url:e,pf:t,appvr:r,tdid:n}){const a=Math.floor(Date.now()/1e3);return{sign:C()(`9e2c|${e.slice(-7)}|${t}|${r}|${a}|${n}|11ac`).toLowerCase(),"device-time":a}}const _t={baseURL:"/lv/v1/user",method:"POST",headers:{loc:de.CHANNEL,lan:c.Ay.language||de.LAN,pf:de.APP_PF,appvr:de.VERSION,tdid:"","sign-ver":1,"app-sdk-version":de.APP_SDK_VERSION},params:{}},ft=Je.createAxios(_t);ft.interceptors.request.use((e=>{const{pf:t,appvr:r,tdid:n}=_t.headers;return Object.assign(e.headers,pt({url:`${e.baseURL}${e.url}`,pf:t,appvr:r,tdid:n})),e})),ft.interceptors.response.use((e=>{if(200===e.status){const t=e.data;return"0"===t.ret?Promise.resolve(t.data):Promise.reject(e)}return Promise.reject(e)})),dt(ft,{retries:5,resetTimeout:!0,retryDelay:1e3,isRetry:e=>{var t;return![ge.USER_CODE.NO_LOGIN,ge.AUTHORIZED.GOOGLE_UNAUTHORIZED].includes(Number(null==(t=null==e?void 0:e.data)?void 0:t.ret))}});const ht={async getAndUpdateUserInfo(e){const t="/web/user_info";return await ft({url:Ue?`${we}${_t.baseURL}${t}`:`${window.location.origin}${_t.baseURL}${t}`,data:e,[Ke]:{skipAwaitLocker:!0}})},async getUserInfo(e){return await ft({url:`${window.location.origin}${_t.baseURL}/web/get_user_info`,data:{uid:e,need_grade:!1},[Ke]:{skipAwaitLocker:!0}})},async updateUser(e){return await ft({url:"/update",data:e})},async thirtpartCloudsDeauthorization(e){return await ft({url:"/web/third_party_clouds_deauthorization",data:e})},async authorizationCheck(e){return await ft.post("/web/third_party_clouds_authorization_check",e)},async getShareUserInfo(e){return await ft({url:"/web/share_user_info",data:e})},async shareUserUnbind(e){return await ft({url:"/web/third_party_platform_deauthorization",data:e})},async checkAgeGate(){return await ft({url:"/check_age_gate",data:{}})},async confirmBirthday(e){return await ft({url:"/confirm_birthday",data:e})},async updateBirthday(e){return await ft({url:"/update_birthday",data:e})},getFacebookShareList(e){return ft.post("/web/get_facebook_page_or_group_list",e)},async getOpenId(){return await ft({baseURL:"/lv/v1",url:"/web/openid"})},async saveTTScope(e){return await ft({baseURL:"/lv/v1",url:"/third_party_clouds/save_tt_scope",data:e})},async checkBindEmailPopup(){return await ft({url:"/web/check_bind_email_popup"})},async edmAuthorize(e){return await ft({url:"/web/edm_authorize",data:{setting_values:null!=e&&e.checked?"on":"off"}})},async getUserContacts(e){return await ft({url:"/web/third_party_get_contacts",data:e})},async getAuthorizedUserInfo(e){return await ft({url:"/web/authorized_user_info",data:e})},async appealForUser(e){return await ft({baseURL:"/lv/v1",url:"/appeal/personal_info",data:e})}},gt={baseURL:"",method:"POST",headers:{loc:de.CHANNEL,lan:c.Ay.language||de.LAN,pf:de.APP_PF,appvr:de.VERSION,tdid:"","sign-ver":1,"app-sdk-version":de.APP_SDK_VERSION}},mt=Je.createAxios(gt);mt.interceptors.response.use((e=>{if(200===e.status){const t=e.data;return"0"===t.ret?Promise.resolve(t.data):Promise.reject(e)}return Promise.reject(e)})),dt(mt,{retries:5,resetTimeout:!0,retryDelay:1e3,isRetry:e=>{var t;return Number(null==(t=null==e?void 0:e.data)?void 0:t.ret)!==ge.EVER_CLOUD.INVALID_IDC}});const vt={async getEverPhotoToken(){const e="/lv/v1/ever_photo/get_token",{pf:t,appvr:r,tdid:n}=gt.headers;return await mt({url:e,data:{},headers:{...pt({url:e,...gt.headers,pf:t,appvr:r,tdid:n})}})},async getWorkspaceEverPhotoToken(){const e="/cc/v1/workspace/get_ever_photo_token",{pf:t,appvr:r,tdid:n}=gt.headers;return await mt({url:e,data:{},headers:{...pt({url:e,...gt.headers,pf:t,appvr:r,tdid:n})}})},async getEverPhotoUserSpace(e){const t="/lv/v1/ever_photo/get_user_space",{pf:r,appvr:n,tdid:a}=gt.headers;return await mt({url:t,data:{workspace_id:e},headers:{...pt({url:t,...gt.headers,pf:r,appvr:n,tdid:a})}})},async promoteAsset(e){const t="/lv/v1/ever_photo/promote_asset",{pf:r,appvr:n,tdid:a}=gt.headers;return await mt({url:t,data:{asset_id:e.assetId,space_id:e.spaceId,workspace_id:e.workspaceId},headers:{...pt({url:t,...gt.headers,pf:r,appvr:n,tdid:a})}})},async getDownloadUrl(e){const t="/lv/v1/ever_photo/get_external_download_url",{pf:r,appvr:n,tdid:a}=gt.headers;return await mt({url:t,data:{asset_id:e.assetId,workspace_id:e.workspaceId,max_time:e.maxTime,ttl:e.ttl},headers:{...pt({url:t,...gt.headers,pf:r,appvr:n,tdid:a})}})}},yt=new Map;async function wt(e,{cacheKey:t,maxAge:r=36e5}){const n=yt.get(t);if(n&&(new Date).getTime()-n.cacheStartTime<n.maxAge)try{return await n.promise,n.promise}catch{}const a=e();return yt.set(t,{promise:a,cacheStartTime:(new Date).getTime(),maxAge:r}),a}const bt={baseURL:"/commerce",method:"POST",headers:{appid:de.APP_ID,loc:de.CHANNEL,lan:c.Ay.language||de.LAN,pf:de.APP_PF,appvr:de.VERSION,tdid:"","sign-ver":1,"app-sdk-version":de.APP_SDK_VERSION},useCommerceApi:!0},St=Je.createAxios(bt);St.interceptors.request.use((e=>{const{pf:t,appvr:r,tdid:n}=bt.headers;return Object.assign(e.headers,pt({url:`${e.baseURL}${e.url}`,pf:t,appvr:r,tdid:n})),e})),St.interceptors.response.use((e=>{var t,r,n;if(200===e.status){const a=e.data;return"0"===a.ret?null!=(t=null==e?void 0:e.config)&&t.url&&e.config.url.indexOf("user_info")>0?Promise.resolve({data:a.data,signContext:{sign:a.sign,ret:a.ret,response:a.response,"device-time":null==(n=null==(r=null==e?void 0:e.config)?void 0:r.headers)?void 0:n["device-time"],systime:null==a?void 0:a.systime}}):Promise.resolve(a.data):Promise.reject(e)}return Promise.reject(e)})),dt(St,{retries:5,resetTimeout:!0,retryDelay:1e3,isRetry:()=>!0});const Et={async getSubscriptionUserInfo(e){const t=await St({url:"/v1/subscription/user_info",data:{aid:de.APP_ID,scene:"vip",from_db:e}}),{data:n,signContext:a}=t,i={appid:de.APP_ID,appvr:de.VERSION,"device-time":null==a?void 0:a["device-time"],pf:de.APP_PF,response:null==a?void 0:a.response,ret:a.ret,systime:null==a?void 0:a.systime},{sign:o}=a;if(o){const e=await(async(e,t,n)=>{const a=new(0,(await r.e(4448).then(r.bind(r,54448))).default);return a.setPublicKey(n),a.verify(e,t,M().SHA256)})((e=>{const t=[];return Object.entries(e).forEach((e=>{(0,j.A)(e[1])||t.push(`${e[0]}=${e[1]}`)})),t.join("&")})(i),o,"-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC1I/Ml9Qkp6reos86Tjbd1R6q+\nbQwviSEmZzqtrhfGI+iMGKA74XSctUu8ZnWhOKsG5+PujMrIJX2WMRP0E5lhJpCh\nfgK3aiNikvgigORzf0Lz39XS46eAHJrPbMaQiabDfd/+CjkvxbV+LW3oPdoZj9Mn\n38OEHt9qVkUlvpv76wIDAQAB\n-----END PUBLIC KEY-----");if(a.sign&&e)return n;throw Error("Error: Auth sign")}throw Error("Error: Auth sign")},async getSpaceList(e){const t="/v1/subscription/workspace/space_list",r=pt({url:t,...bt.headers}),n=await St({url:t,headers:{...r},data:{aid:Number(de.APP_ID),workspace_id:e}});return{spaceList:n.space_list,isFirstSubscribe:n.is_first_subscribe,isAutoSubscribe:n.is_auto_subscribe,isWebAutoSubscribe:n.is_web_auto_subscribe,isCancelSubscribe:n.is_cancel_subscribe,jointActivitySpaceList:n.joint_activity_space_list}},async getPriceList(e){const t="/v1/subscription/cc_web_price_list",r=pt({url:t,...bt.headers}),n={aid:Number(de.APP_ID),scene:"workspace",region:e},[a,i]=await wt((()=>Promise.all([St({url:t,headers:{...r},data:n}),St({url:t,headers:{...r},data:{...n,scene:"web"}})])),{cacheKey:`promiseCache_getPriceList_${JSON.stringify(n)}`}),o=a.all_price_list.reduce(((e,t)=>(e[t.product_id]=t,e)),{}),s=a.tab_list.map((e=>({as_default:e.as_default,products:e.product_ids.map((e=>o[e]))})));return{allPriceList:[...a.all_price_list,...i.all_price_list],groupProductList:s,ccWebDisplayInfo:a.cc_web_display_info}},async getSubscriptionList(e){return await St({url:"/v1/subscription/order_record_list",data:{aid:Number(de.APP_ID),workspace_id:e,cursor:0,count:1}})},async getVipPriceList(e,t="en"){const r={aid:de.APP_ID,scene:"vip",region:e,language:t},n=await wt((()=>St({url:"/v1/subscription/cc_price_list",data:r})),{cacheKey:`promiseCache_getSubscriptionPriceList_${JSON.stringify(r)}`}),a={month:[],year:[]};return n.all_price_list.forEach((e=>{const{cycle_unit:t,subscribe_cycle:r}=e;"MONTH"===t&&12!==r?a.month.push(e):a.year.push(e)})),{allVipPriceList:n.all_price_list,vipGroupProductList:a,ccWebDisplayInfo:n.cc_web_display_info}},async getSubscribeInfo(e="en"){return await St({url:"/v1/subscription/get_subscribe_info",data:{language:e}})}},At={baseURL:"/lv/v1/user",method:"POST",headers:{loc:de.CHANNEL,lan:c.Ay.language||de.LAN,pf:de.APP_PF,appvr:de.VERSION,tdid:"","sign-ver":1,"app-sdk-version":de.APP_SDK_VERSION},params:{}},kt=x().create(At);kt.interceptors.request.use((e=>{const{pf:t,appvr:r,tdid:n}=At.headers;return Object.assign(e.headers,pt({url:`${e.baseURL}${e.url}`,pf:t,appvr:r,tdid:n})),e})),kt.interceptors.response.use((e=>{if(200===e.status){const t=e.data;return"0"===t.ret?Promise.resolve(t):Promise.reject(e)}return Promise.reject(e)})),dt(kt,{retries:5,resetTimeout:!0,retryDelay:1e3,isRetry:()=>!0});const Pt={async getLocation(){return await kt({url:"/web/get_location",data:{}})}},It={baseURL:"/lv/v1",method:"POST",headers:{loc:de.CHANNEL,lan:c.Ay.language||de.LAN,pf:de.APP_PF,appvr:de.VERSION,tdid:"","sign-ver":1,"app-sdk-version":de.APP_SDK_VERSION}},Ct=Je.createAxios(It);Ct.interceptors.request.use((e=>{const{pf:t,appvr:r,tdid:n}=It.headers;return Object.assign(e.headers,pt({url:`${e.baseURL}${e.url}`,pf:t,appvr:r,tdid:n})),e})),Ct.interceptors.response.use((e=>{if(200===e.status){const t=e.data;return"0"===t.ret?Promise.resolve(t):Promise.reject(e)}return Promise.reject(e)}));const Tt={async getFileList(e){return await Ct({url:"/third_party_clouds/file_list",data:{...e,querys:e.querys}})},async upload(e){return await Ct({url:"/file/batch_upload",data:e})},async getUploadProgress(e){return await Ct({url:"/file/upload_progress",data:e})},async cancelUpload(e){return await Ct({url:"/file/cancel_upload",data:e})},async userInfo(e,t){return await Ct({url:"/third_party_clouds/user_info",data:e,params:t?{type:t}:{}})},async syncMediaToThirdparty(e){return await Ct({url:"/third_party_clouds/sync_media",data:e})},async checkSyncMediaToThirdparty(e){return await Ct({url:"/third_party_clouds/check_sync_media",data:e})},async getUploadSize(e){return await Ct({url:"/file/get_upload_size",data:e})},async syncMedia(e){return await Ct({url:"third_party_clouds/sync_media",data:e})},async checkSyncMedia(e){return await Ct({url:"third_party_clouds/check_sync_media",data:e})},async getCloudOpenId(){return await Ct({url:"/third_party_clouds/openid"})}},xt=new Map;const Rt={baseURL:"/cc/v1/workspace",method:"POST",headers:{loc:de.CHANNEL,lan:c.Ay.language||de.LAN,pf:de.APP_PF,appvr:de.VERSION,tdid:"","sign-ver":1,"app-sdk-version":de.APP_SDK_VERSION}},Nt=Je.createAxios(Rt);Nt.interceptors.request.use((e=>{const{pf:t,appvr:r,tdid:n}=Rt.headers;return Object.assign(e.headers,pt({url:`${e.baseURL}${e.url}`,pf:t,appvr:r,tdid:n})),e})),function(e,t){const{maxAge:r=36e5}=t||{};e.interceptors.request.use((e=>{const{needCache:t}=e.params||{},r=function(e){try{if(!e)return"";const{url:t,data:r}=e;return`${t}${JSON.stringify(r)}`}catch{return""}}(e);if(e.cacheKey=r,!t)return xt.delete(r),e;const n=xt.get(r);if(n){const{data:t,maxAge:a,cacheStartTime:i}=n;Date.now()<a+i?e.adapter=e=>Promise.resolve({data:t,status:200,statusText:"OK",headers:{},config:e}):xt.delete(r)}return e})),e.interceptors.response.use((e=>{const{config:t,status:n,data:a}=e,{cacheKey:i}=t||{};return i&&200===n&&"0"===(null==a?void 0:a.ret)&&xt.set(i,{data:a,maxAge:r,cacheStartTime:Date.now()}),e}))}(Nt),Nt.interceptors.response.use((e=>{if(200===e.status){const t=e.data;return"0"===t.ret?Promise.resolve(t):Promise.reject(e)}return Promise.reject(e)}));const Lt={async getUserWorkSpace(e){return await Nt({url:"/get_user_workspaces",data:e})},async createWorkspace(e){return await Nt({url:"/create_workspace",data:e})},async checkCreateWorkspace(){return await Nt({url:"check_create_workspace"})},async getWorkspaceMember(e){return await Nt({url:"/get_member",data:e})},async getAllWorkspaceMember(e){var t,r,n,a,i;let o,s=[];do{o=await Nt({url:"/get_member",data:{count:50,cursor:(null==(t=null==o?void 0:o.data)?void 0:t.next_cursor)||"0",workspace_id:e.workspace_id}}),null!=(n=null==(r=null==o?void 0:o.data)?void 0:r.member_list)&&n.length&&(s=(0,Z.A)(s.concat(o.data.member_list),"uid"))}while(null!=(a=null==o?void 0:o.data)&&a.has_more);return{...o,data:{member_list:s,member_cnt:(null==(i=null==o?void 0:o.data)?void 0:i.member_cnt)||0}}},async mGetWorkspaceUserInfo(e){return await Nt({url:"/mget_workspace_user_info",data:e})},async quitWorkspace(e){return await Nt({url:"/quit_user",data:e})},async mGetWorkspaceInfo(e){return await Nt({url:"/mget_workspace_info",data:e})},async getWorkspaceInfoEverPhotoToken(e){return await Nt({url:"/get_ever_photo_token",data:e})},async getInvitationLink(e){return await Nt({url:"/get_invitation_link",data:e})},async setWorkspaceUser(e){return await Nt({url:"/set_user",data:e})},async removeWorkspaceUser(e){return await Nt({url:"/remove_user",data:e})},async updateUserInfo(e){return await Nt({url:"/update_user_info",data:e})},async updateWorkspaceInfo(e){return await Nt({url:"/update_workspace_info",data:e})},async joinWorkspace(e){return await Nt({url:"/join_workspace",data:e})},async getWorkspaceInfoByInvitationLink(e){return await Nt({url:"/get_workspace_info_by_invitation_link",data:e})},async mGetWorkspaceEverphotoUserInfo(e){return await Nt({url:"/mget_workspace_ever_photo_user_info",data:e})},async recentWorkspaceFileOpen(e,t){return await Nt({url:"/recent_file_list",data:e,params:{needCache:(null==t?void 0:t.needCache)??!0}})},async syncWorkspaceInfoFileOpen(e){return await Nt({url:"/sync_file_open_time",data:e})},async refreshUserWorkspaceInvitationLink(e){return await Nt({url:"/refresh_invitation_link",data:e})},async updateUserWorkspaceInvitationLinkStatus(e){return await Nt({url:"/update_invitation_link_status",data:e})},async workspaceDirectionalInvited(e){return await Nt({url:"/email_directional_invited_v2",data:e})},async getWorkspaceFileEditOwner(e){return await Nt({url:"/get_file_edit_owner",data:e})},async updateWorkspaceFileEditOwner(e){return await Nt({url:"/update_file_edit_owner",data:e})},async mgetWorkspaceFileOpenTime(e){return await Nt({url:"/mget_file_open_time",data:{...e,workspace_id:e.workspace_id||"0"}})},async getWorkspaceUploadLinkInfo(e){return await Nt({url:"/get_upload_link_info",data:e})},async syncWorkspaceFile(e){return await Nt({url:"/sync_file_everphoto",data:e})},async syncFileEverphotoState(e){return await Nt({url:"/sync_file_everphoto_state",data:e})},async workspaceSensitiveWord(e){return await Nt({url:"/sensitive_word",data:e})},async updateUserWorkspaceUploadLink(e){return await Nt({url:"/update_workspace_upload_link",data:e})},async getUserWorkspaceUploadLink(e){return await Nt({url:"/get_workspace_upload_link",data:e})},async getAllEverPhotoUser(){return await Nt({url:"get_all_everphoto_user"})},async notifyUploadLink(e){return await Nt({url:"upload_link_notify",data:e})},async getOnboardSample(e){return await Nt({url:"/list_onboard_sample",data:e})},async createOnboardDraft(e){return await Nt({url:"/create_onboard_draft",data:e})},async checkWorkspaceMember(e){const{data:t}=await Nt({url:"/member/check",data:{workspace_id:e}});return{isInWorkspace:t.is_in_workspace}},async joinSpace(e){var t,r,n,a,i,o;const s={join_workspace_type:e.joinWorkspaceType,invite_link_param:{invitation_link:null==(t=e.inviteLinkParam)?void 0:t.invitationLink,invite_from:null==(r=e.inviteLinkParam)?void 0:r.inviteFrom},application_param:{workspace_id:null==(n=e.applicationParam)?void 0:n.workspaceId,source_type:null==(a=e.applicationParam)?void 0:a.sourceType,reason:null==(i=e.applicationParam)?void 0:i.reason,file_id:null==(o=e.applicationParam)?void 0:o.fileId}},{data:c}=await Nt({url:"/join_workspace_with_apply",data:s});return{status:c.status,applicationId:c.application_id,workspaceInfo:c.workspace_info}},async dealApplication(e){return await Nt({url:"/applications/update",data:{id:e.id,status:e.status,workspace_id:e.workspaceId}})},async getApplicationList(e){var t;const{data:r}=await Nt({url:"/applications/list",data:{application_ids:e.applicationIds,need_detail:e.needDetail}});return{applications:null==(t=r.applications)?void 0:t.map((({has_approve_permission:e,application:t})=>({hasApprovePermission:e,application:{id:null==t?void 0:t.id,userId:null==t?void 0:t.user_id,workspaceId:null==t?void 0:t.workspace_id,status:null==t?void 0:t.status,reason:null==t?void 0:t.reason,userName:null==t?void 0:t.user_name,approverId:null==t?void 0:t.approver_id,approverName:null==t?void 0:t.approver_name,roleType:null==t?void 0:t.role_type,workspaceName:null==t?void 0:t.workspace_name,createdAt:null==t?void 0:t.created_at,timeoutAt:null==t?void 0:t.timeout_at}})))}},async getInvitationActivityStatus(e){return await Nt({url:"/get_invitation_activity_status",data:{id:e}})},async joinInvitationActivity(e){return await Nt({url:"/join_invitation_activity",data:{id:e}})}},Ot={baseURL:"/pipo",method:"POST",headers:{loc:de.CHANNEL,lan:c.Ay.language||de.LAN,pf:de.APP_PF,appvr:de.VERSION,tdid:"","sign-ver":1,"app-sdk-version":de.APP_SDK_VERSION},useCommerceApi:!0},Dt=Je.createAxios(Ot);function Ut(e){return[ve.US,ve.BR].find((t=>t===e))?Qe.VA:Qe.SG}Dt.interceptors.request.use((e=>{const{pf:t,appvr:r,tdid:n}=Ot.headers;return Object.assign(e.headers,pt({url:`${e.baseURL}${e.url}`,pf:t,appvr:r,tdid:n})),e})),Dt.interceptors.response.use((e=>{if(200===e.status){const t=e.data;return"0"===t.ret?Promise.resolve(t):Promise.reject(e)}return Promise.reject(e)})),dt(Dt,{retries:5,resetTimeout:!0,retryDelay:1e3,isRetry:e=>{var t;return![ge.PIPO.REFRESH_USER_SPACE_FAILURE].includes(null==(t=null==e?void 0:e.data)?void 0:t.ret)}});const jt={getNonceSingleton:(()=>{let e="",t=Number(new Date);return async()=>{const r=Number(new Date);return(!e||r>=t)&&(e=(await jt.getPipoNonce()).data.nonce,t=r+24e4),e}})(),getPipoApiServiceSingleton:(()=>{let e;return(t,r)=>(e||(e=new N.Ay({idc:t?Qe.BOE:Ut(r),merchantId:Oe(t,r),hasRequestTime:!0})),e)})(),async getPipoUserRegion(){return await Dt({url:"/v2/subscription/third_party/get_region",data:{aid:de.APP_ID}})},async getPipoNonce(){return await Dt({url:"/v2/purchase/third_party/nonce",data:{aid:de.APP_ID}})},async initPipoPayment(e){return await Dt({url:"/v2/purchase/third_party/init_payment",data:{aid:de.APP_ID,product_id:e.product_id,order_type:e.order_type,user_create_time:e.user_create_time,workspace_id:e.workspace_id,free_trial:e.free_trial}})},async freeTrialMakeOrder(e){return await Dt({url:"/v2/subscription/third_party/free_trial_make_order",data:{aid:de.APP_ID,product_id:e.product_id,region:e.region,user_create_time:e.user_create_time,payment_method:e.payment_method}})},async cancelSubscripiton(e){return await Dt({url:"/v2/subscription/third_party/cancel",data:{aid:de.APP_ID,subscribe_id:e.subscribe_id}})},async getCapcutOrderStatus(e){return await Dt({url:"/v2/subscription/third_party/get_order_status",data:{aid:de.APP_ID,order_id:e.orderId,subscribe_type:e.subscribeType}})},async getStoreMethodStauts(e){return await Dt({url:"/v2/subscription/third_party/get_store_method_status",data:{aid:de.APP_ID,idempotency_key:e.idempotencyKey}})},async getCashierBasicInfo(e){const t=jt.getPipoApiServiceSingleton(e.serviceProps.isBOE,e.serviceProps.region),r=await jt.getNonceSingleton();return await t.api.pipo.payment.getCashierBasicInfo({...e.basicInfoProps,nonce:r})},async getAgreementBasicInfo(e){const t=jt.getPipoApiServiceSingleton(e.serviceProps.isBOE,e.serviceProps.region),r=await jt.getNonceSingleton();return await t.api.pipo.payment.getAgreementBasicInfo({...e.basicInfoProps,nonce:r})},async postPipoPay(e){const t=jt.getPipoApiServiceSingleton(e.serviceProps.isBOE,e.serviceProps.region),r=await jt.getNonceSingleton();return await t.api.pipo.payment.pay({...e.payInfoProps,nonce:r})},async getPaymentDetails(e){const t=jt.getPipoApiServiceSingleton(e.serviceProps.isBOE,e.serviceProps.region),r=await jt.getNonceSingleton();return await t.api.pipo.payment.getPaymentDetails({...e.basicInfoProps,nonce:r})},async storingPaymentMethod(e){const t=jt.getPipoApiServiceSingleton(e.serviceProps.isBOE,e.serviceProps.region),r=await jt.getNonceSingleton();return await t.api.pipo.payment.storePaymentMethod({...e.basicInfoProps,nonce:r})},async getDistrict(e){return await jt.getPipoApiServiceSingleton(e.serviceProps.isBOE,e.serviceProps.region).api.location.get_district({...e.basicInfoProps})},async getPipoAddressAutoComplete(e){return(await jt.getPipoApiServiceSingleton(e.serviceProps.isBOE,e.serviceProps.region).api.addressAutocomplete.get_auto_complete({...e.basicInfoProps})).infos},async getPipoPlaceDetail(e){return(await jt.getPipoApiServiceSingleton(e.serviceProps.isBOE,e.serviceProps.region).api.addressAutocomplete.get_place_detail({...e.basicInfoProps})).addr_info},async getUnifiedBinDetail(e){const t=jt.getPipoApiServiceSingleton(e.serviceProps.isBOE,e.serviceProps.region),r=await jt.getNonceSingleton(),{card_number:n,country_or_region:a,merchant_user_id:i}=e.basicInfoProps;return await t.api.pipo.payment.getUnifiedBinDetail({card_number:n,country_or_region:a,merchant_user_id:i,nonce:r})}},Ft={baseURL:"/lv/v1",method:"POST",headers:{loc:de.CHANNEL,lan:c.Ay.language||de.LAN,pf:de.APP_PF,appvr:de.VERSION,tdid:"","sign-ver":1,"app-sdk-version":de.APP_SDK_VERSION},params:{}},Mt=Je.createAxios(Ft);Mt.interceptors.request.use((e=>{const{pf:t,appvr:r,tdid:n}=Ft.headers;return Object.assign(e.headers,pt({url:`${e.baseURL}${e.url}`,pf:t,appvr:r,tdid:n})),e})),Mt.interceptors.response.use((e=>{if(200===e.status){const t=e.data;return"0"===t.ret?Promise.resolve(t.data):Promise.reject(e)}return Promise.reject(e)})),dt(Mt,{retries:5,resetTimeout:!0,retryDelay:1e3,isRetry:()=>!0});const Bt={async getAbParam(){var e;try{const t=await wt((()=>Mt({url:"/effect/get_ab_param",method:"POST"})),{cacheKey:"promiseCache_getSubscriptionAB_get_ab_param"}),r=JSON.parse(t.parameters);return!(null==(e=null==r?void 0:r.cc_web_fe_ab)||!e.enable_vip_feature)}catch{return!1}}},Wt={baseURL:"/lv/v1/asset_auto_sync",method:"POST",headers:{loc:de.CHANNEL,lan:c.Ay.language||de.LAN,pf:de.APP_PF,appvr:de.VERSION,tdid:"","sign-ver":1,"app-sdk-version":de.APP_SDK_VERSION}},zt=Je.createAxios(Wt);zt.interceptors.request.use((e=>{const{pf:t,appvr:r,tdid:n}=Wt.headers;return Object.assign(e.headers,pt({url:`${e.baseURL}${e.url}`,pf:t,appvr:r,tdid:n})),e})),zt.interceptors.response.use((e=>{if(200===e.status){const t=e.data;return"0"===t.ret?Promise.resolve(t):Promise.reject(e)}return Promise.reject(e)}));const Gt={async createTaskRunnerConfig(e){const t={task_meta:{id:e.id,is_on:e.isOn,type:e.type,source_info:e.sourceInfo?JSON.stringify({folder_id:e.sourceInfo.folderId,folder_name:e.sourceInfo.folderName}):void 0,destination_info:JSON.stringify({workspace_id:e.destinationInfo.workspaceId}),file_type:e.fileType,run_plan:e.runPlan?{local_timezone:e.runPlan.localTimezone,tz_offset_hours:e.runPlan.tzOffsetHours,local_hour:e.runPlan.localHour}:void 0}},r=await zt({url:"/upsert_task",data:t});return{...r,data:{taskMeta:{id:r.data.task_meta.id,isOn:r.data.task_meta.is_on,type:r.data.task_meta.type,sourceInfo:r.data.task_meta.source_info?JSON.parse(r.data.task_meta.source_info):void 0,destinationInfo:r.data.task_meta.destination_info?JSON.parse(r.data.task_meta.destination_info):void 0,fileType:r.data.task_meta.file_type,runPlan:r.data.task_meta.run_plan?{localTimezone:r.data.task_meta.run_plan.local_timezone,tzOffsetHours:r.data.task_meta.run_plan.tz_offset_hours,localHour:r.data.task_meta.run_plan.local_hour}:void 0}}}},async updateTaskRunnerConfig(e){const t={task_meta:{id:e.id,is_on:e.isOn,type:e.type,source_info:JSON.stringify(e.sourceInfo),destination_info:JSON.stringify(e.destinationInfo),file_type:e.fileType,run_plan:e.runPlan?{local_timezone:e.runPlan.localTimezone,tz_offset_hours:e.runPlan.tzOffsetHours,local_hour:e.runPlan.localHour}:void 0}};return await zt({url:"/upsert_task",data:(0,w.A)(t,Q.A)})},async closeTaskRunner(e){const t={task_meta:{id:e.id,is_on:!1}};return await zt({url:"/upsert_task",data:t})},async getTaskRunnerConfig(){var e,t,r;const n=await zt({url:"/get_task"});try{const a=null!=(t=null==(e=n.data)?void 0:e.task_meta)&&t.source_info?JSON.parse(n.data.task_meta.source_info):void 0;return{...n,data:{taskMeta:n.data.task_meta?{id:n.data.task_meta.id,isOn:n.data.task_meta.is_on,type:n.data.task_meta.type,sourceInfo:a?{folderId:a.folder_id,folderName:a.folder_name}:void 0,destinationInfo:null!=(r=n.data.task_meta)&&r.destination_info?JSON.parse(n.data.task_meta.destination_info):void 0,fileType:n.data.task_meta.file_type,runPlan:n.data.task_meta.run_plan&&n.data.task_meta.run_plan.local_timezone?{localTimezone:n.data.task_meta.run_plan.local_timezone,tzOffsetHours:n.data.task_meta.run_plan.tz_offset_hours,localHour:n.data.task_meta.run_plan.local_hour}:void 0}:void 0}}}catch(a){throw Me.error("FileSnc-Api/get_task",a,{res:JSON.stringify(n)}),a}},async getTasks(e){const t={with_workspace:e.workspaceId,only_running:e.status===nt.Running},r=await zt({url:"/get_instance",data:t}),n=e=>{if(!e)return{sizeSum:0,files:[]};const t=JSON.parse(e)??{};return{sizeSum:t.size_sum??0,files:(t.file_list??[]).map((e=>({fileId:e.file_id,name:e.name,size:e.size,url:e.url,md5:e.md5})))}},a=e=>{const t=JSON.parse(e);return{destinationInfo:{workspaceId:JSON.parse(t.destination_info).workspace_id},error:{code:t.error_code,msg:t.error_message}}};try{return{...r,data:{tasks:(r.data.instances??[]).filter((e=>e.extra)).map((e=>({id:e.id,taskId:e.task_id,callType:e.call_type,assetsInfo:n(e.assets_info),extra:a(e.extra),taskType:e.task_type,status:e.status,createAt:e.create_at?1e3*e.create_at:e.create_at,finishAt:e.finish_at?1e3*e.finish_at:e.finish_at})))}}}catch(i){throw console.error("error",i),Me.error("FileSnc-Api-/get_task",i,{res:JSON.stringify(r)}),i}},async getFilesProgressByTaskId(e){const t={instance_id:e.taskId},r=await zt({url:"/get_progress",data:t});try{return{...r,data:{taskId:String(e.taskId),files:(r.data.results??[]).map((e=>({fileId:String(e.FileID),progress:e.Progress,status:e.Status,metadata:e.Metadata,finishAt:e.FinishAt})))}}}catch(n){throw Me.error("FileSnc-Api-/get_progress",n,{res:JSON.stringify(r)}),n}},async cancelTask(e){const t={instance_id:e.taskId};return await zt({url:"/file/cancel_upload",data:t})},async retryTask(e){const t={instance_id:e.taskId};return await zt({url:"/retry_instance",data:t})},async immediateTask(e){const t={task_id:e.taskId};return await zt({url:"/execute",data:t})}},Ht=()=>{var e,t;const r=Ge("shop")||(null==(e=window.location.originParams)?void 0:e.shop)||"",n=Ge("product_id")||(null==(t=window.location.originParams)?void 0:t.product_id)||"";return{accountId:r,productId:n?`gid://shopify/Product/${n}`:""}},$t=["click"],Vt="report";Te.GROUP,Te.PAGE,Te.INSTAGRAM,xe.YouTube,xe.YouTubeShorts;const Yt={google:[/([^\/]+\.)?google(\.[^\/]+)(\/|$)/i],bing:[/([^\/]+\.)?bing\.com(\/|$)/i],yahoo:[/([^\/]+\.)?yahoo\.com(\/|$)/i],duckduckgo:[/([^\/]+\.)?duckduckgo\.com(\/|$)/i],yandex:[/([^\/]+\.)?yandex\.com(\/|$)/i],naver:[/([^\/]+\.)?naver\.com(\/|$)/i],facebook:[/([^\/]+\.)?facebook\.com(\/|$)/i,/([^\/]+\.)?fb\.com(\/|$)/i,/([^\/]+\.)?fb\.me(\/|$)/i],youtube:[/([^\/]+\.)?youtube\.com(\/|$)/i,/([^\/]+\.)?youtu\.be(\/|$)/i],twitter:[/([^\/]+\.)?twitter\.com(\/|$)/i,/([^\/]+\.)?t\.co(\/|$)/i],tiktok:[/([^\/]+\.)?tiktok\.com(\/|$)/i],instagram:[/([^\/]+\.)?instagram\.com(\/|$)/i,/([^\/]+\.)?instagr\.am(\/|$)/i],linkedin:[/([^\/]+\.)?linkedin\.com(\/|$)/i],survey:[/survey\.isnssdk\.com(\/|$)/i]},qt={SEO:[...Yt.google,...Yt.bing,...Yt.yahoo,...Yt.duckduckgo,...Yt.yandex,...Yt.naver],Social:[...Yt.facebook,...Yt.youtube,...Yt.twitter,...Yt.tiktok,...Yt.instagram,...Yt.linkedin],product:[...Yt.survey]};new Map(Object.keys(qt).reduce(((e,t)=>(qt[t].forEach((r=>{e.push([r,t])})),e)),[])),new Map(Object.keys(Yt).reduce(((e,t)=>(Yt[t].forEach((r=>{e.push([r,t])})),e)),[]));const Kt={user_id:"",user_is_login:!1,user_is_subscribed:!1,user_is_new:!1},Jt={isProd:!0,log:!1,userInfo:Kt,isABDependenciesReady:!0},Xt="TEA_STORE_TOKEN_RET",Zt="TEA_STORE_WEB_INFO";class Qt{constructor(){oe(this,"isInited",!1),oe(this,"isStarted",!1),oe(this,"isABDependenciesReady",!0),oe(this,"_web_id"),oe(this,"_tea",y.A),oe(this,"_reportWraperHandler"),oe(this,"_startCallbacks",new Set),oe(this,"options"),oe(this,"cachedEvents",new Set),oe(this,"cachedBeaconEvents",new Set),oe(this,"cachedPredefinePageView"),oe(this,"isSetWebId",!1),oe(this,"currentPageHidden",!1),oe(this,"awaitInitQueue",[]),oe(this,"ABDependenciesReadyQueue",[]),typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"&&document.addEventListener("visibilitychange",(()=>{this.currentPageHidden=document.hidden}))}get tea(){return this._tea}awaitForInit(){return this.isInited?void 0:new Promise((e=>{this.awaitInitQueue.push(e)}))}awaitForStart(){return this.isStarted?void 0:new Promise((e=>{this.addStartCallBack(e)}))}awaitABDependenciesReady(){return this.isABDependenciesReady?void 0:new Promise((e=>{this.ABDependenciesReadyQueue.push(e)}))}setABDependenciesReady(){this.isABDependenciesReady=!0,this.ABDependenciesReadyQueue.forEach((e=>{e()})),this.ABDependenciesReadyQueue=[]}init(e){var t;this.options=Object.assign({},Jt,e),this._web_id=this.options.web_id,this.isABDependenciesReady=this.options.isABDependenciesReady,this._tea.init({disable_auto_pv:!0,disable_sdk_monitor:!0,app_id:Number(de.APP_ID),channel:de.CHANNEL,log:this.options.log,enable_ab_test:!0,ab_channel_domain:"https://vmweb-sg.byteoversea.com",disable_webid:!!this._web_id,enable_stay_duration:!(null==e||!e.enable_stay_duration),maxDuration:Number(null==e?void 0:e.maxDuration)||864e5,enable_debug:!(null==e||!e.enable_debug),autotrack:null!=e&&e.useAutoTrack?{custom:"tea",svg:!0}:void 0}),this.config({app_version:null!=e&&e.appVersion?`1.0.${null==e?void 0:e.appVersion.split(".").pop()}`:"",_staging_flag:this.options.isProd?0:1,web_id:this._web_id,user_agent:(null==(t=null==window?void 0:window.navigator)?void 0:t.userAgent)||"",...this.options.userInfo}),this.clearInitQueue(),this.register()}async start(){if(!this.isInited&&!this.isStarted){const[e,t]=(()=>{const e=window.GATEWAY_INJECTED_WEB_ID,t="string"==typeof e&&!!e;return[t,t?e:void 0]})();e&&(this._web_id=t)}this.isStarted=!0,this.setABDependenciesReady(),this._tea.start(),await this.setWebIdToCustom(),this.execStartCallBacks(),this.sendCacheEvent()}async getABTestConfig(e,t){return await this.awaitForInit(),await this.awaitABDependenciesReady(),this.isStarted?new Promise((r=>{this._tea.getVar(e,t,(e=>{r(e)}))})):(console.warn("[WARNING]@byted-image/reporter getABTestConfig failure, cause sdk is not allow to started"),Promise.resolve(t))}getABTestConfigSync(e,t,r){var n;return Promise.resolve().then((()=>this.awaitForInit())).then((()=>this.awaitABDependenciesReady())).then((()=>{this.isStarted||(console.warn("[WARNING]@byted-image/reporter getABTestConfig failure, cause sdk is not allow to started"),null==r||r(t)),this._tea.getVar(e,t,(e=>{null==r||r(e)}))})),(null==(n=window._libra_abtest)?void 0:n[e])??t}async getABTestConfigSilent(e,t){return await this.awaitForInit(),await this.awaitABDependenciesReady(),this.isStarted?new Promise((r=>{this._tea.getAllVars((n=>{var a;r((null==(a=null==n?void 0:n[e])?void 0:a.val)??t)}))})):(console.warn("[WARNING]@byted-image/reporter getABTestConfig failure, cause sdk is not allow to started"),Promise.resolve(t))}report(e,t,r){var n,a;!1===(null==r?void 0:r.hiddenPageReport)&&this.currentPageHidden?null!=(n=this.options)&&n.log&&console.info("Tea Repoter Reject:",`hiddenPageReport => ${null==r?void 0:r.hiddenPageReport}; currentPageHidden => ${this.currentPageHidden}`):this.isStarted&&this.isSetWebId?(null!=(a=this.options)&&a.log&&console.info("Tea Repoter:",e,t),this.tea.event(e,t)):this.cachedEvents.add({event:e,params:t})}reportBecon(e,t){var r;this.isStarted&&this.isSetWebId?(null!=(r=this.options)&&r.log&&console.info("Tea Repoter(becon):",e,t),this.tea.beconEvent(e,t)):this.cachedBeaconEvents.add({event:e,params:t})}reportPredefinePageView(e){var t;if(!this.isStarted||!this.isSetWebId)return void(this.cachedPredefinePageView=e);null!=(t=this.options)&&t.log&&console.info("Tea Repoter:",event,e);const{isFirstVisitPage:r,isSessionStartPage:n}=function(){let e=!1,t=!1;const r=window.GATEWAY_INJECT_IS_FIRST_VISIT_PAGE;return typeof r<"u"&&(e="1"===r),t=e||!document.referrer.includes(location.hostname),{isFirstVisitPage:e,isSessionStartPage:t}}();e.is_first_visit_page=r?"1":"0",e.is_session_start_page=n?"1":"0",this._tea.predefinePageView(e)}sendCacheEvent(){var e;if(this.cachedPredefinePageView&&this.reportPredefinePageView(this.cachedPredefinePageView),this.cachedEvents.size){for(const{event:e,params:t}of this.cachedEvents)this.report(e,t);this.cachedEvents.clear()}if(this.cachedBeaconEvents.size){for(const{event:t,params:r}of this.cachedBeaconEvents)null!=(e=this.options)&&e.log&&console.info("Tea Repoter(becon):",t,r),this.reportBecon(t,r);this.cachedBeaconEvents.clear()}}updateUserInfo(e){this.config({...e})}resetUserInfo(){this.config({...Kt})}destroy(){this.unregister()}getToken(){if(void 0!==this._web_id)return Promise.resolve({web_id:this._web_id});const e=window.GATEWAY_INJECTED_WEB_ID;if(e)return Promise.resolve({web_id:e});const t=window[Zt];if(void 0!==t)return Promise.resolve(t);return window[Xt]||(window[Xt]=new Promise((e=>{this._tea.getToken((t=>{null!=t&&t.web_id?window[Zt]=t:window[Xt]=void 0,e(t??{})}),2e3)})).catch((()=>(window[Xt]=void 0,{}))),window[Xt])}async setWebIdToCustom(){var e,t;const{web_id:r}=await this.getToken();r||Me.error("reporter getToken not get web id",new Error,{content:"reporter getToken not get web id",level:"error"});const{custom:n}=(null==(e=this.getConfig())?void 0:e.header)??{};this.config({custom:{...n,user_agent:(null==(t=null==window?void 0:window.navigator)?void 0:t.userAgent)||"",web_id:r}}),this.isSetWebId=!0}config(e){var t;this.fixEsLanguage(e);const{custom:r}=(null==(t=this.getConfig())?void 0:t.header)??{};this._tea.inited&&this._tea.config({...e,custom:{...r,...(null==e?void 0:e.custom)??{}}})}configUTParams(e){var t;const{custom:r}=(null==(t=this.getConfig())?void 0:t.header)??{},{campaign_id:n,term:a,channel:i,extraCommonParams:o}=e;this.config({custom:{...r,...i,...o,campaign_id:n,keywords:a||i.keywords}})}getConfig(e){try{return this._tea.getConfig(e)}catch{return{}}}async asyncGetConfig(e){const t=this.getConfig(e);return(0,v.A)(t)?(await Promise.race([this.awaitForInit(),this.awaitForStart()]),this.getConfig(e)):t}enableTTWid(){this.config({enable_ttwebid:!0})}addStartCallBack(e){this.isStarted?e(null):this._startCallbacks.add(e)}checkEnableReport(){return this.isStarted&&this.isSetWebId}execStartCallBacks(){this._startCallbacks.forEach((e=>{e(null)}))}clearInitQueue(){this.isInited=!0,this.awaitInitQueue.forEach((e=>{e()})),this.awaitInitQueue=[]}register(){$t.forEach((e=>{window.document.addEventListener(e,this._reportWraperHandler)}))}unregister(){$t.forEach((e=>{window.document.removeEventListener(e,this._reportWraperHandler)}))}reportWraperHandler(e){let t=0;const r=e.composedPath(),n=e.type;let a,i="",o="";for(a=r[t];a;){const{dataset:e}=a;if(e&&e[`${Vt}Events`])break;a=r[++t]}if(a){const{dataset:e}=a;i=JSON.parse((null==e?void 0:e[`${Vt}Events`])||""),o=JSON.parse((null==e?void 0:e[`${Vt}Params`])||"")}if(i){const e=i[n];let t="",r={};if("object"!=typeof e)throw new Error("report event error, please confirm events is obj");t=e.event??"",r=e.params??{},t&&this.report(t,{...o,...r})}}fixEsLanguage(e){var t,r;(null==(r=null==(t=null==e?void 0:e.custom)?void 0:t.lang)?void 0:r.toLocaleLowerCase())===Re.Spanish.key.toLocaleLowerCase()&&(e.custom.lang="es-ES")}}const er=(()=>{let e;return()=>(e||(e=new Qt),e)})();class tr{constructor(){oe(this,"reporter",er())}authorizeWindowReport(e){typeof e.current_page>"u"&&delete e.current_page,this.reporter.report("authorize_window",e)}notLoginPopupReport(e){typeof e.current_page>"u"&&delete e.current_page,this.reporter.report("not_login_popup",e)}upLoadWindowReport(e){typeof e.current_page>"u"&&delete e.current_page,this.reporter.report("upload_window",e)}linkFileFailReport(e){this.reporter.report("material_link_fail_show",e)}}class rr{constructor(){oe(this,"reporter",er())}report(e){this.reporter.report("vip_page",e)}}var nr=(e=>(e.NOT_YET="not_yet",e.IN_PROGRESS="in_progress",e.EXPIRE="expire",e))(nr||{});var ar=(e=>(e.SHOW="show",e.CLOSE="close",e.POLICY="policy",e.TERMS="terms",e.CONFIRM_PACKAGE="confirm_package",e.PAY="pay",e.PAY_STATUS="pay_status",e.OK="ok",e.CHECK="check",e.LINK="link",e.MANAGEMENT="management",e.CANCEL_SUB="cancel_sub",e))(ar||{}),ir=(e=>(e.PACKAGE="package",e.PAY="pay",e.LINK="link",e.MANAGE="manage",e))(ir||{}),or=(e=>(e.PAYPAL="paypal",e.NEW_CARD="new_card",e.CARD="card",e))(or||{}),sr=(e=>(e.SUCCESS="success",e.FAIL="fail",e))(sr||{});const cr=(0,L.O)({id:"LvAsyncFuncExec",initial:"execing",states:{execing:{invoke:{id:"invokeAsyncFunc",src:"invokeAsyncFunc",onDone:{target:"success",actions:"notifySuccess"},onError:{target:"fail",actions:"notifyError"}}},success:{type:"final"},fail:{type:"final"}}},{services:{invokeAsyncFunc:e=>e.task.func()},actions:{notifySuccess:(0,O.T4)(((e,t)=>({type:"EXEC_SUCCESS",id:e.id,data:t.data}))),notifyError:(0,O.T4)(((e,t)=>({type:"EXEC_FAIL",id:e.id,data:t.data})))}});let lr=0;const ur=(0,L.O)({id:"LvAsyncFuncExecs",context:{clearTaskInterval:3e3,deleteMorethan:2e3,taskActor:[]},initial:"idle",invoke:{id:"clearTaskInterval",src:"clearTaskInterval"},states:{idle:{},busy:{}},on:{ADD_TASK:{actions:"addExecTask"},EXEC_SUCCESS:{actions:["notifyExecSuccess","markClearActor"]},EXEC_FAIL:{actions:["notifyExecFail","markClearActor"]},CLEAR_DELTE_TASK:{actions:"clearActor"}}},{services:{clearTaskInterval:e=>t=>{const r=setInterval((()=>{t({type:"CLEAR_DELTE_TASK"})}),e.clearTaskInterval);return()=>{clearInterval(r)}}},actions:{addExecTask:(0,O.kp)({taskActor:(e,t)=>{const r=[...e.taskActor],n=lr++;return r.push({id:n,successType:t.successType,failType:t.failType,extInfo:t.extInfo,deleteAt:void 0,actor:(0,D.cH)(cr.withContext({id:n,task:{func:t.exec}}))}),r}}),notifyExecSuccess:(0,O.T4)(((e,t)=>{const r=e.taskActor.find((e=>e.id===t.id));if(!r)throw new Error("\u67e5\u65e0\u5bf9\u5e94\u4efb\u52a1");return{type:r.successType,data:t.data,extInfo:r.extInfo}})),notifyExecFail:(0,O.T4)(((e,t)=>{const r=e.taskActor.find((e=>e.id===t.id));if(!r)throw new Error("\u67e5\u65e0\u5bf9\u5e94\u4efb\u52a1");return{type:r.failType,data:t.data,extInfo:r.extInfo}})),markClearActor:(0,O.kp)(((e,t)=>{var r,n;const a=e.taskActor.find((e=>e.id===t.id));return a&&(null==(n=null==(r=a.actor)?void 0:r.stop)||n.call(r),a.deleteAt=Date.now()),{taskActor:e.taskActor.slice()}})),clearActor:(0,O.kp)({taskActor:e=>{const t=Date.now();return e.taskActor.filter((r=>!r.deleteAt||t-r.deleteAt<e.deleteMorethan))}})}}),{THIRDPARTY_CLOUD_AUTH:dr}=me,{authorizationCheck:pr}=ht,_r=new tr,fr=(0,L.O)({id:"LvThirdpartyCloudStorageAuth",initial:"unknow",context:{uid:"",draftId:"",isBOE:!1,isShowAskAuthBox:!1,isShowReAskAuthBox:!1,platform:be.Dropbox,showAskAuthBoxCb:void 0,showAskReAuthBoxCb:void 0,toolType:void 0,subPlatform:void 0,authorizeWindowReport:!0},states:{unknow:{invoke:{id:"reqHadCode",src:"requestHadAuth",onDone:{target:"checkingOpenIdSame"},onError:{target:"authenticating"}},data:{platform:e=>e.platform,draftId:e=>e.draftId}},authenticating:{initial:"idle",entry:(0,O.kp)({isShowAskAuthBox:!0}),on:{CONFIRM:{target:"#LvThirdpartyCloudStorageAuth.authenticating.auth",internal:!1,actions:"reportConfirm"},CANCEL:{target:"#LvThirdpartyCloudStorageAuth.reject",actions:["reportClose","clearThirdPartyFileOpenQuery"]}},states:{idle:{entry:"showAskAuthBox"},auth:{entry:["clearStorage"],invoke:{id:"userAuth",src:"userAuth"},on:{USER_AUTH_SUCCESS:{target:"#LvThirdpartyCloudStorageAuth.checkingOpenIdSame",actions:["clearStorage","handleServerSuccess"]},USER_AUTH_FAIL:{target:"#LvThirdpartyCloudStorageAuth.reject",actions:["clearStorage","handleServerError"]}}}}},checkingOpenIdSame:{invoke:{id:"checkOpenIdSame",src:"checkOpenIdSame",onDone:[{target:"#LvThirdpartyCloudStorageAuth.resolve",cond:"pass"},{target:"reconnecting",cond:"needReconnect"}]}},reconnecting:{entry:(0,O.kp)({isShowReAskAuthBox:!0}),initial:"idle",states:{idle:{entry:"showAskReAuthBox"}},on:{CONFIRM:{target:"#LvThirdpartyCloudStorageAuth.authenticating.auth",internal:!1,actions:"reportConfirm"},CANCEL:{target:"#LvThirdpartyCloudStorageAuth.reject",actions:["reportClose","clearThirdPartyFileOpenQuery"]}}},resolve:{type:"final",data:{isAuthorized:()=>!0}},reject:{type:"final",data:{isAuthorized:()=>!1}}},on:{SEND_UI_CALLBACK:{actions:"getUiCallback"},SEND_RE_AUTH_UI_CALLBACK:{actions:"getReAuthUiCallback"},EVENT_REPORT_SHOW:{actions:"reportShow"}}},{actions:{getUiCallback:(0,O.kp)({showAskAuthBoxCb:(e,t)=>t.service}),getReAuthUiCallback:(0,O.kp)({showAskReAuthBoxCb:(e,t)=>t.service}),showAskAuthBox:({showAskAuthBoxCb:e})=>{e&&e()},showAskReAuthBox:({showAskReAuthBoxCb:e,platform:t,draftId:r,currentPage:n,toolType:a,subPlatform:i})=>{_r.authorizeWindowReport({action:"show",source:i||Se[t],draft_id:r,current_page:n,tool_type:a,window_type:"authorize_inconsistent"}),null==e||e()},reportShow:({platform:e,draftId:t,currentPage:r,toolType:n,subPlatform:a})=>{let i=e===be.GoogleDrive?"google_drive":"dropbox";"google_mp"===a&&(i="authorize_fail"),_r.authorizeWindowReport({action:"show",source:a||Se[e],draft_id:t,current_page:r,tool_type:n,window_type:i})},clearStorage:()=>{He.removeItem(dr)},handleServerError:({onServerError:e})=>{null==e||e()},handleServerSuccess:({onServerSuccess:e})=>{null==e||e()},reportConfirm:({platform:e,draftId:t,currentPage:r,toolType:n,subPlatform:a},i)=>{_r.authorizeWindowReport({action:"authorize_inconsistent"===i.windowType?"reconnect":"continue",source:"authorize_inconsistent"===i.windowType?"authorize_inconsistent":a||Se[e],draft_id:t,current_page:r,tool_type:n,window_type:(null==i?void 0:i.windowType)||Se[e]})},reportClose:({platform:e,draftId:t,toolType:r,currentPage:n,subPlatform:a},i)=>{_r.authorizeWindowReport({action:"close",source:"authorize_inconsistent"===i.windowType?"authorize_inconsistent":a||Se[e],draft_id:t,tool_type:r,current_page:n,window_type:i.windowType||Se[e]})},clearThirdPartyFileOpenQuery:()=>{ze(["state","file_id","imported_file_id"])}},guards:{needReconnect:(e,{data:t})=>"reconnect"===t,pass:(e,t)=>"done"===t.data},services:{userAuth:e=>t=>{var r,n,a;const i=600,o=800,s=(window.screen.height-30-i)/2,c=(window.screen.width-o)/2,l=e=>G()("sha256").update(e).digest("hex");e.platform===be.Dropbox&&window.open(`https://dropbox.com/oauth2/authorize?prompt=consent&token_access_type=offline&response_type=code&client_id=${e.isBOE?"3c3o3v882blv2w7":"dp6bpuyyzufzrg1"}&redirect_uri=https://${window.location.host}/lv/v1/user/web/third_party_clouds_authorization/${Se[e.platform]}&state=${null==(r=l(e.uid??""))?void 0:r.slice(15,47)}`,"name=thirdparty_cloud_storage_auth",`fullscreen=1,width=800,height=600,top=${s},left=${c}`),e.platform===be.GoogleDrive&&window.open(`https://accounts.google.com/o/oauth2/v2/auth?prompt=consent&state=${null==(n=l(e.uid??""))?void 0:n.slice(15,47)}&scope=https%3A//www.googleapis.com/auth/drive.readonly%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email&access_type=offline&include_granted_scopes=true&response_type=code&client_id=${e.isBOE?Ae:ke}&redirect_uri=https://${window.location.host}/lv/v1/user/web/third_party_clouds_authorization/google_drive`,"name=thirdparty_cloud_storage_auth",`fullscreen=1,width=800,height=600,top=${s},left=${c}`),e.platform===be.GoogleContacts&&window.open(`https://accounts.google.com/o/oauth2/v2/auth?prompt=consent&state=${null==(a=l(e.uid??""))?void 0:a.slice(15,47)}&scope=email%20openid%20https%3A//www.googleapis.com/auth/contacts.readonly&access_type=offline&include_granted_scopes=true&response_type=code&redirect_uri=https://${window.location.host}/lv/v1/user/web/third_party_platform_authorization%3Fplatform%3D${be.GoogleContacts}&client_id=${e.isBOE?Ae:"87571557143-vsqifmqmc1ou12eqamgqm6k7ducvdcu1.apps.googleusercontent.com"}`,"name=thirdparty_cloud_storage_auth",`fullscreen=1,width=800,height=600,top=${s},left=${c}`);const u=e=>{e.key===dr&&("fail"===e.newValue?t("USER_AUTH_FAIL"):t("USER_AUTH_SUCCESS"))};return window.addEventListener("storage",u),()=>{window.removeEventListener("storage",u)}},requestHadAuth:async e=>{const t=Ge(Fe),r=Ge(je),n={platform:e.platform};"dropbox"===r&&"plugin"===t&&(n.scope="files.content.write");const{authorized:a}=await pr(n);if(!a)throw new Error("\u672a\u9274\u6743")},checkOpenIdSame:async()=>{var e,t;const r=Ge(Fe),n=Ge(je),a=Ge("file_id"),i=Ge("state");if("googledrive"===r&&null!=i&&i.length){let e,t="";try{e=JSON.parse(i)}catch{}if(t=null==e?void 0:e.userId,!t)return"done";const{data:r}=await Tt.userInfo({platform:be.GoogleDrive});return""===(null==r?void 0:r.user_id)?"reconnect":(null==r?void 0:r.user_id)===t?"done":"reconnect"}if("dropbox"===n&&a)try{const r=await Tt.getFileList({path:"",cursor:"",page_size:1,platform:be.Dropbox,querys:JSON.stringify({file_ids:[a]})});return null!=(t=null==(e=null==r?void 0:r.data)?void 0:e.entries)&&t[0]?"done":"reconnect"}catch{return"reconnect"}return"done"}}}),hr="_thirdpartyUniqueId_",gr=new tr,mr=524288,vr=()=>{var e;return{isBOE:!1,platform:be.Dropbox,curShop:"",currentPage:void 0,videoTypeId:void 0,curProductId:null==(e=Ht())?void 0:e.productId,templateId:Ge("create_id")||"",path:"",cursor:"",autoCheck:!1,list:[],uploadList:[],maxUploadSize:mr,onUploadSet:new Set,onSelectWorkspaceSet:new Set,draftId:"",cancelList:new Set,multiple:!0,uid:""}},yr=()=>{const e=Ge(Fe),t=Ge(je),r=Ge("state"),n=Ge("file_id"),a=!("googledrive"!==e||null==r||!r.length);return"dropbox"===t&&n?be.Dropbox:a?be.GoogleDrive:void 0};let wr=!1,br=!1;const Sr=(0,L.O)({id:"LvThirdpartyCloudStorage",initial:"close",context:{...vr()},invoke:[{id:"asyncTaskActor",src:ur},{id:"listenUploadProgress",src:"listenUploadProgress"}],states:{close:{entry:["clearList","updateSelectedUserId"],on:{OPEN:{target:"authorizing",actions:["setPlatform"]},OPEN_SHOP:{target:"open",actions:["setPlatform","setCurShop"]},REPORT_SHOW:{actions:["reportShow"]},REPORT_CANCEL:{actions:["reportCancel","modalCloseCb"]},CONTINUE:{actions:["reportContinue"]},LOG_PARAMS:{actions:["setPlatform"]}}},authorizing:{invoke:{id:"LvThirdpartyCloudStorageAuth",src:fr,data:{uid:({uid:e})=>e,isBOE:({isBOE:e})=>e,platform:({platform:e})=>e,draftId:({draftId:e})=>e,onServerError:({onServerError:e})=>e,currentPage:({currentPage:e})=>e,toolType:({toolType:e})=>e,subPlatform:()=>"googledrive"===Ge(Fe)?Se.GoogleDriveMarketPlace:"dropbox"===Ge(je)?Se.DropboxImport:void 0},onDone:[{target:"openThirdPartyFile",cond:"shouldOpenThirdPartyFile"},{target:"open",cond:"isAuthorized"},{target:"close",actions:"handleAuthReject"}]},on:{OPEN:{target:"authorizing",actions:["setPlatform"],internal:!1}}},open:{type:"parallel",states:{fetch:{initial:"loading",states:{loading:{invoke:{id:"fetchFileList",src:"fetchFileList",onDone:[{target:"empty",cond:"isEmptyFileList"},{target:"noMore",actions:["updateList"],cond:"isNoMoreFileList"},{target:"hasMore",actions:["updateList"]}],onError:[{target:"noMore"}]}},empty:{},hasMore:{on:{LOAD_MORE:{target:"loading"}}},noMore:{}},on:{TOOGLE_FILE:{actions:["toogleFile","autoCheck"]},TOOGLE_FILES:{actions:["toogleFiles","autoCheck"]},ENTER_FOLDER:{target:".loading",actions:["enterFolder"]}}},upload:{initial:"idle",states:{idle:{},checking:{invoke:{id:"checkUserSpace",src:"checkUserSpace",onDone:{target:"pending"},onError:{target:"idle",actions:["handleCheckUserSpaceFail"]}}},pending:{invoke:{id:"uploadFiles",src:"uploadFiles",onDone:{target:"#LvThirdpartyCloudStorage.close",actions:["handleUploadSuccess","handleUploadFail","handleUploadExist","handleUploadNoSpace","onBatchUploadSuccess","handleUpload"]},onError:{target:"idle",actions:["handleServerError"]}}}},on:{UPLOAD:[{target:".checking",actions:["reportSelect","clearProductId"]}],UPLOAD_WITH_SELECT_SPACE:[{target:"#LvThirdpartyCloudStorage.selectingSpaceWithSelect",actions:["reportSelect"]}],SWITCH_ACCOUNT:[{actions:["reportSelect"]}]}}},on:{CLOSE:{target:"close",actions:["clearList","reportCancel","clearProductId"]},SWITCH:{target:"close",actions:["clearList","reportSwitch","clearProductId"]},UNBIND:{actions:["unbind","reportUnbind"]},UNBIND_SUCCESS:{target:"close",actions:["handleUnbindSuccess"]},UNBIND_FAIL:{actions:["handleUnbindError"]},RE_FETCH:{target:"open.fetch",actions:["clearList"]},REPORT_SHOW:{actions:["reportShow"]}}},selectingSpaceWithSelect:{initial:"selectingSpace",states:{idle:{},selectingSpace:{invoke:{id:"selectSpace",src:"selectSpace",onDone:{target:"pending"},onError:{target:"#LvThirdpartyCloudStorage.close",actions:"clearUrl"}}},pending:{invoke:{id:"uploadFiles",src:"uploadFiles",onDone:{target:"#LvThirdpartyCloudStorage.close",actions:["handleUploadSuccess","handleUploadFail","handleUploadExist","handleUploadNoSpace","onBatchUploadSuccess","handleUpload"]},onError:{target:"idle",actions:["handleServerError"]}}}}},openThirdPartyFile:{initial:"loading",states:{idle:{},loading:{invoke:{id:"fetchOpenFileList",src:"fetchOpenFileList",onDone:[{target:"selectingSpace",actions:["updateOpenList"],cond:"canImport"},{target:"#LvThirdpartyCloudStorage.close",actions:["clearUrl","showImportError"]}],onError:[{actions:["fetchFileFail","handleServerError"]}]}},selectingSpace:{invoke:{id:"selectSpace",src:"selectSpace",onDone:{target:"pending"},onError:{target:"#LvThirdpartyCloudStorage.close",actions:"clearUrl"}}},pending:{invoke:{id:"uploadOpenFiles",src:"uploadOpenFiles",onDone:{target:"#LvThirdpartyCloudStorage.close",actions:["handleUploadSuccess","handleUploadFail","handleUploadExist","handleUploadNoSpace","onBatchUploadSuccess","handleUpload","clearUrl"]},onError:{target:"idle",actions:["handleServerError"]}}}}},uploadWithoutSelect:{initial:"idle",states:{idle:{},pending:{invoke:{id:"uploadFiles",src:"uploadFiles",onDone:{target:"#LvThirdpartyCloudStorage.close",actions:["handleUploadSuccess","handleUploadFail","handleUploadExist","handleUploadNoSpace","onBatchUploadSuccess","handleUpload"]},onError:{target:"idle",actions:["handleServerError"]}}}}}},on:{UPDATE_SELECTED_USER_ID:{actions:[(0,O.kp)({selectedUserId:(e,t)=>{var r;return null==(r=null==t?void 0:t.data)?void 0:r.selectedUserId}})]},SET_SHOPIFY_ACCOUNTS:{actions:[(0,O.kp)({shopifyAccounts:(e,t)=>null==t?void 0:t.shopifyAccounts})]},UPDATE_PARTIAL_CALLBACK:{actions:["updatePartialCallback"]},GET_UPLOAD_PROGRESS:{actions:["getUploadProgress"]},GET_UPLOAD_PROGRESS_SUCCESS:[{actions:["unlockFetchUploadProgress","handleUploadProgressSuccess","handleUpload"],cond:"isUploadProgressSuccess"},{actions:["unlockFetchUploadProgress"]}],GET_UPLOAD_PROGRESS_FAIL:{actions:["unlockFetchUploadProgress"]},ADD_ON_UPLOAD:{actions:["addOnUpload"]},ADD_ON_SELECT_WORKSPACE:{actions:["addOnSelect"]},REMOVE_ON_UPLOAD:{actions:["removeOnUpload"]},RETRY_UPLOAD:{actions:["assignFileSpaceId","retryUpload"]},RETRY_UPLOAD_SUCCESS:{actions:["handleRetryUploadSuccess","handleUpload"]},RETRY_UPLOAD_FAIL:{},DELETE_UPLOAD:{actions:["deleteUpload"]},UPDATE_MAX_UPLOAD_SIZE:{actions:["updateMaxUploadSize"]},UPDATE_IS_BOE:{actions:["updateIsBOE"]},UPDATE_DRAFT_ID:{actions:["updateDraftId"]},UPDATE_TOOLTYPE:{actions:["updateToolType"]},UPDATE_WORKSPACE_LIST:{actions:["updateWorkspaceList"]},UPDATE_SPACE_ID:{actions:["updateSpaceId"]},CANCEL_SUCCESS:{actions:["uploadListDeleteItem","addCancelList","unlockCancelUpload"]},CANCEL_FAIL:{actions:["unlockCancelUpload"]},UPDATE_COUNT_LIMIT:{actions:["updateCountLimit"]},UPLOAD_WITHOUT_SELECT:{actions:["uploadWithoutSelect","setPlatform"],target:"uploadWithoutSelect.pending"}}},{services:{fetchOpenFileList:()=>{var e,t;const r=yr();let n="";if(r===be.GoogleDrive){const r=Ge("state")||"{}";let a;try{a=JSON.parse(r)}catch{}"open"===(null==a?void 0:a.action)&&null!=(e=null==a?void 0:a.ids)&&e.length&&(n=null==(t=null==a?void 0:a.ids)?void 0:t[0])}return r===be.Dropbox&&(n=Ge("file_id")||""),n&&r?Tt.getFileList({path:"",cursor:"",page_size:1,platform:r,querys:JSON.stringify({file_ids:[n]})}):Promise.resolve([])},fetchFileList:({path:e,cursor:t,platform:r,curShop:n,curProductId:a,spaceId:i})=>r===be.Shopify?Tt.getFileList({path:e,cursor:t,page_size:20,platform:r,account_id:n,space_id:i,from_path:a,querys:e?"all":""}):Tt.getFileList({path:e,cursor:t,page_size:20,platform:r}),uploadOpenFiles:async({openingFileList:e,platform:t,spaceId:r})=>{if(null==e||!e.length)return{successFiles:[],failFiles:[],alreadyExistFiles:[],noSpaceFiles:[]};const n=e.filter((e=>"file"===e.tag&&e.is_downloadable)).map((e=>({id:e.id,name:e.name,md5:e.md5,size:e.size,coverUrl:e.cover_url,create_time:e.createAt,progress:0,status:1,_failCount:0,spaceId:r,uniqueId:`${e.id}${hr}${r}`,tt_live_file_type:e.tt_live_file_type}))),a=(await Tt.upload({file_infos:n.map((e=>({file_id:e.id,md5:e.md5,size:e.size,meta:JSON.stringify((0,W.Er)()),name:e.name,create_time:e.create_time,tt_live_file_type:e.tt_live_file_type}))),platform:t,space_id:r})).data.upload_result.reduce(((e,t)=>(e[t.file_id]=t.status,e)),{});return{successFiles:n.filter((e=>0===a[e.id])),failFiles:n.filter((e=>-1===a[e.id])),alreadyExistFiles:n.filter((e=>2===a[e.id])),noSpaceFiles:n.filter((e=>-2===a[e.id]))}},uploadFiles:async({list:e,platform:t,spaceId:r,curShop:n})=>{const a=e.filter((e=>"file"===e.tag&&e.is_downloadable&&e.checked)).map((e=>({id:e.id,name:e.name,md5:e.md5,size:e.size,coverUrl:e.cover_url,create_time:e.createAt,progress:0,status:1,_failCount:0,spaceId:r,uniqueId:`${e.id}${hr}${r}`,tt_live_file_type:e.tt_live_file_type,productId:e.productId}))),i=(await Tt.upload({file_infos:a.map((e=>({file_id:e.id,md5:e.md5,size:e.size,meta:t===be.Shopify?JSON.stringify({...(0,W.Er)(),thirdparty_platform:t,thirdparty_fileid:e.id,thirdparty_shop:n,thirdparty_productid:e.productId}):JSON.stringify((0,W.Er)()),name:e.name,create_time:e.create_time,tt_live_file_type:e.tt_live_file_type}))),platform:t,space_id:r,account_id:n})).data.upload_result.reduce(((e,t)=>(e[t.file_id]=t.status,e)),{});return{successFiles:a.filter((e=>0===i[e.id])),failFiles:a.filter((e=>-1===i[e.id])),alreadyExistFiles:a.filter((e=>2===i[e.id])),noSpaceFiles:a.filter((e=>-2===i[e.id]))}},checkUserSpace:async({list:e,spaceId:t})=>{try{const r=await vt.getEverPhotoUserSpace(t),{usage:n,quota:a}=r;let i=a-n;if(i=i>0?i:0,e.filter((e=>"file"===e.tag&&e.is_downloadable&&e.checked)).reduce(((e,t)=>e+=t.size),0)>i){const t={leftSpace:i,noSpaceList:e.filter((e=>"file"===e.tag&&e.is_downloadable&&e.checked))};return Promise.reject(t)}}catch{}return Promise.resolve()},selectSpace:async({openingFileList:e,list:t,onSelectSpace:r,workspaceList:n,onSelectWorkspaceSet:a})=>{const i=t.filter((e=>"file"===e.tag&&e.checked)),o=e||i;if(null!=o&&o.length&&r&&null!=n&&n.length){const e=await r(n,o);if(null==e||!e.workspace_id)throw new Error("select no workspace");a.forEach((t=>t(e)))}},listenUploadProgress:()=>e=>{const t=setInterval((()=>{wr||br||e("GET_UPLOAD_PROGRESS")}),3e3);return()=>{clearInterval(t)}}},actions:{showImportError:({onImportError:e},t)=>{var r,n,a,i;const o=null==(i=null==(a=null==(n=null==(r=t.data)?void 0:r.data)?void 0:n.entries)?void 0:a[0])?void 0:i.name;null==e||e(o)},assignFileSpaceId:(0,O.kp)({uploadList:({uploadList:e},t)=>{const{id:r,spaceId:n}=t;return n?e.map((e=>{var t,a;const i=new RegExp(`(\\S*)${hr}`);return e.uniqueId===r?{...e,spaceId:n,uniqueId:`${null==(a=null==(t=null==e?void 0:e.uniqueId)?void 0:t.match(i))?void 0:a[1]}${hr}${n}`}:e})):e}}),updateOpenList:(0,O.kp)({openingFileList:(e,t)=>t.data.data.entries}),clearUrl:(e,t)=>{const r=Ge("file_id");ze(["state","file_id","imported_file_id"]),"done.invoke.uploadOpenFiles"===(null==t?void 0:t.type)&&(e=>{var t;const r=We(),n=new URLSearchParams(r);for(const i in e)n.set(i,e[i]),"object"==typeof(null==(t=window.location)?void 0:t.originParams)&&(window.location.originParams[i]=e[i]);const a=`${window.location.href.split("?")[0]}?${n.toString()}`;history.replaceState("",document.title,a)})({imported_file_id:r})},updateList:(0,O.kp)({list:({list:e,path:t,platform:r},n)=>{const a=r===be.Shopify;return[].concat(e,n.data.data.entries.map((e=>({...e,checked:!1,...a?{productId:t}:{}}))))},cursor:(e,t)=>t.data.data.cursor}),toogleFile:(0,O.kp)({list:({list:e,multiple:t},r)=>e.map((e=>t?e.id===r.id?{...e,checked:r.checked}:e:e.id===r.id?{...e,checked:r.checked}:{...e,checked:!1}))}),toogleFiles:(0,O.kp)({list:({list:e,accept:t},r)=>e.map((e=>"file"!==e.tag||!e.is_downloadable||t&&-1===t.indexOf(e.name.toLowerCase().substring(e.name.lastIndexOf(".")))?e:{...e,checked:r.checked}))}),autoCheck:(0,O.kp)({autoCheck:(e,t)=>null==t?void 0:t.autoCheck}),enterFolder:(0,O.kp)({path:(e,t)=>t.path,cursor:()=>"",list:()=>[]}),setPlatform:(0,O.kp)({platform:(e,t)=>t.platform||e.platform}),setCurShop:(0,O.kp)({curShop:(e,t)=>t.curShop||e.curShop}),clearList:(0,O.kp)({path:()=>"",cursor:()=>"",list:()=>[]}),clearProductId:(0,O.kp)({curProductId:()=>""}),updateSelectedUserId:(0,O.kp)({selectedUserId:e=>{if(!e.selectedUserId){const{accountId:e}=Ht();return e}return e.selectedUserId}}),unbind:(0,O.tN)((({platform:e})=>({type:"ADD_TASK",exec:async()=>{await ht.thirtpartCloudsDeauthorization({platform:e})},successType:"UNBIND_SUCCESS",failType:"UNBIND_FAIL"})),{to:"asyncTaskActor"}),handleUnbindSuccess:({onUnBindSuccess:e})=>{null==e||e()},handleUnbindError:({onUnBindError:e})=>{null==e||e()},updatePartialCallback:(0,O.kp)(((e,t)=>({...e,...t.context}))),handleCheckUserSpaceFail:({onUploadNoSpace:e},t)=>{const{leftSpace:r,noSpaceList:n}=t.data||{};null==e||e(r,n)},handleUploadSuccess:(0,O.kp)({uploadList:({uploadList:e},t)=>[...e,...t.data.successFiles],cancelList:({cancelList:e},t)=>(t.data.successFiles.forEach((t=>{e.delete(t.uniqueId)})),e)}),handleUploadFail:({onUploadFail:e},t)=>{const{failFiles:r}=t.data;r.forEach((t=>{null==e||e(t)}))},handleUploadNoSpace:({onUploadNoSpace:e},t)=>{const{noSpaceFiles:r}=t.data,n=r.map((e=>({tag:"file",is_downloadable:!0,md5:e.md5,id:e.id,name:e.name,path_display:"",size:e.size,cover_url:e.coverUrl,format:"",checked:!0})));r.length>0&&(null==e||e(0,n))},handleUploadExist:({onUploadExist:e},t)=>{const{alreadyExistFiles:r}=t.data;r.forEach((t=>{null==e||e(t)}))},getUploadProgress:(0,O.tN)((({uploadList:e,platform:t})=>({type:"ADD_TASK",exec:async()=>{const r=e.filter((e=>0!==e.status));if(0===r.length)return r;const n=r.filter((e=>1===e.status));if(0===n.length)return r;br=!0;const a={};n.forEach((e=>{const{spaceId:t}=e;a[t]?a[t].push(e):a[t]=[e]}));const i=Object.keys(a),o=i.map((e=>{var r;return Tt.getUploadProgress({file_infos:null==(r=a[e])?void 0:r.map((e=>({file_id:e.id,md5:e.md5,size:e.size}))),platform:t,space_id:e})})),s=(await Promise.all(o)).reduce(((e,t,r)=>[...e,...t.data.upload_result.map((e=>({...e,uniqueId:`${e.file_id}${hr}${i[r]}`})))]),[]).reduce(((e,t)=>(e[t.uniqueId]=t,e)),{});return e.map((e=>{var t;return s[e.uniqueId]?{...e,fileId:null==(t=s[e.uniqueId].metadata)?void 0:t.id,metadata:s[e.uniqueId].metadata,progress:s[e.uniqueId].progress,status:s[e.uniqueId].status}:e})).filter((e=>-3!==e.status))},successType:"GET_UPLOAD_PROGRESS_SUCCESS",failType:"GET_UPLOAD_PROGRESS_FAIL"})),{to:"asyncTaskActor"}),handleUploadProgressSuccess:(0,O.kp)({uploadList:({uploadList:e,cancelList:t},r)=>{const{data:n}=r,a=new Map(n.map((e=>[e.uniqueId,e])));return e.map((e=>{if(a.has(e.uniqueId)){const t=a.get(e.uniqueId);return{...e,...t,_failCount:[-1,-2].find((e=>e===t.status))?t._failCount+1:t._failCount}}return e})).filter((e=>!t.has(e.uniqueId)))}}),addOnSelect:({onSelectWorkspaceSet:e},t)=>{e.add(t.callback)},addOnUpload:({onUploadSet:e},t)=>{e.add(t.callback)},removeOnUpload:({onUploadSet:e},t)=>{e.delete(t.callback)},handleUpload:(0,O.kp)({uploadList:({uploadList:e,onUploadSet:t,cancelList:r})=>(e.forEach((e=>{[-1,-2].find((t=>t===e.status))&&e._failCount>1||wr||t.forEach((t=>t(e)))})),e.filter((e=>0!==e.status)).filter((e=>!r.has(e.uniqueId))))}),onBatchUploadSuccess:(0,O.kp)({uploadList:({onBatchUploadSuccess:e,uploadList:t},r)=>(null==e||e(r.data.successFiles),t)}),retryUpload:(0,O.tN)((({uploadList:e,platform:t},r)=>({type:"ADD_TASK",exec:async()=>{var n,a,i;const{id:o,spaceId:s}=r,c=new RegExp(`(\\S*)${hr}`),l=s?`${null==(n=null==o?void 0:o.match(c))?void 0:n[1]}${hr}${s}`:o,u=e.find((e=>e.uniqueId===l));return u&&0===(null==(i=null==(a=(await Tt.upload({file_infos:[{file_id:u.id,md5:u.md5,size:u.size,name:u.name,meta:JSON.stringify((0,W.Er)()),tt_live_file_type:u.tt_live_file_type}],platform:t,space_id:u.spaceId})).data.upload_result)?void 0:a[0])?void 0:i.status)?l:Promise.reject()},successType:"RETRY_UPLOAD_SUCCESS",failType:"RETRY_UPLOAD_FAIL"})),{to:"asyncTaskActor"}),handleRetryUploadSuccess:(0,O.kp)({uploadList:({uploadList:e},t)=>{const r=t.data;return e.map((e=>e.uniqueId===r?{...e,status:1,_failCount:0}:e))}}),deleteUpload:(0,O.tN)((({platform:e},t)=>({type:"ADD_TASK",exec:async()=>{wr=!0;const{md5:r,size:n,uniqueId:a}=t.item,[i,o]=a.split(hr);return(await Tt.cancelUpload({file_infos:[{file_id:i,md5:r,size:n}],platform:e,space_id:o})).data.cancel_upload_results[i]?t.resolve(null):t.reject(null),t.item},successType:"CANCEL_SUCCESS",failType:"CANCEL_FAIL"})),{to:"asyncTaskActor"}),updateMaxUploadSize:(0,O.kp)({maxUploadSize:(e,t)=>t.size}),updateCountLimit:(0,O.kp)({countLimit:(e,t)=>t.limit}),handleServerError:({onServerError:e},t)=>{null==e||e(t)},updateIsBOE:(0,O.kp)({isBOE:(e,t)=>t.value}),updateDraftId:(0,O.kp)({draftId:(e,t)=>t.draftId}),updateToolType:(0,O.kp)({toolType:(e,t)=>t.toolType}),updateWorkspaceList:(0,O.kp)({workspaceList:(e,t)=>t.list}),updateSpaceId:(0,O.kp)({spaceId:(e,t)=>t.spaceId}),modalCloseCb:({thirdPartyFileModalCloseCb:e})=>{null==e||e("shopify_list_close")},reportShow:({platform:e,draftId:t,currentPage:r,toolType:n,videoTypeId:a,templateId:i})=>{gr.upLoadWindowReport({action:"show",source:Se[e],draft_id:t,current_page:r,tool_type:n,video_type_id:a,template_id:i})},reportUnbind:({platform:e,draftId:t,currentPage:r,toolType:n})=>{gr.upLoadWindowReport({action:"unbudle",source:Se[e],draft_id:t,current_page:r,tool_type:n})},reportCancel:({platform:e,draftId:t,currentPage:r,toolType:n,videoTypeId:a,templateId:i})=>{gr.upLoadWindowReport({action:"cancel",source:Se[e],draft_id:t,current_page:r,tool_type:n,video_type_id:a,template_id:i})},reportSwitch:({platform:e,draftId:t,currentPage:r,toolType:n,videoTypeId:a,templateId:i})=>{gr.upLoadWindowReport({action:"switch_account",source:Se[e],draft_id:t,current_page:r,tool_type:n,video_type_id:a,template_id:i})},reportContinue:({platform:e,draftId:t,currentPage:r,toolType:n,videoTypeId:a,templateId:i})=>{gr.upLoadWindowReport({action:"continue",source:Se[e],draft_id:t,current_page:r,tool_type:n,video_type_id:a,template_id:i})},reportSelect:({platform:e,draftId:t,list:r,currentPage:n,toolType:a,videoTypeId:i,templateId:o})=>{const{materialSize:s,materialCnt:c}=(e=>{let t=0,r=0;return e.forEach((e=>{e.checked&&(t+=e.size,r++)})),{materialSize:t,materialCnt:r}})(r);gr.upLoadWindowReport({action:e===be.Shopify?"select":"confirm",source:Se[e],material_size:(s/1024).toFixed(0),material_cnt:c,draft_id:t,current_page:n,tool_type:a,video_type_id:i,template_id:o})},unlockFetchUploadProgress:()=>{br=!1},uploadListDeleteItem:(0,O.kp)({uploadList:({uploadList:e},t)=>{const{id:r,spaceId:n}=t.data;return e.filter((e=>e.id!==r||e.spaceId!==n))}}),addCancelList:(0,O.kp)({cancelList:({cancelList:e},t)=>(e.add(t.data.uniqueId),e)}),unlockCancelUpload:()=>{wr=!1},uploadWithoutSelect:(0,O.kp)({list:(e,t)=>{const{data:r=[]}=t;return r.map((e=>({...e,tag:"file",is_downloadable:!0,checked:!0})))}}),fetchFileFail:({thirdPartyFileOpenErrorCb:e})=>{null==e||e("file_list_error")},handleAuthReject:({thirdPartyFileOpenStopCb:e})=>{null==e||e("auth_reject")}},guards:{isEmptyFileList:({list:e},t)=>0===e.length&&0===t.data.data.entries.length,isNoMoreFileList:(e,t)=>!t.data.data.has_more,isUploadProgressSuccess:(e,t)=>t.data.length>0,isReachMaxUploadSize:({list:e,maxUploadSize:t})=>e.filter((e=>"file"===e.tag&&e.is_downloadable&&e.checked)).reduce(((e,t)=>e+=t.size),0)>t,canImport:(e,t)=>{var r,n,a,i;const{video:o,audio:s}=Pe,c=[...o,...s];if(!(null==(r=location.pathname)?void 0:r.includes(ue.PATH)))return!0;const l=null==(i=null==(a=null==(n=t.data.data)?void 0:n.entries)?void 0:a[0])?void 0:i.name;return!c.find((e=>l.includes(e)))},isAuthorized:(e,t)=>t.data.isAuthorized,shouldOpenThirdPartyFile:(e,t)=>!(!t.data.isAuthorized||!yr())}}),Er=e=>{const t={MONTH:1,YEAR:12},r={1:"1_month",12:"12_month"};if(null==e||!e.cycleUnit||null==e||!e.subscribeCycle)return"free";const n=((null==t?void 0:t[e.cycleUnit])??0)*e.subscribeCycle;return n&&null!=r&&r[n]?`${r[n]}${"auto"===e.subscribeType?"_auto":""}`:"free"},Ar=e=>{var t,r;const n=null==(r=null==(t=null==e?void 0:e.spaceList)?void 0:t.filter((e=>!e.product_id.includes("subscription"))))?void 0:r.reduce(((e,t)=>t.space_capacity+e),0);return n?ce(n,"gb"):"0GB"},kr=e=>{const t={MONTH:1,YEAR:12},r={1:"1_month",12:"12_month"};if(null==e||!e.cycle_unit||null==e||!e.subscribe_cycle)return"free";const n=((null==t?void 0:t[e.cycle_unit])??0)*e.subscribe_cycle;return n&&null!=r&&r[n]?`${r[n]}${e.auto_subscribe?"_auto":""}`:"free"};s.forwardRef((({handleValidate:e,toBind:t},r)=>{const{isChangeSubTab:a}=(0,s.useContext)(se),i=(0,s.useContext)(se).expandModalInstance.instanceService,u=(0,l.d)(i,(e=>e.context.paymentMethods)),p=(0,l.d)(i,(e=>e.context.isBOE)),_=(0,l.d)(i,(e=>e.context.locale)),f=(0,l.d)(i,(e=>e.hasTag("loading"))),h=(0,l.d)(i,(e=>e.context.userInfo)),g=(0,l.d)(i,(e=>e.hasTag("fail"))),m=(0,l.d)(i,(e=>e.context.reporterParams)),v=(0,l.d)(i,(e=>e.context.cloudInfo)),y=(0,l.d)(i,(e=>e.context.productInfo)),w=(0,l.d)(i,(e=>e.context.orderInfo)),E=(0,l.d)(i,(e=>e.context.currentPayment)),A=(0,s.useCallback)((e=>jt.getDistrict({serviceProps:{isBOE:p,region:h.region},basicInfoProps:{language:_,key:"83639969f5b36a5e31a83487aedcbc9b",geonameid:e}})),[]);return(0,o.jsxs)(b.A,{webp:!0,className:"lv-storage-expand_payment-dropin-container",loading:f,children:[!g&&(0,o.jsx)(S.bv,{ref:r,onGetUnifiedBinDetail:async(e,t)=>await jt.getUnifiedBinDetail({serviceProps:{isBOE:p,region:h.region},basicInfoProps:{card_number:e,country_or_region:t,merchant_user_id:h.uid}}),paymentMethodsList:u.paymentMethodsList,onSubmit:async e=>{const{formData:r,paymentMethodType:n,paymentParams:o,paymentMethod:s,storeCard:c,token:l}=e,u={method_id:s.paymentMethodId,payment_method_token:l,payment_elements:o};"CCDC"===n&&!l&&(u.element_params=r),t?(i.send({type:"REPORT_CLOUD_PAY_WINDOW",action:ar.LINK}),i.send({type:"BINDPAYPAl",entryTag:"bind",pipoSubmitParams:e})):(i.send({type:"REPORT_CLOUD_PAY_WINDOW",action:ar.PAY}),((e,t,r,n,a,i,o)=>{var s,c,l;(new rr).report({action:"payment_pay",pay_type:null!=(l=null==(c=null==(s=null==t?void 0:t.payment_method)?void 0:s.method_id)?void 0:c.includes)&&l.call(c,"ccdc")?"ccdc":"paypal",order_id:o,sub_page:null!=r&&r.isCloud?"cloud":"vip",page_from:null==n?void 0:n.pageFrom,is_switch_tab:e?1:0,page_from_extra:null==n?void 0:n.pageFromExtra,product_id:r?null==r?void 0:r.product_id:void 0,currency:r?null==r?void 0:r.currency_code:void 0,membership_type_now:Er(a),membership_type_buy:null!=r&&r.isCloud||!r?void 0:kr(r),is_free_trial:null!=r&&r.isCloud||!r?void 0:r.can_trial?1:0,price:r?Number(null==r?void 0:r.price_tips):void 0,cloud_storage_now:Ar(i),cloud_storage_buy:null!=r&&r.isCloud?null==r?void 0:r.product_capacity_tips:void 0,current_page:null==n?void 0:n.currentPage})})(a,E,y,m,null==h?void 0:h.vipInfo,v,null==w?void 0:w.order_id),i.send({type:"PAYING",data:{store_payment_method:c,payment_method:u},pipoSubmitParams:e,entryTag:"pay"}))},storedPaymentMethodsList:u.storedPaymentMethodsList,onValidate:t=>{e(t)},onSelectPaymentMethod:e=>{const t=e.paymentMethod.paymentMethodId;i.send({type:"SAVE_BIND_PAYMENT",paymentMethod:{method_id:t,payment_elements:[],payment_method_token:e.token}})},onFetchDistrict:A,onQueryOrder:()=>null}),g&&(0,o.jsxs)("div",{className:"fetchError",children:[(0,o.jsx)("div",{className:"icon",children:(0,o.jsx)(d.cwh,{size:100})}),(0,o.jsx)("div",{className:"context",children:c.Ay.t("web_cash_and_pay_plan_could_not_load",{},"Couldn\u2019t load")}),(0,o.jsx)(n.A,{onClick:()=>{i.send({type:"RE_FETCH"})},children:c.Ay.t("web_cash_and_pay_plan_reload",{},"Reload")})]})]})}));var Pr=(e=>(e.CAPACITY_INSUFFICIENT="CAPACITY_INSUFFICIENT",e.CAPACITY_INSUFFICIENT_WITH_BUY="CAPACITY_INSUFFICIENT_WITH_BUY",e.CAPACITY_BUY="CAPACITY_BUY",e.UPLOAD_FULL_SPACE_RESOLVE="UPLOAD_FULL_SPACE_RESOLVE",e.VIP_BUY="VIP_BUY",e.MANAGEMENT="MANAGEMENT",e))(Pr||{});et.Month,et.Year;var Ir=(e=>(e.UpgradeToPro="upgrade_to_pro",e.profileIconUpgrade="profile_icon_upgrade",e.spaceUpgrade="space_upgrade",e.spaceLimitUpgrade="space_limit_upgrade",e.removeWatermarkUpgrade="remove_watermark_upgrade",e.allowDownloadUpgrade="allow_download_upgrade",e.editUpgradeToUnlock="edit_upgrade_to_unlock",e.exportUpgradeToPro="export_upgrade_to_pro",e.notification="notification",e))(Ir||{});const Cr=me.CLOUD_STORAGE_PAYMENT_AND_BINDING,Tr=({isBind:e,orderId:t,isSubscribe:r,disabledClosed:n=!0})=>`${window.location.origin+le.PATH}?callBackType=${me.CLOUD_STORAGE_PAYMENT_AND_BINDING}&is_bind=${e}&orderId=${t}&isSubscribe=${r}&disabledClosed=${n}`,xr=({isBind:e,orderId:t,isSubscribe:r})=>`${Tr({isBind:e,orderId:t,isSubscribe:r})}&notify=true`,Rr=(e,t)=>({environment:e?"test":"live",locale:t,flow:"web",color_theme:"light"}),Nr=e=>{var t,r,n;const a=(null==(t=null==e?void 0:e.spaceList)?void 0:t.length)&&(null==(n=null==(r=null==e?void 0:e.spaceList)?void 0:r.reduce(((e,t)=>e.space_end>t.space_end?e:t)))?void 0:n.space_end)||0;return a?m()(1e3*a).format("YYYY/MM/DD"):""},Lr=e=>{var t;return null!=e&&e.isFirstSubscribe?nr.NOT_YET:null!=(t=null==e?void 0:e.spaceList)&&t.length?nr.IN_PROGRESS:nr.EXPIRE},Or=e=>{var t,r,n;return null!=(r=null==(t=null==e?void 0:e.payment_method)?void 0:t.method_id)&&r.includes("paypal")?or.PAYPAL:null!=(n=null==e?void 0:e.payment_method)&&n.payment_method_token?or.CARD:or.NEW_CARD},Dr=e=>Math.round(e/1048576*100)/100;const Ur={webid:"",pipoSubmitParams:void 0,entryTag:"pay",enableSubscription:void 0,videoOperation:[],isVideoOperationPlay:!0,isShowCloudExpandEntrance:!0,userInfo:void 0,cloudInfo:void 0,workspaceInfo:void 0,workspaceList:void 0,defaultWorkspaceInfo:void 0,isBOE:!0,productInfo:void 0,orderInfo:void 0,bindInfo:void 0,locale:"en",vipGroupProductList:{[et.Month]:[],[et.Year]:[]},groupProductList:[],allPriceList:void 0,allVipPriceList:void 0,currentPayment:void 0,agreementLinks:{privacy_policy:"",terms_of_service:"",payment_agreement:""},paymentMethods:{paymentMethodsList:[],storedPaymentMethodsList:[]},subscribeInfo:[],riskInfo:void 0,reporterParams:void 0,onPayStatusChange:()=>{},onModalStatusChange:()=>{},onBindStatusChange:()=>{},handleReporterProcessing:()=>{},cancelSubscrtbeErrorCallback:()=>{},cancelSubscrtbeSuccessCallback:()=>{},handleCloseCancelRenewalModal:()=>{}};(0,L.O)({id:"LvStorageExpandService",context:Ur,initial:"initing",invoke:[{id:"fetchVideoOperation",src:"fetchVideoOperation",onDone:{actions:"saveVideoOperation"}},{id:"getSubscriptionAb",src:"getSubscriptionAb",onDone:{actions:"assignEnableSubscription"}}],states:{initing:{initial:"unknow",states:{unknow:{always:[{target:"unLogin",cond:"noLogined"},{target:"login"}]},unLogin:{on:{USER_HAS_LOGIN:{target:"login"}}},login:{entry:["initStorageListener"],tags:"loading",invoke:[{id:"fetchGroupProductList",src:"fetchGroupProductList",onDone:{target:"#LvStorageExpandService.hide",actions:["saveGroupProductList","saveAllPriceList","saveWebDisplay"]},onError:{target:"#LvStorageExpandService.hide"}}]}}},hide:{entry:["setDefaultproductInfo"]},display:{initial:"working",invoke:[{id:"asyncTaskActor",src:ur},{id:"getSubscribeInfo",src:"getSubscribeInfo",onDone:{actions:"saveSubscribeInfo"}},{id:"getSpaceList",src:"getSpaceList",onDone:{actions:"saveSpaceList"}}],states:{working:{initial:"selectingVipProduct",states:{selectingVipProduct:{initial:"loading",entry:["clearOrderInfo","clearProductInfo","clearPayment","clearPaymentMethods","clearBindInfo"],states:{loading:{tags:"loading",invoke:[{id:"fetchVipGroupProductList",src:"fetchVipGroupProductList",onDone:{actions:["saveVipGroupProductList","saveAllVipPriceList","saveWebDisplay"]},onError:{target:"fetchError"}}],always:[{target:"selecting",cond:"isVipListPreDataReady"}]},selecting:{},fetchError:{tags:["fail"]}},on:{SHOW_PAYMENT_METHODS:{target:"selectingPayment",actions:["saveCurrentProduct"]},GO_CLOUD_PRODUCT:{target:"selectingProduct"},RE_FETCH:{target:".loading"}}},selectingProduct:{tags:["package"],entry:["clearOrderInfo","clearProductInfo","clearPayment","clearPaymentMethods","clearBindInfo"],initial:"loading",states:{loading:{tags:"loading",invoke:[{id:"fetchGroupProductList",src:"fetchGroupProductList",onDone:{actions:["saveGroupProductList","saveAllPriceList","saveWebDisplay"]},onError:{target:"fetchError"}}],always:[{target:"selecting",cond:"isSpaceListPreDataReady"}]},selecting:{},fetchError:{tags:["fail"]}},on:{RECORD_CURRENT_PRODUCT:{actions:["saveCurrentProduct"]},SHOW_PAYMENT_METHODS:{target:"selectingPayment",actions:["saveCurrentProduct"]},BACK:{target:"selectingVipProduct"},RE_FETCH:{target:".loading"}}},selectingPayment:{tags:["pay","back"],initial:"loading",entry:"clearOrderInfo",states:{loading:{tags:"loading",invoke:[{src:"fetchPaymentMethods",id:"fetchPaymentMethods",onDone:[{target:"fillingForm",actions:"savePaymentMethods"}],onError:{target:"fetchError"}}]},fetchError:{tags:["fail"],on:{RE_FETCH:{target:"loading"}}},fillingForm:{}},on:{PAYING:{actions:["saveCurrentPayment","recodeEntryTag","savePipoSubmitParams"],target:"getOrderInfo"},SAVE_BIND_PAYMENT:{actions:"saveBindPayment"},BINDPAYPAl:{target:"getOrderInfo",actions:["recodeEntryTag","savePipoSubmitParams"]},CHANGE_PAYMENT:{actions:"changePayment"},SAVE_RISK_INFO:{actions:"saveRiskInfo"},BACK:[{target:"selectingProduct",cond:"isCloudProduct"},{target:"selectingVipProduct"}]}},getOrderInfo:{initial:"loading",always:[{target:"paying",cond:({orderInfo:e,entryTag:t})=>!!e&&("pay"===t&&0===e.type)},{target:"binding",cond:({orderInfo:e,entryTag:t})=>!!e&&("bind"===t&&0===e.type)},{target:"binding",cond:({orderInfo:e})=>!!e&&2===e.type},{target:"binding.freeTrialLinkSuccess",actions:e=>{const{onBindStatusChange:t,onPayStatusChange:r}=e;null==r||r("SUCCESS",e),null==t||t("SUCCESS")},cond:({orderInfo:e})=>!!e&&1===e.type}],invoke:{src:"fetchPaymentOrderId",id:"fetchPaymentOrderId",onDone:[{actions:["savePaymentOrderId","getRiskInfo"]}],onError:{target:".fail"}},states:{loading:{tags:["loading"]},fail:{tags:["fail"]}},on:{RETRY_SELECT_PAYMENT:{target:"selectingPayment"},BACK_SELECTING_PAYMENT:{target:"selectingPayment"},BACK:[{target:"selectingProduct",cond:"isCloudProduct"},{target:"selectingVipProduct"}]}},paying:{initial:"judging",tags:["pay"],invoke:[{id:"listeningStateChange",src:"listeningStateChange"}],states:{judging:{tags:["loading","back"],always:[{cond:"inPaymentPending",target:"loading"},{cond:"inPaymentSuccess",target:"success"},{cond:"inPaymentFail",target:"fail"}],invoke:{id:"handlePaying",src:"handlePaying",onDone:[{target:"loading",actions:"handleRedirect",cond:(e,t)=>"redirect"===t.data.result_code},{target:"intervalLoading",cond:(e,t)=>"accepted"===t.data.result_code||"success"===t.data.result_code,actions:"closeProxyWindow"},{target:"fail",cond:(e,t)=>["error","canceled"].includes(t.data.result_code),actions:"closeProxyWindow"},{target:"fail",actions:"closeProxyWindow"}],onError:{target:"fail",actions:"closeProxyWindow"}}},loading:{tags:["loading","back"],entry:"updateOrderPendingInfo"},intervalLoading:{tags:["loading","back"],invoke:{id:"intervalCheckStatus",src:"intervalCheckStatus"}},queryLoading:{tags:["loading","queryLoading","back"],invoke:{id:"intervalCheckStatus",src:"intervalCheckStatus"}},success:{tags:"success",entry:["handleStatusChange","updateOrderSuccessStatus"],invoke:{id:"invokeReportStatus",src:"invokeReportStatus"}},fail:{tags:"fail",entry:["handleStatusChange","updateOrderFailStatus"],invoke:{id:"invokeReportStatus",src:"invokeReportStatus"}}},on:{BACK_SELECTING_PRODUCT:{target:"selectingProduct"},BACK:[{target:"selectingProduct",cond:"isCloudProduct"},{target:"selectingVipProduct"}],ON_OK:[{target:"selectingProduct",cond:"isCloudProduct"},{target:"selectingVipProduct"}],TO_SUCCESS:{target:".success"},TO_FAIL:{target:".fail",actions:["updateOrderFailCode"]},TO_CHECK_RESULT:{target:".queryLoading"},RETRY_SELECT_PAYMENT:{target:"selectingPayment"}}},binding:{initial:"unknown",tags:["pay","link"],invoke:{id:"listeningStateChange",src:"listeningStateChange"},states:{unknown:{tags:["loading","back"],invoke:{id:"storePaymentMethod",src:"storePaymentMethod",onDone:[{target:"queryLoading",actions:["saveIdempotencyKey","closeProxyWindow"],cond:(e,t)=>"success"===t.data.result_code},{target:"bindLoading",actions:["handleRedirect","saveIdempotencyKey"],cond:(e,t)=>"redirect"===t.data.result_code},{target:"fail",cond:(e,t)=>"error"===t.data.result_code,actions:"closeProxyWindow"},{target:"fail",actions:"closeProxyWindow"}],onError:{target:"fail",actions:"closeProxyWindow"}}},bindLoading:{tags:["loading","back"],on:{TO_CHECK_RESULT:{target:"queryLoading"}}},queryLoading:{tags:["loading","back","queryLoading"],invoke:{id:"queryBindStatus",src:"queryBindStatus",onDone:[{target:"freeTrialLinkSuccess",actions:e=>{const{onBindStatusChange:t,onPayStatusChange:r}=e;null==r||r("SUCCESS",e),null==t||t("SUCCESS")},cond:({productInfo:e},t)=>!(null==e||!e.can_trial||"success"!==t.data.status)},{target:"success",actions:({onBindStatusChange:e})=>{null==e||e("SUCCESS")},cond:({productInfo:e},t)=>!(null!=e&&e.can_trial)&&"success"===t.data.status},{target:"fail",actions:({onBindStatusChange:e})=>{null==e||e("FAIL")},cond:(e,t)=>"error"===t.data.status},{target:"bindLoading",actions:({onBindStatusChange:e})=>{null==e||e("PROCESSING")}}]}},freeTrialLinkSuccess:{tags:"success"},success:{tags:"success"},fail:{tags:"fail"}},on:{RETRY_SELECT_PAYMENT:{target:"selectingPayment"},BACK_SELECTING_PAYMENT:{target:"selectingPayment"},BACK:[{target:"selectingProduct",cond:"isCloudProduct"},{target:"selectingVipProduct"}],ON_OK:[{target:"selectingProduct",cond:"isCloudProduct"},{target:"selectingVipProduct"}],INIT_BIND_STATUS_CHANGE:{actions:["initBindStatusChange"]}}},back:{type:"history",history:"shallow"}}},autoRenewal:{initial:"loading",tags:["back","manage","renewalBack"],states:{loading:{tags:"loading",invoke:{id:"getSubscribeInfo",src:"getSubscribeInfo",onDone:{target:"fillingForm",actions:"saveSubscribeInfo"},onError:{target:"fetchError"}}},fetchError:{tags:["fail"],on:{RE_FETCH:{target:"loading"}}},fillingForm:{},cancelRenewal:{tags:"cancelRenewalLoading",invoke:{id:"cancelAutoRenewal",src:"cancelAutoRenewal",onDone:{target:"loading",actions:["changeCloudCancelStatus",({cancelSubscrtbeSuccessCallback:e,handleCloseCancelRenewalModal:t})=>{e(),null==t||t()}]},onError:{target:"fillingForm",actions:({cancelSubscrtbeErrorCallback:e})=>{e()}}}}},on:{BACK:{target:"working.back"},CANCEL:{target:".cancelRenewal",actions:(0,O.kp)({handleCloseCancelRenewalModal:(e,t)=>null==t?void 0:t.handleCloseCancelRenewalModal})}}}},on:{BACK_HIDE:{actions:(0,O.kp)({isShowCloudExpandEntrance:()=>!0})},TO_AUTO_RENEWAL:{target:".autoRenewal"},QUERY_STATUS:[{target:".working.paying.queryLoading",in:"#LvStorageExpandService.display.working.paying.loading"},{target:".working.binding.queryLoading",in:"#LvStorageExpandService.display.working.binding.bindLoading"}]}}},on:{SAVE_VIDEO_OPERATION:{actions:["saveVideoOperation"]},SHOW_PAY_MODAL:{target:"display",actions:["reportCloudEntrance"]},HIDE_PAY_MODAL:{target:"hide",actions:["hidePayModal"]},REPORT_INSUFFICIENT_MODAL:{actions:["reportSpacePopup"]},REPORT_CLOUD_PAY_WINDOW:{actions:["reportCloudPayWindow"]},REPORT_CLOUD_CLOSE_POPUP:{actions:["reportCloudClosePopup"]},DISPLAY_BACK:{target:"display"},INIT_PARAMS:{actions:"initParams"},INIT_REPORTER_PARAMS:{actions:"initReporterParams"},INIT_TO_CLOUD:{target:"display.working.selectingProduct",actions:["reportCloudEntrance"]},VIDEO_OPERATION_PLAY:{actions:(0,O.kp)({isVideoOperationPlay:()=>!0})},VIDEO_OPERATION_PAUSE:{actions:(0,O.kp)({isVideoOperationPlay:()=>!1})},UNSHOW_CLOUD_EXPAND:{target:"display",actions:[(0,O.kp)({isShowCloudExpandEntrance:()=>!1}),"reportCloudEntrance"]},SHOW_AUTO_RENEWAL:{target:"display.autoRenewal",actions:[(0,O.kp)({isShowCloudExpandEntrance:()=>!1}),"reportCloudEntrance"]}}},{guards:{noLogined:e=>{var t;return!(null!=(t=null==e?void 0:e.userInfo)&&t.hasLogined)},inPaymentPending:e=>{var t;return(null==(t=e.orderInfo)?void 0:t.order_status)===Xe.PENDING},inPaymentSuccess:e=>{var t;return(null==(t=e.orderInfo)?void 0:t.order_status)===Xe.SUCCESS},inPaymentFail:e=>{var t;return(null==(t=e.orderInfo)?void 0:t.order_status)===Xe.FAIL},isCloudProduct:e=>{var t;return!(null==(t=null==e?void 0:e.productInfo)||!t.isCloud)},isVipListPreDataReady:e=>!!e.allVipPriceList,isSpaceListPreDataReady:e=>!(!e.cloudInfo||!e.allPriceList)},actions:{saveVipGroupProductList:(0,O.kp)({vipGroupProductList:(e,t)=>t.data.vipGroupProductList}),saveAllVipPriceList:(0,O.kp)({allVipPriceList:(e,t)=>t.data.allVipPriceList}),getRiskInfo:(0,O.kp)({riskInfo:({userInfo:e,locale:t,allPriceList:r,allVipPriceList:n,webid:a,productInfo:i},o)=>{var s,c,l,u;const d=(0,U.DR)();return(0,U.DJ)(null==(s=null==o?void 0:o.data)?void 0:s.order_id),JSON.stringify({...d,screen_resolution:[null==d?void 0:d.screen_width,null==d?void 0:d.screen_height],user_register_country:null==e?void 0:e.region,email:null==e?void 0:e.email,user_register_time:null==e?void 0:e.createTime,account_name:null==e?void 0:e.name,account_create_days:(Number(new Date)/1e3-e.createTime)/86400,uid:null==e?void 0:e.uid,app_name:de.APP_NAME,app_id:de.APP_ID,app_language:t,sys_language:t,os_version:navigator.userAgent,device_id:a,ip:null==(c=o.data)?void 0:c.client_ip,terminal_type:Be().env,update_time:Number(new Date),user_id:null==e?void 0:e.uid,user_create_time:new Date(1e3*((null==e?void 0:e.createTime)??0)).toISOString(),request_id:null==(l=o.data)?void 0:l.order_id,item_sku_product_info:null==(u=null!=i&&i.isCloud?r:n)?void 0:u.map((e=>({item_sku_id:e.product_id,item_sku_unit_price:e.price_tips,item_sku_currency:e.currency_code,item_sku_quantity:1})))})}}),recodeEntryTag:(0,O.kp)({entryTag:(e,t)=>t.entryTag}),savePipoSubmitParams:(0,O.kp)({pipoSubmitParams:(e,t)=>t.pipoSubmitParams}),saveSpaceList:(0,O.kp)({cloudInfo:(e,t)=>t.data}),saveVideoOperation:(0,O.kp)({videoOperation:(e,t)=>t.data}),reportSpacePopup:({handleReporterProcessing:e,reporterParams:t,workspaceInfo:r},n)=>{try{null==e||e("cloud_space_popup",{action:n.action,enter_from:t.enterFrom,current_page:t.currentPage,space_id:null==r?void 0:r.workspace_id,role:null==r?void 0:r.role,space_user_cnt:null==r?void 0:r.member_cnt,tool_type:(null==t?void 0:t.toolType)||""})}catch(a){console.error("reportSpacePopup",a)}},reportCloudEntrance:({handleReporterProcessing:e,cloudInfo:t,workspaceInfo:r,reporterParams:n})=>{try{null==e||e("click_cloud_entrance",{status:Lr(t),enter_from:n.enterFrom,current_page:n.currentPage,tool_type:null==n?void 0:n.toolType,used_space:Dr((null==r?void 0:r.usage)??0),max_space:Dr((null==r?void 0:r.quota)??0),expire_date:Nr(t),space_id:null==r?void 0:r.workspace_id})}catch(a){console.error("reportCloudEntrance",a)}},reportCloudPayWindow:({handleReporterProcessing:e,workspaceInfo:t,orderInfo:r,currentPayment:n,bindInfo:a,productInfo:i,cloudInfo:o,reporterParams:s},c,{state:l})=>{var u,d;try{const{action:p}=c;let _=ir.PACKAGE,f={};l.hasTag("manage")?(_=ir.MANAGE,f={pay_channel:null!=(d=null==(u=null==a?void 0:a.paymentMethod)?void 0:u.method_id)&&d.includes("paypal")?or.PAYPAL:or.CARD}):l.hasTag("pay")&&(f={cloud_storage_buy:Dr((null==i?void 0:i.product_capacity)??0),cloud_type_buy:null==i?void 0:i.product_id,origin_price:Number(i.price_tips),price:Number(i.price_tips),currency:null==i?void 0:i.currency_code,order_id:null==r?void 0:r.order_id,pay_channel:Or(n)},_=l.hasTag("link")?ir.LINK:ir.PAY,!l.hasTag("link")&&[ar.OK,ar.PAY_STATUS].includes(p)&&(f={...f,pay_status:(null==r?void 0:r.order_status)===Xe.SUCCESS?sr.SUCCESS:sr.FAIL})),null==e||e("cloud_pay_window",{action:p,enter_from:s.enterFrom,current_page:s.currentPage,tool_type:s.toolType,status:Lr(o),sub_page:_,cloud_storage_now:Dr(t.quota),cloud_storage_used:Dr(t.usage),expire_date:Nr(o),space_id:null==t?void 0:t.workspace_id,space_user_cnt:null==t?void 0:t.member_cnt,...f})}catch(p){console.error("reportCloudPayWindow",p)}},hidePayModal:e=>{const{onModalStatusChange:t}=e;null==t||t("CLOSED",e)},reportCloudClosePopup:({handleReporterProcessing:e},t)=>{null==e||e("cancel_sub_popup",{action:t.action})},handleRedirect:({orderInfo:e},t)=>{var r;"redirect"===(null==t?void 0:t.data.result_code)&&He.setNestedJsonItem(Cr,e.order_id,{url:null==(r=t.data)?void 0:r.redirect_details.url,status:"PENDING"})},closeProxyWindow:({orderInfo:e})=>{He.setNestedJsonItem(Cr,e.order_id,{status:"CLOSED"})},handleStatusChange:(e,t,{state:r})=>{const{onPayStatusChange:n}=e;r.hasTag("success")?null==n||n("SUCCESS",e):r.hasTag("fail")&&(null==n||n("FAIL",e))},saveBindPayment:(0,O.kp)({bindInfo:({bindInfo:e},t)=>({...e||{},paymentMethod:t.paymentMethod,status:Xe.INIT}),currentPayment:(e,t)=>({payment_method:t.paymentMethod,store_payment_method:!0})}),saveIdempotencyKey:(0,O.kp)({bindInfo:({bindInfo:e},t)=>({...e||{},status:Xe.PENDING,idempotencyKey:t.data.idempotencyKey})}),changeCloudCancelStatus:(0,O.kp)({cloudInfo:({cloudInfo:e})=>({...e,isCancelSubscribe:!0})}),initBindStatusChange:(0,O.kp)({onBindStatusChange:(e,t)=>t.cb}),saveCurrentPayment:(0,O.kp)({currentPayment:(e,t)=>t.data}),saveGroupProductList:(0,O.kp)({groupProductList:(e,t)=>t.data.groupProductList}),saveAllPriceList:(0,O.kp)({allPriceList:(e,t)=>t.data.allPriceList}),saveRiskInfo:(0,O.kp)({riskInfo:(e,t)=>t.data}),saveWebDisplay:(0,O.kp)({agreementLinks:(e,t)=>t.data.ccWebDisplayInfo}),initParams:(0,O.kp)({webid:(e,t)=>t.data.webid,userInfo:(e,t)=>t.data.userInfo,isBOE:(e,t)=>t.data.isBOE,locale:(e,t)=>t.data.locale,cloudInfo:(e,t)=>t.data.cloudInfo,workspaceInfo:(e,t)=>t.data.workspaceInfo,defaultWorkspaceInfo:(e,t)=>t.data.defaultWorkspaceInfo,workspaceList:(e,t)=>t.data.workspaceList,onPayStatusChange:(e,t)=>t.data.onPayStatusChange,handleReporterProcessing:(e,t)=>t.data.handleReporterProcessing,onModalStatusChange:(e,t)=>t.data.onModalStatusChange,cancelSubscrtbeErrorCallback:(e,t)=>t.data.cancelSubscrtbeErrorCallback,cancelSubscrtbeSuccessCallback:(e,t)=>t.data.cancelSubscrtbeSuccessCallback}),saveCurrentProduct:(0,O.kp)({productInfo:(e,t)=>t.value}),savePaymentMethods:(0,O.kp)({paymentMethods:(e,t)=>t.data.paymentMethods}),savePaymentOrderId:(0,O.kp)({orderInfo:({orderInfo:e},t)=>({order_status:Xe.INIT,...e??{},...t.data})}),updateOrderPendingInfo:(0,O.kp)({orderInfo:({orderInfo:e})=>({...e,order_status:Xe.PENDING})}),updateOrderSuccessStatus:(0,O.kp)({orderInfo:({orderInfo:e})=>({...e,order_status:Xe.SUCCESS})}),updateOrderFailStatus:(0,O.kp)({orderInfo:({orderInfo:e})=>({...e,order_status:Xe.FAIL})}),updateOrderFailCode:(0,O.kp)({orderInfo:({orderInfo:e},t)=>({...e,orderErrCode:t.errCode})}),clearOrderInfo:(0,O.kp)({orderInfo:e=>{}}),clearProductInfo:(0,O.kp)({productInfo:e=>{}}),clearPayment:(0,O.kp)({currentPayment:e=>{}}),clearPaymentMethods:(0,O.kp)({paymentMethods:e=>({paymentMethodsList:[],storedPaymentMethodsList:[]})}),clearBindInfo:(0,O.kp)({bindInfo:e=>{}}),saveSubscribeInfo:(0,O.kp)({subscribeInfo:(e,t)=>t.data}),initReporterParams:(0,O.kp)({reporterParams:(e,t)=>t.val}),assignEnableSubscription:(0,O.kp)({enableSubscription:(e,t)=>!!t.data})},services:{getSubscriptionAb:async()=>{try{return await Bt.getAbParam()}catch(e){return Promise.reject(e)}},fetchVideoOperation:async e=>{const t=await(await fetch("https://sf16-muse-va.ibytedtos.com/obj/ies-fe-bee-maliva/bee_prod/biz_149/bee_prod_149_bee_publish_565.json")).json();return null==t?void 0:t.bee_dsrc_548},listeningStateChange:e=>t=>function(e,t){function r(r){const{orderInfo:n}=e;r.key===me.CLOUD_STORAGE_PAYMENT_AND_BINDING&&n&&"PAIDDOWN"===He.getNestedJsonItem(Cr,null==n?void 0:n.order_id).status&&t()}return window.addEventListener("storage",r),()=>{window.removeEventListener("storage",r)}}(e,(()=>{t({type:"QUERY_STATUS"})})),intervalCheckStatus:({orderInfo:e,productInfo:t})=>r=>{const n=setInterval((async()=>{var n;try{const n=await jt.getCapcutOrderStatus({orderId:e.order_id,subscribeType:t.auto_subscribe?0:1});["SUCCESS","SUBSCRIBED"].includes(n.data.status)?r({type:"TO_SUCCESS"}):["FAILED","CLOSED"].includes(n.data.status)&&r({type:"TO_FAIL"})}catch(a){r({type:"TO_FAIL",errCode:null==(n=null==a?void 0:a.data)?void 0:n.ret})}}),2e3);return()=>{clearInterval(n)}},invokeReportStatus:e=>e=>{e({type:"REPORT_CLOUD_PAY_WINDOW",action:ar.PAY_STATUS})},fetchGroupProductList:async({userInfo:e})=>await Et.getPriceList(e.region),fetchVipGroupProductList:async({userInfo:e,locale:t})=>await Et.getVipPriceList(e.region,t),queryOrderStatus:async({orderInfo:e,productInfo:t})=>await jt.getCapcutOrderStatus({orderId:e.order_id,subscribeType:t.auto_subscribe?0:1}),fetchPaymentOrderId:async({productInfo:e,userInfo:t,workspaceInfo:r,defaultWorkspaceInfo:n,currentPayment:a,pipoSubmitParams:i})=>{const o=async()=>jt.initPipoPayment({product_id:e.product_id,order_type:e.auto_subscribe?Ze.AUTO:Ze.UNAUTO,user_create_time:t.createTime||Math.round(Date.now()/1e3),workspace_id:(null!=e&&e.isCloud?null==r?void 0:r.workspace_id:null==n?void 0:n.workspace_id)??"",free_trial:null==e?void 0:e.can_trial}),s=async()=>{var r;return jt.freeTrialMakeOrder({region:(null==t?void 0:t.region)??"",product_id:e.product_id,user_create_time:t.createTime||Math.round(Date.now()/1e3),payment_method:(null==(r=null==a?void 0:a.payment_method)?void 0:r.method_id)??""})};try{return null!=e&&e.can_trial?null!=i&&i.token?{...(await s()).data,type:1}:{...(await o()).data,type:2}:{...(await o()).data,type:0}}catch(c){return Promise.reject(c)}},handlePaying:async({isBOE:e,riskInfo:t,currentPayment:r,locale:n,userInfo:a,orderInfo:i,productInfo:o})=>{window.open(Tr({isBind:!1,orderId:i.order_id,isSubscribe:o.auto_subscribe}));let s={};try{s=await jt.postPipoPay({serviceProps:{isBOE:e,region:a.region},payInfoProps:{amount:o.price_tips,charge_id:i.payment_reference,currency:o.currency_code,payment_reference:i.payment_reference,configuration:Rr(e,n),payment_method:r.payment_method,idempotency_key:`${null==i?void 0:i.order_id}|${Number(new Date)}`,risk_info:t,return_url:xr({orderId:i.order_id,isSubscribe:o.auto_subscribe,isBind:!1}),store_payment_method:!(null==o||!o.auto_subscribe)||r.store_payment_method,merchant_user_id:null==a?void 0:a.uid,is_agreement:null==o?void 0:o.auto_subscribe,agreement_id:i.agreement_id,initiator_type:"cit"}})}catch(c){console.error("error",c)}return{...s}},fetchPaymentMethods:async({userInfo:e,isBOE:t,locale:r,productInfo:n})=>{var a;const{uid:i,region:o}=e,s={isBOE:t,region:o};let c;try{c=null!=n&&n.auto_subscribe?await jt.getAgreementBasicInfo({serviceProps:s,basicInfoProps:{merchant_user_id:i,configuration:Rr(t,r),country_or_region:o,amount_value:n.price_tips,currency:n.currency_code}}):await jt.getCashierBasicInfo({serviceProps:s,basicInfoProps:{merchant_user_id:i,configuration:Rr(t,r),country_or_region:o,config_model_code:["cyber"],pms_params:{country_code:o,currency:n.currency_code,amount_value:n.price_tips,sdk_type:"@pipo-lib/api",sdk_version:"1.96.1"}}})}catch(l){return Promise.reject(l)}return{paymentMethods:{paymentMethodsList:null==c?void 0:c.methods.map((e=>({paymentMethodId:e.payment_method_id}))),storedPaymentMethodsList:null==(a=null==c?void 0:c.stored_methods)?void 0:a.map((e=>({paymentMethodId:null==e?void 0:e.payment_method_id,title:null==e?void 0:e.masked_identity,token:null==e?void 0:e.payment_method_token,isPrimary:null==e?void 0:e.isPrimary,expiryDate:null==e?void 0:e.expiry_date,isExpired:null==e?void 0:e.is_expired})))}}},queryBindStatus:async({bindInfo:e})=>(await jt.getStoreMethodStauts({idempotencyKey:e.idempotencyKey})).data,storePaymentMethod:async({isBOE:e,userInfo:t,productInfo:r,orderInfo:n,riskInfo:a,locale:i,bindInfo:o,pipoSubmitParams:s})=>{window.open(Tr({isBind:!0,orderId:n.order_id,isSubscribe:r.auto_subscribe}));const c=null!=r&&r.can_trial?`${null==n?void 0:n.order_id}`:`${null==n?void 0:n.order_id}|${Number(new Date)}`;return{...await jt.storingPaymentMethod({serviceProps:{isBOE:e,region:t.region},basicInfoProps:{notification_url:null==n?void 0:n.store_method_notification_url,country_or_region:t.region,merchant_user_id:t.uid,idempotency_key:c,return_url:xr({orderId:n.order_id,isSubscribe:r.auto_subscribe,isBind:!0}),risk_info:a,configuration:Rr(e,i),payment_method:{method_id:o.paymentMethod.method_id,payment_elements:null==s?void 0:s.paymentParams}}}),idempotencyKey:c}},cancelAutoRenewal:async(e,t)=>{try{return await jt.cancelSubscripiton({subscribe_id:t.subscribeId})}catch(r){return Promise.reject(r)}},getSubscribeInfo:async()=>(await Et.getSubscribeInfo()).subscribe_list,getSpaceList:async e=>{var t;return await Et.getSpaceList((null==(t=null==e?void 0:e.workspaceInfo)?void 0:t.workspace_id)??"0")}}});const jr=(0,s.createContext)({service:{}});function Fr(){return(0,s.useContext)(jr).service}const Mr=$.A.Item,Br=()=>{const e=Fr(),t=(0,l.d)(e,(e=>e.context.multiple)),r=(0,l.d)(e,(e=>e.context.countLimit)),n=(0,l.d)(e,(({context:{list:e}})=>{const t=e.filter((e=>"file"===e.tag&&e.is_downloadable));return!!(t.length>0&&t.every((e=>e.checked)))})),a=(0,l.d)(e,(({context:{list:e}})=>{const t=e.filter((e=>"file"===e.tag&&e.is_downloadable));return!!(t.length>0&&t.some((e=>e.checked)))}));return(0,o.jsxs)("div",{className:"lv_thirdparty_storage-list-header",children:[(0,o.jsx)(H.A,{className:"lv_thirdparty_storage-list-checkbox",checked:n,size:"small",indeterminate:!n&&a,onChange:function(t){e.send({type:"TOOGLE_FILES",checked:t})},disabled:!t||void 0!==r}),(0,o.jsx)("span",{className:"lv_thirdparty_storage-list-header-label name",children:c.Ay.t("web_space_uploadfiles_gd_list_name",{},"Name")}),(0,o.jsx)("span",{className:"lv_thirdparty_storage-list-header-label size",children:c.Ay.t("web_space_uploadfiles_gd_list_size",{},"Size")})]})},Wr=({data:e})=>{const t=Fr(),r=(0,l.d)(t,(e=>e.matches({open:{fetch:"loading"}})));return(0,o.jsxs)("div",{className:"lv_thirdparty_storage-list-item",onClick:function(){r||t.send({type:"ENTER_FOLDER",path:e.path_display})},children:[(0,o.jsx)(d.iQE,{className:"lv_thirdparty_storage-list-folder"}),(0,o.jsx)("div",{className:"lv_thirdparty_storage-list-name folder",children:e.name})]})},zr=()=>(0,o.jsxs)("div",{className:"lv_thirdparty_storage-list-item_skeleton",children:[(0,o.jsx)(K.A,{text:!1,image:{style:{borderRadius:4,height:16,width:16}},animation:!0}),(0,o.jsx)(K.A,{className:"lv_thirdparty_storage-list-icon_skeleton",image:{style:{borderRadius:4,height:28,width:28}},text:!1,animation:!0}),(0,o.jsx)(K.A,{className:"lv_thirdparty_storage-list-name_skeleton",text:{rows:1,width:88},animation:!0}),(0,o.jsx)(K.A,{className:"lv_thirdparty_storage-list-size_skeleton",text:{rows:1,width:48},animation:!0})]}),Gr=({data:e,selectedFileCount:t,containerRef:r})=>{const n=Fr(),{send:a}=n,i=(0,l.d)(n,(e=>e.context.accept)),s=(0,l.d)(n,(e=>e.context.countLimit)),u=!e.is_downloadable||i&&-1===i.indexOf(e.name.toLowerCase().substring(e.name.lastIndexOf(".")))||t===s&&!e.checked,p=function(e){const t=e.split(".").pop();return["mp3","wav","wma","ogg","aac","flac","ape","m4a"].includes(t??"")}(e.name);return(0,o.jsxs)("div",{className:"lv_thirdparty_storage-list-item",onClick:()=>{return!u&&(t=!e.checked,void a({type:"TOOGLE_FILE",id:e.id,checked:t}));var t},children:[(0,o.jsx)(H.A,{className:"lv_thirdparty_storage-list-checkbox",checked:e.checked,size:"small",disabled:u}),p?(0,o.jsx)(d.Zv2,{className:"lv_thirdparty_storage-list-icon_cover"}):e.cover_url?(0,o.jsx)("img",{className:"lv_thirdparty_storage-list-cover",crossOrigin:"anonymous",src:e.cover_url,loading:"lazy",width:28,height:28}):(0,o.jsx)(d.tkw,{className:"lv_thirdparty_storage-list-icon_cover"}),(0,o.jsx)("div",{className:k()("lv_thirdparty_storage-list-name",u?"disabled":""),children:u?(0,o.jsx)(Y.A,{className:"lv_thirdparty_storage-tooltip",getPopupContainer:function(){return r||document.body},content:c.Ay.t("file_cannot_downloaded_due"),children:e.name}):e.name}),(0,o.jsx)("div",{className:k()("lv_thirdparty_storage-list-size",u?"disabled":""),children:ce(e.size)})]})},Hr=()=>{const e=Fr(),t=(0,l.d)(e,(e=>e.matches({open:{fetch:"loading"}}))),r=(0,l.d)(e,(e=>e.matches({open:{fetch:"noMore"}}))),n=(0,l.d)(e,(e=>e.matches({open:{fetch:"empty"}}))),a=(0,l.d)(e,(e=>e.context.list)),i=(0,l.d)(e,(e=>e.context.path)),u=(0,l.d)(e,(e=>e.context.desc)),p=(0,s.useRef)(null),[_,f]=(0,s.useState)(null);return(0,s.useEffect)((()=>{0===a.length&&t&&f((0,o.jsx)(b.A,{webp:!0,className:"lv_thirdparty_storage-spin"}))}),[a,t]),(0,s.useEffect)((()=>{(r||n)&&f(null)}),[r,n]),(0,s.useEffect)((()=>{!async function(){const t=document.querySelector(".lv_thirdparty_storage-spin");if(!t)return;const r=await(0,J.A)(t,0);a.length>0&&r.intersectionRatio>0&&e.send("LOAD_MORE")}()}),[a]),(0,o.jsxs)("div",{className:"lv_thirdparty_storage-container",ref:p,children:[(0,o.jsx)("div",{className:"lv_thirdparty_storage-breadcrumb",children:(0,o.jsx)($.A,{separator:(0,o.jsx)(d._PA,{fontSize:16}),routes:(e=>{const t=e.split("/").filter((e=>""!==e)),r=[{path:"/",breadcrumbName:c.Ay.t("web_back_to_top")}];for(let n=0;n<t.length;n++)r.push({path:`/${t.slice(0,n+1).join("/")}`,breadcrumbName:t[n]});return r})(i),maxCount:4,itemRender:r=>(0,o.jsx)("div",{onClick:()=>function(r){t||!i||i===r||e.send({type:"ENTER_FOLDER",path:"/"===r?"":r})}(r.path),children:(0,o.jsx)(Mr,{className:"lv_thirdparty_storage-breadcrumb-item",children:(0,o.jsx)(q.A.Text,{ellipsis:!0,style:{marginBottom:0},children:r.breadcrumbName})})})})}),(0,o.jsx)("div",{className:"lv_thirdparty_storage-list",children:(0,o.jsx)(V.A,{style:{height:"100%"},size:"small",scrollLoading:a.length>0&&_,header:(0,o.jsx)(Br,{}),dataSource:a,bordered:!1,noDataElement:t?Array.from({length:4},((e,t)=>(0,o.jsx)(zr,{},t))):(0,o.jsx)("div",{className:"lv_thirdparty_storage-empty-list",children:c.Ay.t("web_no_available_files_found",{},"")}),render:e=>"file"===e.tag?(0,o.jsx)(Gr,{data:e,containerRef:null==p?void 0:p.current,selectedFileCount:a.filter((e=>"file"===e.tag&&e.checked)).length},e.id):(0,o.jsx)(Wr,{data:e},e.id)})}),(0,o.jsxs)("div",{className:"lv_thirdparty_storage-info",children:[(0,o.jsx)(d.UvL,{width:16,height:16}),u]})]})},$r=e=>new Promise(((t,r)=>{(e=>{const t={title:c.F2.t("confirm_deletion",{},"\u786e\u8ba4\u5220\u9664"),content:c.F2.t("please_confirm_whether_to_delete",{},"\u8bf7\u786e\u8ba4\u662f\u5426\u5220\u9664"),okText:c.F2.t("web_confirm",{},"\u786e\u8ba4"),cancelText:c.F2.t("web_cancel",{},"\u53d6\u6d88")},r=Object.assign(t,e);i.A.confirm({className:`lv-confirm-modal_container ${r.className||""}`,mask:null==e?void 0:e.mask,wrapClassName:r.wrapClassName,title:r.title,content:r.content,okText:r.okText,cancelText:r.cancelText,cancelButtonProps:{size:"large",...r.cancelButtonProps},okButtonProps:{status:"danger",size:"large",style:{marginLeft:16},...r.okButtonProps},maskClosable:r.maskClosable,onOk:async e=>{var t;return r.onBeforeOk&&await r.onBeforeOk(),null==(t=r.onOk)?void 0:t.call(r,e)},onCancel:r.onCancel})})({...e,onOk:()=>t(),onCancel:()=>r()})})),Vr=s.createContext({uid:"",isBOE:!1,currentWorkspace:void 0,openFrom:void 0,ref:void 0});var Yr=(e=>(e[e.WorkspaceSetting=0]="WorkspaceSetting",e[e.ThirdpartyUpload=1]="ThirdpartyUpload",e[e.TaskFileSyncSetting=2]="TaskFileSyncSetting",e))(Yr||{}),qr=(e=>(e.AssignUserInfo="ASSIGN_USERINFO",e.AssignCurrentUpdateTime="ASSIGN_CURRENT_UPDATE_TIME",e.AssignCurrentFolder="ASSIGN_CURRENT_FOLDER",e.AssignTaskMeta="ASSIGN_TASK_META",e))(qr||{});const Kr={userInfo:void 0,currentUpdateTime:void 0,currentFolder:void 0,taskMeta:void 0},Jr=(e,t)=>{switch(t.type){case qr.AssignUserInfo:return{...e,userInfo:t.data};case qr.AssignCurrentUpdateTime:return{...e,currentUpdateTime:t.data};case qr.AssignCurrentFolder:return{...e,currentFolder:t.data};case qr.AssignTaskMeta:return{...e,taskMeta:t.data};default:return e}},Xr={fileSyncFolderSelector:"_fileSyncFolderSelector_1pui9_1",errorContext:"_errorContext_1pui9_19",fileSyncTrigger:"_fileSyncTrigger_1pui9_26","fileSync-selectorModal":"_fileSync-selectorModal_1pui9_31",fileSyncFolderSelectorNode:"_fileSyncFolderSelectorNode_1pui9_56",nodeCheck:"_nodeCheck_1pui9_56",nodeIcon:"_nodeIcon_1pui9_68",nodeTitle:"_nodeTitle_1pui9_74",fileSyncFolderLoading:"_fileSyncFolderLoading_1pui9_83",fileSyncFolderLoadError:"_fileSyncFolderLoadError_1pui9_92",emptyContext:"_emptyContext_1pui9_100"};var Zr=(e=>(e[e.default=0]="default",e[e.empty=1]="empty",e[e.loading=2]="loading",e[e.loadError=3]="loadError",e[e.unknowError=4]="unknowError",e))(Zr||{});const Qr=e=>{const{status:t,treeData:r,current:a,loadMore:i,handleRetry:l,renderTitle:u}=e,[p,_]=(0,s.useState)(!1),f=0===t.type&&0!==(null==r?void 0:r.length)?void 0:()=>2===t.type?(0,o.jsx)(K.A,{className:Xr.fileSyncFolderLoading,animation:!0,text:{rows:4,width:["100%",240,240,240]}}):3===t.type?(0,o.jsxs)("div",{className:Xr.fileSyncFolderLoadError,children:[(0,o.jsx)("div",{className:Xr.errorContext,children:c.Ay.t("web_autosync_title_load_folders_failed",{},"Couldn\u2019t load folders. Try again.")}),(0,o.jsx)(n.A,{loading:p,icon:(0,o.jsx)(d.kZ9,{size:16}),size:"mini",onClick:async()=>{try{_(!0),await l()}finally{_(!1)}},children:c.Ay.t("web_autosync_btn_retry_load_folders",{},"Retry")})]}):null!=r&&r.length?void 0:(0,o.jsxs)("div",{className:Xr.fileSyncFolderLoadError,children:[(0,o.jsx)(d.C9R,{size:40}),(0,o.jsx)("div",{className:Xr.errorContext,children:c.Ay.t("web_autosync_text_no_folders_found",{},"No founders found")})]});return(0,o.jsxs)("div",{className:Xr.fileSyncFolderSelector,children:[(0,o.jsx)(ee.A,{...e,treeCheckedStrategy:te.A.SHOW_ALL,placeholder:c.Ay.t("web_material_button_choose_folder",{},"Choose Source folder"),prefix:(0,o.jsx)(d.Z23,{size:20}),value:a,treeData:r,labelInValue:!0,treeProps:{className:Xr.fileSyncSelectorModal,icons:()=>({switcherIcon:(0,o.jsx)(d.p6c,{size:12})}),renderTitle:e=>(0,o.jsxs)("div",{className:Xr.fileSyncFolderSelectorNode,children:[(0,o.jsx)("div",{className:Xr.nodeIcon,children:(0,o.jsx)(d.XlZ,{size:16})}),(0,o.jsx)("div",{className:Xr.nodeTitle,children:(null==u?void 0:u(e))??e.title}),(0,o.jsx)("div",{className:Xr.nodeCheck,children:(0,o.jsx)(d.e6G,{size:16})})]})},loadMore:i,triggerProps:{className:Xr.fileSyncTrigger,getPopupContainer:e.getPopupContainer},dropdownRender:f,error:4===t.type,suffixIcon:(0,o.jsx)(d.go4,{size:16})}),(0,o.jsx)("div",{className:k()({errorContext:4===t.type&&t.context}),children:t.context})]})},en="_fileSyncHeader_vag77_1",tn="_fileSyncHeaderTitle_vag77_4",rn="_fileSyncHeaderContext_vag77_11",nn=()=>(0,o.jsxs)("div",{className:en,children:[(0,o.jsx)("div",{className:tn,children:c.Ay.t("web_material_text_file",{},"File sync")}),(0,o.jsx)("div",{className:rn,children:c.Ay.t("web_material_text_file_obtain",{},"Sync files from 3rd-party platforms automatically.")})]}),an={fileSyncFormItemHeader:"_fileSyncFormItemHeader_1u7lx_1",fileSyncFormItemTitle:"_fileSyncFormItemTitle_1u7lx_6",fileSyncFormItemSkeleton:"_fileSyncFormItemSkeleton_1u7lx_13"};var on=(e=>(e[e.default=0]="default",e[e.loading=1]="loading",e))(on||{});const sn=({title:e,subTitle:t,status:r=0,children:n})=>1===r?(0,o.jsx)(K.A,{className:an.fileSyncFormItemSkeleton,animation:!0,text:{rows:2,width:[148,"100%"]}}):(0,o.jsxs)("div",{className:an.fileSyncFormItem,children:[(0,o.jsxs)("div",{className:an.fileSyncFormItemHeader,children:[(0,o.jsx)("div",{className:an.fileSyncFormItemTitle,children:e}),t&&(0,o.jsx)("div",{children:t})]}),n]}),cn="_fileSyncPlatform_lrxjp_1",ln="_fileSyncPlatformIcon_lrxjp_6",un="_fileSyncPlatformInfo_lrxjp_13",dn="_fileSyncPlatformInfoName_lrxjp_17",pn="_fileSyncUserInfo_lrxjp_22",_n="_email_lrxjp_27",fn="_unlink_lrxjp_30",hn="_platformInfoSkeleton_lrxjp_45";var gn=(e=>(e[e.default=0]="default",e[e.loading=1]="loading",e))(gn||{});const mn=e=>{const{platform:t,userInfo:r,checked:n,switchLoading:a=!1,status:i=0,onSwitchClick:l,unbind:u}=e,[d,p]=(0,s.useState)(!1);return(0,o.jsxs)(o.Fragment,{children:[0===i&&(0,o.jsxs)("div",{className:cn,children:[(0,o.jsx)("div",{className:ln,children:Fn[t]}),(0,o.jsxs)("div",{className:un,children:[(0,o.jsx)("div",{className:dn,children:c.Ay.t(Ee(t))}),null!=r&&r.email?(0,o.jsxs)("div",{className:pn,children:[(0,o.jsx)("div",{className:_n,children:null==r?void 0:r.email}),(0,o.jsx)("div",{className:fn,onClick:async()=>{try{p(!0),await u()}finally{p(!1)}},children:d?(0,o.jsx)(b.A,{webp:!0,size:12}):"Unlink"})]}):null]}),(0,o.jsx)("div",{onClick:l,children:(0,o.jsx)(re.A,{loading:a,checked:n})})]}),1===i&&(0,o.jsx)(K.A,{className:hn,animation:!0,text:{rows:2,width:[148,220]},image:!0})]})},vn="_timeSelector_bki7l_1",yn="_timeSelectorTrigger_bki7l_8",wn=X.A.Option,bn=e=>{const{timeOptions:t}=e;return(0,o.jsx)(X.A,{...e,className:vn,prefix:(0,o.jsx)(d.CWF,{size:20}),triggerProps:{className:yn},suffixIcon:(0,o.jsx)(d.go4,{size:16}),children:t.map((({name:e,key:t})=>(0,o.jsx)(wn,{value:e,extra:{key:t},children:e},t)))})},Sn="_cloudSelector_1dvoi_1",En="_helpIcon_1dvoi_1",An=X.A.Option,kn=e=>(0,o.jsx)(X.A,{...e,className:Sn,prefix:(0,o.jsx)(d.qN9,{size:20}),suffixIcon:(0,o.jsx)(Y.A,{getPopupContainer:e.getPopupContainer,position:"top",content:c.Ay.t("web_material_text_supported",{},"Supported by default space only"),children:(0,o.jsx)(d.gqp,{className:En,size:16})}),children:e.cloudList.map(((e,t)=>(0,o.jsx)(An,{value:e,children:e},t)))}),Pn=async({uid:e,isBOE:t,platform:n})=>{var a;const{default:i}=await Promise.resolve().then(r.t.bind(r,5244,23)),o=new URL("https://accounts.google.com/o/oauth2/v2/auth?prompt=consent&scope=https%3A//www.googleapis.com/auth/drive.readonly%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email&access_type=offline&include_granted_scopes=true&response_type=code"),s=new URLSearchParams(o.search);return s.append("state",null==(c=e,a=i("sha256").update(c).digest("hex"))?void 0:a.slice(15,47)),s.append("client_id",t?Ae:ke),s.append("redirect_uri",`https://${window.location.host}/lv/v1/user/web/third_party_clouds_authorization/${Se[n]}`),o.search=s.toString(),o.toString();var c},In="_fileSyncSubmit_1c0w6_1",Cn="_fileSyncNow_1c0w6_11",Tn="_fileSyncForm_1c0w6_18",{THIRDPARTY_CLOUD_AUTH:xn}=me,Rn=e=>null!==e?c.Ay.t("web_material_text_eight_am",{string0:m()().hour(e).minute(0).format("HH:mm"),string1:e>12?"AM":"PM"},"{string0} {string1} every day"):c.Ay.t("web_material_button_non_auto",{},"Non-automatic backup"),Nn=e=>{var t,r,i,l,u;const{platform:d,taskMeta:p,userInfo:_,currentWorkspace:f,currentUpdateTime:h,currentFolder:g,getTaskMeta:m,getUserInfo:v,getFolderList:y,unbindUserInfo:w,onChangeUpdateTime:S,onChangeFolder:E,onSubmit:A,immediateTask:k,toggleConfigSwitch:I}=e,C=(0,s.useRef)(null),{openFrom:T,uid:x,isBOE:R=!1,ref:N,onShow:L,onSubmitFileSync:O,onCloseFileSync:D,onSyncNow:U,onUnbind:j}=(0,s.useContext)(Vr),[F,M]=(0,s.useState)([]),[B,W]=(0,s.useState)(!1),[z,G]=(0,s.useState)(!1),[H,$]=(0,s.useState)(!1),{loading:V}=(0,P.Ay)(v,{auto:!0}),{loading:q,run:K}=(0,P.Ay)(m),{loading:J,run:X}=(0,P.Ay)((async(e={})=>{var t,r;try{G(!0),null==O||O({currentFolder:g,currentUpdateTime:h,currentWorkspace:f}),await A(),W(!0),$(!1),null==(t=e.onSubmit)||t.call(e)}catch(n){null==(r=e.onError)||r.call(e,n)}finally{G(!1)}})),{loading:Z,run:Q}=(0,P.Ay)(k),{loading:ee,error:te}=(0,P.Ay)((async()=>{const e=await y("");M(e)}),{auto:!0,refreshDeps:[null==(t=e.userInfo)?void 0:t.email]}),re=V?gn.loading:gn.default,ne=(0,s.useMemo)((()=>ee?{type:Zr.loading}:te?{type:Zr.loadError}:null!=F&&F.length?{type:Zr.default}:{type:Zr.empty}),[F,te,ee]),ae=(0,s.useMemo)((()=>{const e=new Map,t=(r,n)=>{r.forEach((r=>{var a;e.set(r.key,{...r,parentKey:n}),null!=(a=r.children)&&a.length&&t(r.children,r.key)}))};return t(F),e}),[F]),ie=[{name:Rn(null),key:"none"},{name:Rn(0),key:"0"},{name:Rn(8),key:"8"},{name:Rn(12),key:"12"},{name:Rn(20),key:"20"}],oe=()=>[{key:"getingTaskMeta",data:!q,tooltipContent:c.Ay.t("web_share_translation_loading_text_loading",{},"Loading...")},{key:"getingUserInfo",data:!V,tooltipContent:c.Ay.t("web_share_translation_loading_text_loading",{},"Loading...")},{key:"currentWorkspace",data:f,tooltipContent:"Please choose target workspace"},{key:"currentFolder",data:g,tooltipContent:c.Ay.t("web_material_text_choose_source_folder",{},"Select a folder")},{key:"currentUpdateTime",data:h,tooltipContent:c.Ay.t("web_autosync_hover_set_sync_time",{},"Set sync time first")}].map((e=>({...e,data:!!e.data}))).filter((e=>!e.data));(0,s.useEffect)((()=>{null==L||L({currentFolder:g,currentUpdateTime:h,currentWorkspace:f})}),[]),(0,s.useEffect)((()=>{null!=_&&_.email&&K()}),[null==_?void 0:_.email]),(0,s.useEffect)((()=>{W(!(null==p||!p.isOn))}),[p]),(0,s.useImperativeHandle)(N,(()=>({submit:async()=>{await X({onSubmit(){a.A.success(c.Ay.t("web_autosync_toast_settings_saved",{},"Settings saved"))}})},isFormChanged:B&&H})),[H,X,B]);const se=q||V?on.loading:on.default;return(0,o.jsxs)("div",{ref:C,children:[(0,o.jsx)(nn,{}),(0,o.jsx)(mn,{userInfo:_,platform:d,status:re,checked:B,switchLoading:z,unbind:async()=>{null==j||j({currentFolder:g,currentUpdateTime:h,currentWorkspace:f}),await w(),W(!1)},onSwitchClick:async()=>{G(!0);try{if(B)null==D||D({currentFolder:g,currentUpdateTime:h,currentWorkspace:f}),await I(!1),W(!1);else{if(null==_||!_.email){const e=await(async(e,t)=>({[be.GoogleDrive]:await Pn({uid:e,isBOE:t,platform:be.GoogleDrive})}))(x,R);await(e=>{const{authUrl:t,name:r,localStorageKey:n,condition:a,windowConfig:i}=e,o=window.screen.height,s=window.screen.width,c=i?i.popupHeight:600,l=i?i.popupHeight:800,u=i?i.iTop:(o-30-c)/2,d=i?i.iLeft:(s-l)/2,p=()=>{n&&He.removeItem(n)};return new Promise(((e,i)=>{window.open(t,`name=${r}`,`fullscreen=1,width=${l},height=${c},top=${u},left=${d}`),p();const o=t=>{t.key===n&&(window.removeEventListener("storage",o),p(),a(t.newValue)?e(t.newValue):i(t.newValue))};window.addEventListener("storage",o)}))})({authUrl:e[d],name:"thirdparty_cloud_storage_auth",localStorageKey:xn,condition:e=>"fail"!==e}),await v()}null==O||O({currentFolder:g,currentUpdateTime:h,currentWorkspace:f}),await I(!0),W(!0)}}catch{}finally{G(!1)}}}),B&&null!=_&&_.email?(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:Tn,children:[(0,o.jsx)(sn,{title:c.Ay.t("web_material_text_source_folder",{},"Select folder"),status:se,children:(0,o.jsx)(Qr,{size:"large",status:ne,treeData:F,current:g?{label:g.title,value:g.key}:void 0,loadMore:async(e,t)=>{const r=e;r.key||a.A.error(c.Ay.t("web_autosync_text_unknown_error",{},"Something went wrong. Try again."));const n=await y(String(r.key));n.length||(t.isLeaf=!1),t.children=n.map((e=>({...e,title:`${t.title} / ${e.name}`}))),M([...F])},handleRetry:()=>y(""),renderTitle:e=>{var t,r;if(null!=(t=e.dataRef)&&t.key)return null==(r=ae.get(e.dataRef.key))?void 0:r.name},onChange:e=>{$(!0),E({title:e.label,key:e.value})},getPopupContainer:e=>C.current??e})}),T!==Yr.WorkspaceSetting&&(0,o.jsx)(sn,{title:c.Ay.t("web_material_button_target_location",{},"Target location"),status:se,children:(0,o.jsx)(kn,{size:"large",getPopupContainer:e=>C.current??e,popupVisible:!1,value:`${c.Ay.t("web_material_button_name_space",{string0:null==f?void 0:f.name},"{string0} (default space)")}`,cloudList:[]})}),(0,o.jsx)(sn,{title:c.Ay.t("web_material_text_auto_update",{},"Set auto sync time"),subTitle:(null==p?void 0:p.id)&&(0,o.jsx)("div",{className:Cn,onClick:async()=>{null==U||U({currentFolder:g,currentUpdateTime:h,currentWorkspace:f}),await X(),await Q()},children:Z?(0,o.jsx)(b.A,{webp:!0,size:12}):c.Ay.t("web_autosync_btn_sync_now",{},"Sync now")}),status:se,children:(0,o.jsx)(bn,{size:"large",placeholder:c.Ay.t("web_material_button_set_auto",{},"Set time to auto sync files"),timeOptions:ie,value:null==h?void 0:h.name,onChange:(e,t)=>{S(e,t),$(!0)},getPopupContainer:e=>C.current??e})})]}),se===on.loading?(0,o.jsx)("div",{style:{height:40,marginTop:24}}):(0,o.jsx)(Y.A,{getPopupContainer:e=>C.current??e,disabled:!(null!=(r=oe())&&r[0]),content:null==(l=null==(i=oe())?void 0:i[0])?void 0:l.tooltipContent,children:(0,o.jsx)(n.A,{loading:J,className:In,size:"large",type:"primary",onClick:async()=>{await X({onSubmit(){a.A.success(c.Ay.t("web_autosync_toast_settings_saved",{},"Settings saved"))}})},disabled:!((null==(u=oe())||!u[0])&&H),children:c.Ay.t("web_material_text_synchronize_file",{},"Save settings")})})]}):null]})},Ln=()=>{const e=(new Date).getTimezoneOffset(),t=Math.floor(Math.abs(e)/60);return Number((e>0?"-":"+")+t)},On=e=>{const{className:t}=e,{currentWorkspace:r}=(0,s.useContext)(Vr),[n,i]=(0,s.useReducer)(Jr,Kr);return(0,o.jsx)("div",{className:k()("LvThirdpartyFileSync-GoogleDrive",t),children:(0,o.jsx)(Nn,{platform:be.GoogleDrive,taskMeta:n.taskMeta,userInfo:n.userInfo,currentWorkspace:r,currentUpdateTime:n.currentUpdateTime,currentFolder:n.currentFolder,getFolderList:async e=>{var t;if(null==(t=n.userInfo)||!t.email)throw new Error("not user info");try{const{data:t}=await Tt.getFileList({path:e,cursor:"",platform:be.GoogleDrive,querys:JSON.stringify({folder_tree_mode:!0})});return t.entries.map((e=>({key:e.id,name:e.name,title:e.name})))}catch(r){throw a.A.error(c.Ay.t("web_autosync_text_unknown_error",{},"Something went wrong. Try again.")),r}},unbindUserInfo:async()=>{await ht.thirtpartCloudsDeauthorization({platform:be.GoogleDrive}),i({type:qr.AssignUserInfo,data:void 0})},onChangeUpdateTime:(e,t)=>{var r;i({type:qr.AssignCurrentUpdateTime,data:{name:e,key:null==(r=t.extra)?void 0:r.key}})},onChangeFolder:e=>{i({type:qr.AssignCurrentFolder,data:e})},onSubmit:async()=>{var e,t;if(null!=r&&r.workspace_id)try{const{data:a}=await Gt.createTaskRunnerConfig({isOn:!0,id:(null==(e=n.taskMeta)?void 0:e.id)??"0",type:rt.GoogleDrive,sourceInfo:n.currentFolder?{folderId:n.currentFolder.key,folderName:n.currentFolder.title}:void 0,destinationInfo:{workspaceId:null==r?void 0:r.workspace_id},fileType:[tt.Image],runPlan:null!=(t=n.currentUpdateTime)&&t.key?{localTimezone:Intl.DateTimeFormat().resolvedOptions().timeZone,tzOffsetHours:Ln(),localHour:Number(n.currentUpdateTime.key)}:void 0});i({type:qr.AssignTaskMeta,data:a.taskMeta})}catch(o){throw a.A.error(c.Ay.t("web_autosync_text_unknown_error",{},"Something went wrong. Try again.")),o}},immediateTask:async()=>{var e;if(null==r||!r.workspace_id||null==(e=n.taskMeta)||!e.id)return;const{data:t}=await Gt.getTasks({workspaceId:r.workspace_id,status:nt.Running});t.tasks.some((e=>e.status===nt.Running))?a.A.warning(c.Ay.t("web_material_text_in_progress",{},"Files are being synced. Try again later.")):Gt.immediateTask({taskId:n.taskMeta.id}).then((()=>{window.dispatchEvent(new CustomEvent("TASK_OP",{detail:{type:"FileSyncExecuteNow"}})),a.A.success(c.Ay.t("web_autosync_toast_start_syncing",{},"Your folder starts syncing"))})).catch((e=>{var t;"1013"===(null==(t=e.data)?void 0:t.ret)?a.A.error(c.Ay.t("web_autosync_text_too_many_attempts",{},"Too many attempts. Try again later.")):a.A.error(c.Ay.t("web_autosync_text_unknown_error",{},"Something went wrong. Try again."))}))},getUserInfo:async()=>{const{data:e}=await Tt.userInfo({platform:be.GoogleDrive});i({type:qr.AssignUserInfo,data:e})},getTaskMeta:async()=>{var e,t;const{data:r}=await Gt.getTaskRunnerConfig();r.taskMeta&&(i({type:qr.AssignTaskMeta,data:r.taskMeta}),r.taskMeta.sourceInfo&&i({type:qr.AssignCurrentFolder,data:{title:r.taskMeta.sourceInfo.folderName,key:r.taskMeta.sourceInfo.folderId}}),i({type:qr.AssignCurrentUpdateTime,data:{name:Rn((null==(e=r.taskMeta.runPlan)?void 0:e.localHour)??null),key:null!=(t=r.taskMeta.runPlan)&&t.localHour?r.taskMeta.runPlan.localHour.toString():"none"}}))},toggleConfigSwitch:async e=>{var t,n,a;if(null==r||!r.workspace_id)return;const{data:o}=await Gt.getTaskRunnerConfig(),{data:s}=await Gt.createTaskRunnerConfig({isOn:e,destinationInfo:{workspaceId:r.workspace_id},id:(null==(t=o.taskMeta)?void 0:t.id)??"0",type:rt.GoogleDrive,fileType:[tt.Image],runPlan:null==(n=null==o?void 0:o.taskMeta)?void 0:n.runPlan,sourceInfo:null==(a=null==o?void 0:o.taskMeta)?void 0:a.sourceInfo});s.taskMeta&&i({type:qr.AssignTaskMeta,data:s.taskMeta})}})})},Dn=(0,s.forwardRef)(((e,t)=>{const{platform:r,uid:n,isBOE:a,openFrom:i,workspaceId:c,onShow:l,onClose:u,onSubmitFileSync:d,onCloseFileSync:p,onSyncNow:_,onUnbind:f}=e,[h,g]=(0,s.useState)();return(0,s.useEffect)((()=>{c&&Lt.mGetWorkspaceInfo({workspace_ids:[c]}).then((({data:e})=>{const t=e.workspace_infos[0];t&&g(t)}))}),[c]),(0,o.jsx)(Vr.Provider,{value:{ref:t,uid:n,isBOE:a,openFrom:i,currentWorkspace:h,onShow:l,onClose:u,onSubmitFileSync:d,onCloseFileSync:p,onSyncNow:_,onUnbind:f},children:r===be.GoogleDrive&&(0,o.jsx)(On,{})})})),Un=e=>{const t=(0,s.useRef)(null);return(0,o.jsxs)("div",{className:"thirdpartyFileSync-modal",children:[(0,o.jsx)("div",{className:"thirdpartyFileSync-modal-close",onClick:()=>{(({ref:e})=>new Promise((t=>{if(e.current&&e.current.isFormChanged&&e.current.submit){const r=i.A.confirm({title:c.Ay.t("web_autosync_title_discard_settings",{},"Discard changes?"),content:c.Ay.t("web_autosync_desc_discard_settings",{},"Your changes won\u2019t be saved."),okText:c.Ay.t("web_personal_page_text_save",{},"Save"),cancelText:c.Ay.t("web_autosync_btn_discard_changes",{},"Discard"),onCancel:()=>t(),okButtonProps:{onClick:async()=>{var n,a;r.update({okButtonProps:{loading:!0}}),await(null==(a=null==(n=e.current)?void 0:n.submit)?void 0:a.call(n)),r.update({okButtonProps:{loading:!1}}),r.close(),t()}}})}else t()})))({ref:t}).then((()=>{e.handleClose()}))},children:(0,o.jsx)(d.BFT,{})}),(0,o.jsx)(Dn,{ref:t,...e})]})},jn=e=>({onShow:t=>{var r,n,a;(new tr).upLoadWindowReport({action:"show",source_location:null==(r=null==t?void 0:t.currentFolder)?void 0:r.title,sync_time:null==(n=t.currentUpdateTime)?void 0:n.name,target_space_id:null==(a=t.currentWorkspace)?void 0:a.workspace_id,current_page:e.currentPage,source:e.source??"google_drive"})},onClose:t=>{var r,n,a;(new tr).upLoadWindowReport({action:"close",source_location:null==(r=null==t?void 0:t.currentFolder)?void 0:r.title,sync_time:null==(n=t.currentUpdateTime)?void 0:n.name,target_space_id:null==(a=t.currentWorkspace)?void 0:a.workspace_id,current_page:e.currentPage,source:e.source??"google_drive"})},onSubmitFileSync:t=>{var r,n,a;(new tr).upLoadWindowReport({action:"enable_file_sync",source_location:null==(r=null==t?void 0:t.currentFolder)?void 0:r.title,sync_time:null==(n=t.currentUpdateTime)?void 0:n.name,target_space_id:null==(a=t.currentWorkspace)?void 0:a.workspace_id,current_page:e.currentPage,source:e.source??"google_drive"})},onCloseFileSync:t=>{var r,n,a;(new tr).upLoadWindowReport({action:"close_file_sync",source_location:null==(r=null==t?void 0:t.currentFolder)?void 0:r.title,sync_time:null==(n=t.currentUpdateTime)?void 0:n.name,target_space_id:null==(a=t.currentWorkspace)?void 0:a.workspace_id,current_page:e.currentPage,source:e.source??"google_drive"})},onSyncNow:t=>{var r,n,a;(new tr).upLoadWindowReport({action:"sync_now",source_location:null==(r=null==t?void 0:t.currentFolder)?void 0:r.title,sync_time:null==(n=t.currentUpdateTime)?void 0:n.name,target_space_id:null==(a=t.currentWorkspace)?void 0:a.workspace_id,current_page:e.currentPage,source:e.source??"google_drive"})},onUnbind:t=>{var r,n,a;(new tr).upLoadWindowReport({action:"unbudle",source_location:null==(r=null==t?void 0:t.currentFolder)?void 0:r.title,sync_time:null==(n=t.currentUpdateTime)?void 0:n.name,target_space_id:null==(a=t.currentWorkspace)?void 0:a.workspace_id,current_page:e.currentPage,source:e.source??"google_drive"})}}),Fn={[be.Dropbox]:(0,o.jsx)(d.yP,{size:"48px"}),[be.GoogleDrive]:(0,o.jsx)(d.dkL,{size:"48px"})},Mn=({currentWorkspaceInfo:e,defaultWorkspaceInfo:t,closable:r,onCancel:n})=>{const[a,l]=(0,u.B)(Fr()),[p,_]=(0,s.useState)(""),f=a.context.platform===be.GoogleDrive&&a.context.currentPage===Ie.WorkSpace&&(null==e?void 0:e.workspace_id)&&(null==t?void 0:t.workspace_id)&&e.workspace_id===t.workspace_id&&e.role===Ne.owner;return(0,s.useEffect)((()=>{Tt.userInfo({platform:a.context.platform}).then((({data:e})=>{_((null==e?void 0:e.email)||"")}))}),[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"lv_thirdparty_storage-header",children:[(0,o.jsx)("div",{className:"lv_thirdparty_storage-icon",children:Fn[a.context.platform]}),(0,o.jsxs)("div",{className:"lv_thirdparty_storage-data",children:[(0,o.jsx)("h2",{className:"lv_thirdparty_storage-data-title",children:(0,o.jsx)("h2",{className:"lv_thirdparty_storage-data-title",children:c.Ay.t(Ee(a.context.platform))})}),(0,o.jsxs)("div",{className:"lv_thirdparty_storage-data-content",children:[p&&(0,o.jsx)("div",{className:"lv_thirdparty_storage-data-email",children:p}),(0,o.jsx)("div",{className:"lv_thirdparty_storage-data-unbundle",onClick:async function(){await $r({title:c.Ay.t("web_space_uploadfiles_gd_unbudle_1",{},"Unlink this account?"),content:c.Ay.t("web_space_uploadfiles_gd_unbudle_2",{},"If you unlink your account, you'll need to reauthorize your account when you use it again."),okText:c.Ay.t("web_space_uploadfiles_gd_unbudle_confirm",{},"Unlink"),cancelText:c.Ay.t("web_space_uploadfiles_gd_unbudle_cancel",{},"Cancel")}),l("UNBIND")},children:c.Ay.t("web_space_uploadfiles_gd_unbudle",{},"Unlink")})]})]}),r&&(0,o.jsx)(d.gzW,{size:20,className:"lv_thirdparty_storage-close",onClick:function(){l("CLOSE")}})]}),f&&(0,o.jsx)(X.A,{className:"lv_thirdparty_storage-to-file_sync",value:c.Ay.t("web_material_text_file_sync",{},"Auto sync files"),onClick:()=>{null==n||n(),(e=>{const t=i.A.info({wrapClassName:"thirdpartyFileSync-wrapper",maskStyle:{backgroundColor:"black",opacity:.6},modalRender:()=>(0,o.jsx)(Un,{...e,handleClose:()=>t.close()})})})({uid:a.context.uid,isBOE:a.context.isBOE,platform:a.context.platform,workspaceId:null==e?void 0:e.workspace_id,openFrom:Yr.ThirdpartyUpload,...jn({currentPage:Ie.WorkSpace})})}})]})},Bn=({onCancel:e})=>{const t=Fr(),r=(0,l.d)(t,(e=>e.context.list.filter((e=>"file"===e.tag)).every((e=>!e.checked)))),i=(0,l.d)(t,(e=>e.matches({open:{upload:"pending"}}))),s=(0,l.d)(t,(e=>e.matches({open:{upload:"checking"}}))),u=(0,l.d)(t,(e=>e.context.list));return(0,o.jsxs)("div",{className:"lv_thirdparty_storage-footer",children:[(0,o.jsx)(n.A,{size:"large",onClick:function(){null==e||e(),t.send("CLOSE")},children:c.Ay.t("cancel_web")}),(0,o.jsx)(n.A,{size:"large",type:"primary",disabled:r,loading:i||s,onClick:function(){(function(){const e=u.filter((e=>"file"===e.tag&&e.checked)).length>20;return!!e&&(a.A.error(c.Ay.t("web_file_upload_count_limit",{},"Upload up to 20 files at a time")),e)})()||t.send({type:"UPLOAD"})},children:c.Ay.t("web_space_uploadfiles_gd_list_select",{},"Select")})]})},Wn=({service:e,closable:t,currentWorkspaceInfo:r,defaultWorkspaceInfo:n,onCancel:a})=>(0,o.jsx)(jr.Provider,{value:{service:e},children:(0,o.jsx)("div",{className:"lv_thirdparty_storage-layout",children:(0,o.jsxs)("div",{className:"lv_thirdparty_storage-wrapper",children:[(0,o.jsx)(Mn,{currentWorkspaceInfo:r,defaultWorkspaceInfo:n,closable:t,onCancel:a}),(0,o.jsx)(Hr,{}),(0,o.jsx)(Bn,{onCancel:a})]})})}),zn={video:[".mp4",".mov",".m4v",".flv",".mkv",".avi",".webm",".wmv",".rm",".rmvb",".3gp",".m2ts",".mt2s",".m2t",".mxf",".mpg",".mpeg",".mpe",".ts"],audio:[".mp3",".flac",".m4a",".wav",".aac",".oga",".ogg",".wma",".amr",".aif",".aiff",".ac3",".mpa",".ape",".mac",".mp2",".acc"],image:[".jpeg",".jpg",".png",".gif",".heif",".heic"]},Gn={[be.Dropbox]:(0,o.jsx)(d.yP,{size:"64px"}),[be.GoogleDrive]:(0,o.jsx)(d.dkL,{size:"64px"})},Hn=({service:e,modalClose:t})=>{const[r,a]=(0,u.B)(e),i={[be.Dropbox]:c.Ay.t("web_space_uploadfiles_dp_title",{},"Authorize your Dropbox account"),[be.GoogleDrive]:c.Ay.t("web_space_uploadfiles_gd_title",{},"Authorize your Google Drive account")},s={[be.Dropbox]:c.Ay.t("web_space_uploadfiles_dp_desc",{},"Please login and authorize your account first. After authorization, you can use the media files in Dropbox quickly."),[be.GoogleDrive]:c.Ay.t("web_space_uploadfiles_gd_desc",{},"Please login and authorize your account first. After authorization, you can use the media files in Google Drive quickly.")};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"lv_thirdparty_storage_auth_panel-Container",children:(0,o.jsxs)("div",{className:"lv_thirdparty_storage_auth_panel-Container-panel",children:[(0,o.jsxs)("div",{className:"lv_thirdparty_storage_auth_panel-Container-icon",children:[Gn[r.context.platform],r.context.platform===be.Dropbox?(0,o.jsx)(d.CGN,{className:"lv_thirdparty_storage_auth_panel-Container-icon-transform",size:"24px"}):(0,o.jsx)(d.pP7,{className:"lv_thirdparty_storage_auth_panel-Container-icon-transform",size:"24px"}),(0,o.jsx)(d.qm1,{color:"var(--lvv-color-text-primary)",size:"64px"})]}),(0,o.jsxs)("div",{className:"lv_thirdparty_storage_auth_panel-Container-content",children:[(0,o.jsx)("div",{className:"lv_thirdparty_storage_auth_panel-Container-content-title",children:i[r.context.platform]}),(0,o.jsx)("div",{className:"lv_thirdparty_storage_auth_panel-Container-content-desc",children:s[r.context.platform]})]}),(0,o.jsx)("div",{className:"lv_thirdparty_storage_auth_panel-Footer",children:(0,o.jsx)(n.A,{type:"primary",size:"large",onClick:()=>{a({type:"CONFIRM"}),null==t||t()},children:c.Ay.t("web_space_uploadfiles_gd_continue",{},"Continue")})})]})})})},$n=({service:e,modalClose:t,authType:r})=>{let a=c.Ay.t("web_marketplace_title_switching_google_drive"),i=c.Ay.t("web_marketplace_text_detect_other");return"dropbox"===r&&(a=c.Ay.t("web_dropbox_title_switching_account"),i=c.Ay.t("web_dropbox_text_detect_other")),(0,o.jsx)("div",{className:"lv_thirdparty_storage_auth-wrapper",children:(0,o.jsxs)("div",{className:"lv_thirdparty_storage_auth-reconnect",children:[(0,o.jsxs)("div",{className:"lv_thirdparty_storage_auth-reconnect-title",children:[(0,o.jsx)("div",{className:"lv_thirdparty_storage_auth-reconnect-info-icon",children:(0,o.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("g",{id:"info-filled",children:(0,o.jsx)("path",{id:"Outlined",fillRule:"evenodd",clipRule:"evenodd",d:"M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM11 7.5C11 7.22386 11.2239 7 11.5 7H12.5C12.7761 7 13 7.22386 13 7.5V8.5C13 8.77614 12.7761 9 12.5 9H11.5C11.2239 9 11 8.77614 11 8.5V7.5ZM10 15C9.72386 15 9.5 15.2239 9.5 15.5V16.5C9.5 16.7761 9.72386 17 10 17H14C14.2761 17 14.5 16.7761 14.5 16.5V15.5C14.5 15.2239 14.2761 15 14 15H13V10.5C13 10.2239 12.7761 10 12.5 10H10.5C10.2239 10 10 10.2239 10 10.5V11.5C10 11.7761 10.2239 12 10.5 12H11V15H10Z",fill:"#2668FF"})})})}),(0,o.jsx)("div",{className:"lv_thirdparty_storage_auth-reconnect-title-text",children:a}),(0,o.jsx)(d.gzW,{size:20,style:{margin:4},onClick:()=>{e.send({type:"CANCEL",windowType:"authorize_inconsistent"}),t()}})]}),(0,o.jsx)("div",{className:"lv_thirdparty_storage_auth-reconnect-body",children:i}),(0,o.jsxs)("div",{className:"lv_thirdparty_storage_auth-reconnect-footer",children:[(0,o.jsx)(n.A,{type:"outline",onClick:()=>{e.send({type:"CANCEL",windowType:"authorize_inconsistent"}),t()},children:c.Ay.t("web_marketplace_text_cancelled")}),(0,o.jsx)(n.A,{type:"primary",onClick:()=>{e.send({type:"CONFIRM",windowType:"authorize_inconsistent"}),null==t||t()},children:c.Ay.t("web_marketplace_text_switching")})]})]})})},Vn=({service:e,modalClose:t})=>(0,o.jsx)("div",{className:"lv_thirdparty_storage_auth-wrapper",children:(0,o.jsxs)("div",{className:"lv_thirdparty_storage_auth-wrapper-down",children:[(0,o.jsx)("div",{className:"lv_thirdparty_storage_auth-wrapper-down-close",children:(0,o.jsx)(d.gzW,{onClick:()=>{e.send("CANCEL"),t()},size:"16px"})}),(0,o.jsx)(Hn,{service:e,modalClose:t})]})}),Yn=$.A.Item,qn=({service:e,listData:t})=>{var r;const n=(0,l.d)(e,(e=>e.context.multiple)),a=(0,l.d)(e,(e=>e.context.countLimit)),i=(0,l.d)(e,(({context:{list:e}})=>{const t=e.filter((e=>"file"===e.tag&&e.is_downloadable));return!!(t.length>0&&t.every((e=>e.checked)))})),s=(0,l.d)(e,(({context:{list:e}})=>{const t=e.filter((e=>"file"===e.tag&&e.is_downloadable));return!!(t.length>0&&t.some((e=>e.checked)))})),u="file"===(null==(r=null==t?void 0:t[0])?void 0:r.tag);return(0,o.jsx)("div",{className:k()("lv_thirdparty_storage-list-header",u?"file":"folder"),children:(0,o.jsxs)("div",{className:"lv_thirdparty_storage-list-header-row",children:[(0,o.jsx)(H.A,{className:"lv_thirdparty_storage-list-checkbox",checked:i,size:"small",indeterminate:!i&&s,onChange:function(t){null==e||e.send({type:"TOOGLE_FILES",checked:t,autoCheck:!0})},disabled:!n||void 0!==a}),(0,o.jsx)("span",{className:"lv_thirdparty_storage-list-header-label name",children:u?c.Ay.t("web_shopify_text_name_material",{},"File Name"):c.Ay.t("web_shopify_text_name_product",{},"SPU Name")}),(0,o.jsx)("span",{className:"lv_thirdparty_storage-list-header-label size",children:c.Ay.t("web_shopify_text_file",{},"File Size")})]})})},Kn=()=>(0,o.jsxs)("div",{className:"lv_thirdparty_storage-list-item_skeleton",children:[(0,o.jsx)(K.A,{text:!1,image:{style:{borderRadius:4,height:16,width:16}},animation:!0}),(0,o.jsx)(K.A,{className:"lv_thirdparty_storage-list-icon_skeleton",image:{style:{borderRadius:4,height:28,width:28}},text:!1,animation:!0}),(0,o.jsx)(K.A,{className:"lv_thirdparty_storage-list-name_skeleton",text:{rows:1,width:88},animation:!0}),(0,o.jsx)(K.A,{className:"lv_thirdparty_storage-list-size_skeleton",text:{rows:1,width:48},animation:!0})]}),Jn=({data:e,selectedFileCount:t,click:r,service:n})=>{const{send:a}=n,i=(0,l.d)(n,(e=>e.context.countLimit)),s=(0,l.d)(n,(e=>e.matches({open:{fetch:"loading"}}))),u=(0,l.d)(n,(e=>e.context.accept)),p=0===e.file_count&&"file"!==e.tag||!e.is_downloadable||u&&"file"===e.tag&&-1===u.indexOf(e.name.toLowerCase().substring(e.name.lastIndexOf(".")))||t===i&&!e.checked,_="file"===e.tag,f=null==e?void 0:e.is_uploaded;return(0,o.jsxs)("div",{className:"lv_thirdparty_storage-list-item",onClick:()=>!p&&function(t){if("file"===e.tag)a({type:"TOOGLE_FILE",id:e.id,checked:t,autoCheck:!0});else{if(s)return;n.send({type:"ENTER_FOLDER",path:e.path_display}),r(e.name)}}(!e.checked),children:[(0,o.jsx)(H.A,{className:k()("lv_thirdparty_storage-list-item-checkbox",_?"show":""),checked:e.checked,size:"small",disabled:p}),(0,o.jsxs)("div",{className:k()("lv_thirdparty_storage-list-cover",_?"file":"folder",p?"disabled":""),children:[e.cover_url?(0,o.jsx)("img",{crossOrigin:"anonymous",src:e.cover_url,loading:"lazy",width:28,height:28}):(0,o.jsx)(d.tkw,{}),(0,o.jsx)("div",{className:k()("folder_count",_?"":"show"),children:e.file_count})]}),(0,o.jsxs)("div",{className:"lv_thirdparty_storage-list-wrap",children:[(0,o.jsx)("div",{className:k()("lv_thirdparty_storage-list-wrap-name",p?"disabled":""),children:e.name}),f?(0,o.jsx)(ne.A,{className:"lv_thirdparty_storage-list-wrap-tag",children:c.Ay.t("web_shopify_label_been_uploaded",{},"Added")}):(0,o.jsx)(o.Fragment,{})]}),"file"===e.tag?(0,o.jsx)("div",{className:k()("lv_thirdparty_storage-list-size",p?"disabled":""),children:0===e.size?"":ce(e.size)}):(0,o.jsx)(o.Fragment,{}),(0,o.jsx)(d._PA,{className:k()("lv_thirdparty_storage-list-arrow",_?"":"show"),fontSize:20})]})},Xn=({service:e})=>{const t=(0,l.d)(e,(e=>e.matches({open:{fetch:"loading"}}))),r=(0,l.d)(e,(e=>e.matches({open:{fetch:"noMore"}}))),n=(0,l.d)(e,(e=>e.matches({open:{fetch:"empty"}}))),a=(0,l.d)(e,(e=>e.context.list)),i=(0,l.d)(e,(e=>e.context.path)),u=(0,l.d)(e,(e=>e.context.curProductId)),p=(0,l.d)(e,(e=>e.context.autoCheck)),[_,f]=(0,s.useState)(""),[h,g]=(0,s.useState)(!1),m=(0,s.useRef)([]),v=((e,t)=>(t(e,null==m?void 0:m.current)||(m.current=e),m.current))(a,ae.A);(0,s.useEffect)((()=>{const{path_display:t,name:r,tag:n}=(null==a?void 0:a[0])||{};u&&a.length>0&&!h&&("folder"===n?(f(r),e.send({type:"ENTER_FOLDER",path:t})):p||e.send({type:"TOOGLE_FILES",checked:!0}))}),[v]);const[y,w]=(0,s.useState)(null);return(0,s.useEffect)((()=>{0===a.length&&t&&w((0,o.jsx)(b.A,{webp:!0,className:"lv_thirdparty_storage-spin"}))}),[a,t]),(0,s.useEffect)((()=>{(r||n)&&w(null)}),[r,n]),(0,s.useEffect)((()=>{!async function(){const t=document.querySelector(".lv_thirdparty_storage-spin");if(!t)return;const r=await(0,J.A)(t,0);a.length>0&&r.intersectionRatio>0&&e.send("LOAD_MORE")}()}),[a]),(0,o.jsxs)("div",{className:"lv_thirdparty_storage-container",children:[(0,o.jsx)("div",{className:"lv_thirdparty_storage-breadcrumb",children:(0,o.jsx)($.A,{separator:(0,o.jsx)(d._PA,{fontSize:16}),routes:(e=>{const t=e.split("/").filter((e=>""!==e)),r=[{path:"/",breadcrumbName:c.Ay.t("web_shopify_text_homepage",{},"All products")}];for(let n=0;n<t.length;n++)r.push({path:t.slice(0,n+1).join("/"),breadcrumbName:t[n]});return r})(_),maxCount:4,itemRender:r=>(0,o.jsx)("div",{onClick:()=>{!function(r){g(!0),!t&&i&&i!==r&&_!==r&&(f(""),e.send({type:"ENTER_FOLDER",path:"/"===r?"":r}))}(r.path)},children:(0,o.jsx)(Yn,{className:"lv_thirdparty_storage-breadcrumb-item",children:(0,o.jsx)(q.A.Text,{ellipsis:!0,style:{marginBottom:0},children:r.breadcrumbName})})})})}),(0,o.jsx)("div",{className:"lv_thirdparty_storage-list",children:(0,o.jsx)(V.A,{style:{height:"100%"},size:"small",scrollLoading:a.length>0&&y,header:(0,o.jsx)(qn,{service:e,listData:a}),dataSource:a,bordered:!1,noDataElement:t?Array.from({length:4},((e,t)=>(0,o.jsx)(Kn,{},t))):(0,o.jsx)("div",{className:"lv_thirdparty_storage-empty-list",children:c.Ay.t("web_no_available_files_found",{},"")}),render:t=>(0,o.jsx)(Jn,{service:e,data:t,click:e=>f(e),selectedFileCount:a.filter((e=>"file"===e.tag&&e.checked)).length},t.id)})})]})},Zn="select-shopify-account",Qn=({onOk:e,accounts:t,service:r})=>{const a=(0,l.d)(r,(e=>e.context.selectedUserId)),[i,u]=(0,s.useState)({}),d=!i.name&&!a;return(0,o.jsxs)("div",{className:Zn,children:[(0,o.jsx)("div",{className:`${Zn}-content`,children:null==t?void 0:t.map((e=>{const t=i.name?i.name===e.name:a===e.user_id;return(0,o.jsx)("div",{className:`${Zn}-item`,children:(0,o.jsxs)("div",{className:k()(`${Zn}-item-content`,t&&"selected"),onClick:()=>(e=>{u(e)})(e),children:[(0,o.jsxs)("div",{className:k()(`${Zn}-item-desc`),children:[(0,o.jsx)("div",{className:k()(`${Zn}-item-name`,t&&"selected"),children:e.name}),(0,o.jsx)("div",{className:k()(`${Zn}-item-email`),children:e.email})]}),(0,o.jsx)(E.A,{className:`${Zn}-radio`,checked:t})]})},e.name)}))}),(0,o.jsx)("div",{className:`${Zn}-footer`,children:(0,o.jsx)("div",{className:`${Zn}-buttons`,children:(0,o.jsx)(n.A,{size:"large",type:"primary",disabled:d,onClick:()=>{!i.user_id&&!a||(null==e||e(),r.send({type:"CONTINUE"}),r.send({type:"UPDATE_SELECTED_USER_ID",data:{selectedUserId:i.user_id||a||""}}),r.send({type:"OPEN_SHOP",platform:be.Shopify,curShop:i.user_id||a||""}))},children:c.Ay.t("web_Shopify_text_go_on",{},"Continue")})})})]})},ea=async e=>{var t,r,n,a;let s=null;const{service:l,force:u}=e,p=null==(t=l.getSnapshot())?void 0:t.context.spaceId;l.send({type:"UPDATE_SPACE_ID",spaceId:p??"0"});let _=[];try{(async()=>{let e=null==window?void 0:window.__locationInfo;if(!e){const{data:t}=await Pt.getLocation();e=t}Je.updateRequestDomain({domain:e.domain})})();const e=await Tt.userInfo({platform:be.Shopify},"multi");_=(null==(r=null==e?void 0:e.data)?void 0:r.user_infos)??[]}catch{}if(null==_||!_.length)return;l.send({type:"SET_SHOPIFY_ACCOUNTS",shopifyAccounts:_}),l.send({type:"LOG_PARAMS",platform:be.Shopify});let f=null==(n=l.getSnapshot())?void 0:n.context.selectedUserId;if(f&&!_.find((e=>e.user_id===f))&&(f="",l.send({type:"UPDATE_SELECTED_USER_ID",data:{selectedUserId:f}})),!u&&(1===_.length||f))return f=f||(null==(a=null==_?void 0:_[0])?void 0:a.user_id)||"",void l.send({type:"OPEN_SHOP",platform:be.Shopify,curShop:f});const h=()=>{i.A.confirm({title:c.Ay.t("web_Shopify_title_confirm_close",{},"Confirm to close?"),content:c.Ay.t("web_Shopify_text_not_sync",{},"Your media won\u2019t be synced to CapCut."),cancelText:c.Ay.t("web_Shopify_button_delete",{},"Cancel"),okText:c.Ay.t("web_Shopify_button_confirm_to_close",{},"Close"),onOk(){null==s||s.close(),l.send({type:"REPORT_CANCEL"})}})};return s=i.A.confirm({closable:!1,icon:null,maskClosable:!1,className:`${Zn}-modal`,title:(0,o.jsxs)("div",{className:`${Zn}-title`,children:[(0,o.jsx)("span",{children:c.Ay.t("web_Shopify_text_choose_sp",{},"Select Shopify account")}),(0,o.jsx)("div",{className:`${Zn}-title-close`,onClick:h,children:(0,o.jsx)(d.gzW,{size:24})})]}),style:{width:544},content:(0,o.jsx)(Qn,{onOk:()=>{null==s||s.close()},accounts:_,service:l}),footer:null,onCancel:h}),s},ta=({closable:e,service:t})=>{var r,n;const a=(0,l.d)(t,(e=>e.context.selectedUserId)),i=(0,l.d)(t,(e=>e.context.curShop)),s=(0,l.d)(t,(e=>e.context.shopifyAccounts)),u=(0,l.d)(t,(e=>e.context.thirdPartyFileModalCloseCb)),p=a||i,_=(null==(n=null==(r=null==s?void 0:s.filter((e=>e.user_id===p)))?void 0:r[0])?void 0:n.name)||"",f=(null==s?void 0:s.length)&&(null==s?void 0:s.length)>1;return(0,o.jsxs)("div",{className:"lv_thirdparty_storage-header",children:[(0,o.jsx)("div",{className:"lv_thirdparty_storage-icon",children:(0,o.jsx)(d.CbV,{size:"48px"})}),(0,o.jsxs)("div",{className:"lv_thirdparty_storage-data",children:[(0,o.jsx)("h2",{className:"lv_thirdparty_storage-data-title",children:(0,o.jsx)("h2",{className:"lv_thirdparty_storage-data-title",children:_})}),(0,o.jsxs)("div",{className:"lv_thirdparty_storage-data-content",children:[p&&(0,o.jsx)("div",{className:"lv_thirdparty_storage-data-email",children:p}),f&&(0,o.jsx)("div",{className:"lv_thirdparty_storage-data-unbundle",onClick:function(){t.send("SWITCH"),ea({service:t,force:!0})},children:c.Ay.t("web_shopify_text_change_account",{action0:e=>e},"Switch account")})]})]}),e&&(0,o.jsx)(d.gzW,{className:"lv_thirdparty_storage-close",onClick:function(){t.send("CLOSE"),null==u||u("shopify_list_close")}})]})},ra=({onCancel:e,service:t})=>{const r=(0,l.d)(t,(e=>e.context.list.every((e=>!e.checked)))),i=(0,l.d)(t,(e=>e.matches({open:{upload:"pending"}}))),u=(0,l.d)(t,(e=>e.matches({open:{upload:"checking"}}))),p=(0,l.d)(t,(e=>e.context.list)),_=(0,l.d)(t,(e=>e.context.thirdPartyFileModalCloseCb)),f=(0,s.useRef)(null);return(0,o.jsxs)("div",{className:"lv_thirdparty_storage-footer",ref:f,children:[(0,o.jsxs)("div",{className:"lv_thirdparty_storage-footer-left",children:[(0,o.jsx)(Y.A,{position:"tl",className:"lv_thirdparty_storage-footer-left-tooltip",getPopupContainer:function(){return null!=f&&f.current?null==f?void 0:f.current:document.body},style:{whiteSpace:"pre-wrap",zIndex:9999,wordBreak:"break-word"},content:c.Ay.t("web_shopify_text_support_format",{},"Supported: .mp4, .mov, .m4v, .flv, .mkv, .avi, .webm, .wmv, .rm, .rmvb, .3gp, .m2ts, .m2t, .mxf, .mpg, .mpeg, .mpe, .ts, .qt, .asf, .mts, jpeg, .jpg, .png, .heif, .heic"),children:(0,o.jsx)(d.UvL,{width:16,height:16})}),c.Ay.t("web_shopify_text_upload_fail",{},"Only showing supported file types")]}),(0,o.jsxs)("div",{className:"lv_thirdparty_storage-footer-right",children:[(0,o.jsx)(n.A,{size:"large",onClick:function(){null==e||e(),null==t||t.send("CLOSE"),null==_||_("shopify_list_close")},className:"close",children:c.Ay.t("web_Shopify_button_cancel",{},"Cancel")}),(0,o.jsx)(n.A,{size:"large",type:"primary",disabled:r,loading:i||u,onClick:function(){(function(){const e=p.filter((e=>"file"===e.tag&&e.checked)).length>20;return!!e&&(a.A.error(c.Ay.t("web_file_upload_count_limit",{},"Upload up to 20 files at a time")),e)})()||null==t||t.send({type:"UPLOAD"})},children:c.Ay.t("web_Shopify_button_upload",{},"Import")})]})]})},na=({service:e,closable:t,onCancel:r})=>e?(0,o.jsx)("div",{className:"lv_thirdparty_storage-layout",children:(0,o.jsxs)("div",{className:"lv_thirdparty_storage-wrapper",children:[(0,o.jsx)(ta,{service:e,closable:t}),(0,o.jsx)(Xn,{service:e}),(0,o.jsx)(ra,{onCancel:r,service:e})]})}):null,aa="select-third-file-save-workspace",ia=e=>{const{onOk:t,workspaceList:r,fileSize:a,onCancel:i,defaultSelected:l,defaultNotRemind:u=!1}=e,[d,_]=(0,s.useState)(l||{}),[f,h]=(0,s.useState)(u);return(0,o.jsxs)("div",{className:aa,children:[(0,o.jsx)("div",{className:`${aa}-content`,style:{height:null!=d&&d.workspaceId?232:260},children:null==r?void 0:r.map((e=>{const t=d.workspaceId===e.workspaceId,r=(a||0)<=(e.quota||0)-(e.usage||0);return(0,o.jsx)("div",{className:`${aa}-item`,children:(0,o.jsxs)("div",{className:k()(`${aa}-item-content`,t&&"selected"),onClick:()=>(e=>{_(e)})(e),children:[(0,o.jsx)(p.A,{size:36,shape:"square",style:{background:e.avatarColor},children:(0,o.jsx)("div",{className:`${aa}-name`,children:(e.workspaceName||"")[0]})}),(0,o.jsxs)("div",{className:`${aa}-item-desc`,children:[(0,o.jsx)("div",{className:`${aa}-item-name`,children:e.workspaceName}),(0,o.jsxs)("div",{className:k()(`${aa}-item-tips`,!r&&t&&"space-not-enough"),children:[(r||!t)&&c.Ay.t("web_livestudio_toast_remain_space",{placeholder0:e.remainSize},"{placeholder0} left"),t&&!r&&c.Ay.t("web_livestudio_text_not_enough_space",{placeholder0:ce(a||0)},"The project is {placeholder0}. You don\u2019t have enough storage left in this space.")]})]}),(0,o.jsx)(E.A,{className:`${aa}-radio`,checked:t})]})},e.workspaceId)}))}),(0,o.jsxs)("div",{className:`${aa}-footer`,children:[(null==d?void 0:d.workspaceId)&&(0,o.jsxs)("div",{className:`${aa}-remind-tips`,children:[(0,o.jsx)(H.A,{size:"small",checked:f,onChange:h}),(0,o.jsx)("span",{onClick:()=>h((e=>!e)),children:c.Ay.t("web_livestudio_toast_store_space_here",{},"Future projects will be automatically saved in this space.")})]}),(0,o.jsxs)("div",{className:`${aa}-buttons`,children:[(0,o.jsx)(n.A,{size:"large",style:{marginRight:16},onClick:i,children:c.Ay.t("web_livestudio_button_cancel",{},"Cancel")}),(0,o.jsx)(n.A,{size:"large",type:"primary",onClick:()=>null==t?void 0:t(d,f),children:c.Ay.t("web_livestudio_button_select",{},"Select")})]})]})]})};class oa{constructor(e){var t,r,n,s,l,u;oe(this,"service"),oe(this,"modal",null),oe(this,"config");let p=[];Array.isArray(e.acceptMime)?p=e.acceptMime:Array.isArray(e.accept)&&e.accept.map((e=>{p=[...p,...zn[e]]}));this.service=(0,D.U4)(Sr.withContext({...vr(),uid:e.uid,onUploadSet:new Set,cancelList:new Set,accept:0!==p.length?p:void 0,multiple:void 0===e.multiple||e.multiple,currentPage:e.currentPage,desc:e.desc??c.Ay.t("web_space_uploadfiles_gd_list_desc",{},"Only showing video, audio, and photo"),toolType:e.toolType,countLimit:e.countLimit,workspaceList:e.workspaceList,videoTypeId:null!=(t=location.pathname)&&t.includes(ue.PATH)?De.PICTURE_TEMPLATE:e.videoTypeId,onUnBindSuccess:()=>{a.A.success(c.Ay.t("un_bind_successfully"))},onUnBindError:()=>{a.A.error(c.Ay.t("logout_failed_please_tryagain"))},onImportError:e=>{a.A.error(c.Ay.t("web_dropbox_toast_cannot_upload",{string0:e},`Couldn\u2019t upload ${e}`))},onServerError:t=>{var r,n;null==(r=e.onSaveError)||r.call(e,t);let i="google_drive";"dropbox"===Ge(je)&&(i="dropbox"),"shopify"===Ge(je)&&(i="shopify"),(new tr).linkFileFailReport({current_page:null!=(n=location.pathname)&&n.includes(ue.PATH)?Ie.PictureEdit:e.currentPage||Ie.Editor,source:i}),a.A.error(c.Ay.t("operation_failed_please_tryagain")),ze(["state","file_id","imported_file_id"])},onUploadFail(t){var r;let n=c.Ay.t("upload_failed_please_try_again",{placeholder:t.name});n=c.Ay.t("web_marketplace_toast_cannot_upload",{string0:t.name});let i="google_drive";"dropbox"===Ge(je)&&(i="dropbox"),"shopify"===Ge(je)&&(i="shopify"),(new tr).linkFileFailReport({current_page:null!=(r=location.pathname)&&r.includes(ue.PATH)?Ie.PictureEdit:e.currentPage||Ie.Editor,source:i}),a.A.error(n)},onUploadExist(e){a.A.error(c.Ay.t("files_existed_no_need_repeat",{placeholder:e.name}))},onUploadNoSpace:async(e,t)=>{var r,n;let i=!1;this.config.expandModalInstance&&(i=await(null==(n=(r=this.config.expandModalInstance).isSupportExpand)?void 0:n.call(r))),this.config.expandModalInstance&&Array.isArray(t)&&t.length?this.config.expandModalInstance.show({type:Pr.UPLOAD_FULL_SPACE_RESOLVE,isUpgradeEntryVisible:i,reporterParams:{pageFrom:Ir.spaceLimitUpgrade,currentPage:this.config.currentPage},uploadFileList:t,onCurrentShowPayStatus:(e,t)=>{t&&"success"===e&&this.service.send({type:"UPLOAD"})}}):this.config.expandModalInstance&&i?this.config.expandModalInstance.show({type:Pr.CAPACITY_INSUFFICIENT_WITH_BUY,reporterParams:{pageFrom:Ir.spaceLimitUpgrade},onCurrentShowPayStatus:(e,t)=>{t&&"success"===e&&this.service.send({type:"UPLOAD"})}}):e?a.A.error(c.Ay.t("web_space_uploadfiles_gd_failed_1",{placeholder:ce(e)},"The selected file is larger than the space left ({placeholder})")):a.A.error(c.Ay.t("web_space_uploadlist_failed_1",{},"Upload failed, not enough space left"))},onSelectSpace:async(t,r)=>{var n;let a;const s=He.getString("third_party_workspace")??"",l=null==t?void 0:t.find((e=>e.workspace_id===s));if(l)a=l;else if(1===(null==t?void 0:t.length))a=null==t?void 0:t[0];else try{const e=e=>({...e,workspaceId:e.space_id,workspaceName:e.name,avatarColor:e.avatar_color,remainSize:ce((e.quota??0)-(e.usage??0))}),n=r.reduce(((e,t)=>e+t.size),0),{selected:s,notRemind:l}=await(u={workspaceList:null==t?void 0:t.map((t=>e(t))),fileList:r,fileSize:n,platform:be.GoogleDrive,closePrompt:c.Ay.t("web_marketplace_text_not_sync",{},"Your media won\u2019t be synced to CapCut.")},new Promise(((e,t)=>{let r=null;const{closePrompt:n}=u,a=()=>{i.A.confirm({title:c.Ay.t("web_livestudio_toast_confirm_to_close",{},"Confirm to close?"),content:n||c.Ay.t("web_livestudio_text_confirm_to_close",{},"Aft er the popup is closed, the material will not be synchronized to CapCut. Are you sure to close the popup\uff1f"),cancelText:c.Ay.t("web_livestudio_button_cancel",{},"Cancel"),okText:c.Ay.t("web_livestudio_button_confirm_to_close",{},"Confirm to close"),onOk(){t(),null==r||r.close()}})};r=i.A.confirm({closable:!1,icon:null,maskClosable:!1,className:`${aa}-modal`,title:(0,o.jsxs)("div",{className:`${aa}-title`,children:[(0,o.jsx)("span",{children:c.Ay.t("web_livestudio_toast_select_store_space",{},"Select space to save your project")}),(0,o.jsx)("div",{className:`${aa}-title-close`,onClick:a,children:(0,o.jsx)(d.gzW,{size:24})})]}),style:{width:560},content:(0,o.jsx)(ia,{...u,onOk:(t,n)=>{e({selected:t,notRemind:n}),null==r||r.close()},onCancel:a}),footer:null,onCancel:a})})));a=s,null!=s&&s.workspace_id&&l&&He.setString("third_party_workspace",null==s?void 0:s.workspace_id)}catch{null==(n=e.thirdPartyFileOpenStopCb)||n.call(e,"select_workspace_cancel"),a=null}var u;return null!=a&&a.workspace_id&&this.service.send({type:"UPDATE_SPACE_ID",spaceId:(null==a?void 0:a.workspace_id)??"0"}),a},thirdPartyFileOpenStopCb:t=>{var r;null==(r=e.thirdPartyFileOpenStopCb)||r.call(e,t)},thirdPartyFileModalCloseCb:t=>{var r;null==(r=e.thirdPartyFileModalCloseCb)||r.call(e,t)}})).start().onTransition((e=>{if(e.matches("open")&&null===this.modal&&(this.service.send({type:"REPORT_SHOW"}),e.context.platform===be.Shopify?(this.getService().send({type:"UPDATE_SPACE_ID",spaceId:this.config.spaceId}),this.modal=i.A.info({wrapClassName:"lv_shop_list_modal",modalRender:()=>(0,o.jsx)(na,{service:this.service,closable:!0}),focusLock:!1,onCancel:()=>{this.service.send("CLOSE")}})):this.modal=i.A.info({wrapClassName:"lv_thirdparty_storage_modal",modalRender:()=>(0,o.jsx)(Wn,{service:this.service,closable:!0}),focusLock:!1,onCancel:()=>{this.service.send("CLOSE")}})),(e.matches("close")||e.matches("selectingSpaceWithSelect"))&&this.modal&&(this.modal.close(),this.modal=null),e.matches("authorizing")&&e.children.LvThirdpartyCloudStorageAuth){const t=Ge("utm_campaign");Ge("utm_source"),e.children.LvThirdpartyCloudStorageAuth.send({type:"SEND_UI_CALLBACK",service:()=>{e.children.LvThirdpartyCloudStorageAuth.send({type:"EVENT_REPORT_SHOW",source:"googledrive"===t?Se.GoogleDriveMarketPlace:void 0}),(e=>{const t=i.A.info({alignCenter:!0,onCancel:()=>{e.send("CANCEL")},modalRender:()=>(0,o.jsx)(Vn,{modalClose:()=>t.close(),service:e})})})(e.children.LvThirdpartyCloudStorageAuth)}}),e.children.LvThirdpartyCloudStorageAuth.send({type:"SEND_RE_AUTH_UI_CALLBACK",service:()=>{(e=>{const t="googledrive"===Ge(Fe)?"google":"dropbox",r=i.A.info({alignCenter:!0,onCancel:()=>{e.send({type:"CANCEL",windowType:"authorize_inconsistent"})},modalRender:()=>(0,o.jsx)($n,{authType:t,modalClose:()=>r.close(),service:e})})})(e.children.LvThirdpartyCloudStorageAuth)}})}})),this.config=e,this.config.reqDomain&&Je.updateRequestDomain({domain:this.config.reqDomain}),this.service.send({type:"UPDATE_MAX_UPLOAD_SIZE",size:(null==(r=this.config)?void 0:r.maxUploadSize)??mr}),this.service.send({type:"UPDATE_IS_BOE",value:(null==(n=this.config)?void 0:n.isBOE)??!1}),this.setDraftId((null==(s=this.config)?void 0:s.draftId)??""),this.setSpaceId((null==(l=this.config)?void 0:l.spaceId)??"0"),this.config.cookieConsent&&(null==(u=this.config.cookieConsent)||u.onChange((({firstPartyAnalytics:e})=>{e&&er().start()})))}onSelectWorkspace(e){this.service.send({type:"ADD_ON_SELECT_WORKSPACE",callback:e})}getService(){return this.service}show(e){e===be.Shopify?(this.getService().send({type:"UPDATE_SPACE_ID",spaceId:this.config.spaceId}),ea({service:this.service})):this.service.send({type:"OPEN",platform:e})}onUpload(e){this.service.send({type:"ADD_ON_UPLOAD",callback:e})}removeUpload(e){this.service.send({type:"REMOVE_ON_UPLOAD",callback:e})}setToolType(e){this.service.send({type:"UPDATE_TOOLTYPE",toolType:e})}retry(e,t){this.service.send({type:"RETRY_UPLOAD",id:e,spaceId:t})}delete(e){return new Promise(((t,r)=>{this.service.send({type:"DELETE_UPLOAD",item:e,resolve:t,reject:r})}))}setDraftId(e){this.service.send({type:"UPDATE_DRAFT_ID",draftId:e})}setExpandModalInstance(e){this.config.expandModalInstance=e}setIDC(){console.error("un expect to call setIDC func, is not allowable anymore")}setSpaceId(e){this.service.send({type:"UPDATE_SPACE_ID",spaceId:e})}uploadWithoutSelect(e,t){this.service.send({type:"UPLOAD_WITHOUT_SELECT",data:e,platform:t})}async getUploadFileSize(e,t){var r;if("TTLive"===t){const n=await Tt.getUploadSize({platform:t,file_infos:e});return(null==(r=null==n?void 0:n.data)?void 0:r.size)||0}throw new Error(`Not support get third-party: [${t}] file size `)}}}}]);
//# sourceMappingURL=byted_image_core-d11ed54d.8df7b64f.js.map